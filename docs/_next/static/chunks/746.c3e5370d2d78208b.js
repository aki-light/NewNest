"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[746],{7746:function(t,e,i){i.r(e),i.d(e,{default:function(){return po}});var n=i(5893),r=(0,i(1752).default)(),o=(r.serverRuntimeConfig,r.publicRuntimeConfig),a=Object.freeze({ResourceBaseUrl:"".concat(o.staticFolder,"/game_sources/rpg_1/assets/")}),s=i(8866),u=i(3631);function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.loop=!1,this.played=!1,this.paused=!1,this.offset=0,this.playedAt=0,this.volumeRate=void 0,d.sharedContext&&(this.buffer=e,this.gainNode=d.sharedContext.createGain())}var e,i,n,r=t.prototype;return r.play=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,n=this,r=d.sharedContext;r&&(this.loop=t,this.source=r.createBufferSource(),this.source.loop=this.loop,this.source.loopStart=0,this.source.loopEnd=this.buffer.duration,this.source.buffer=this.buffer,this.source.onended=function(){return n.stop()},i?(this.gainNode.gain.value=t?d.bgmVolume*i:d.seVolume*i,this.volumeRate=i):this.gainNode.gain.value=t?d.bgmVolume:d.seVolume,this.gainNode.connect(r.destination),this.source.connect(this.gainNode),this.source.start(0,e),this.played=!0,this.playedAt=r.currentTime-e,this.paused=!1)},r.stop=function(){if(this.source&&this.played){this.source.disconnect();try{this.source.buffer=null}catch(t){}this.source.onended=null,this.source=null,this.paused=!1}},r.pause=function(){!this.paused&&this.played&&this.source&&(this.offset=this.elapsedTime,this.stop(),this.paused=!0)},r.resume=function(){this.paused&&this.played&&(this.play(this.loop,this.offset,this.volumeRate),this.paused=!1)},r.isPosed=function(){return this.paused},e=t,(i=[{key:"volume",get:function(){return this.gainNode?this.gainNode.gain.value:-1},set:function(t){this.gainNode&&(this.gainNode.gain.value=t)}},{key:"elapsedTime",get:function(){if(this.paused)return this.offset;var t=d.sharedContext;if(!this.source||!t)return 0;var e=t.currentTime-this.playedAt;if(this.loop){var i=this.source.loopEnd-this.source.loopStart;if(e>i)return e%i}return e}}])&&c(e.prototype,i),n&&c(e,n),t}();var p=window.indexedDB||window.webkitIndexedDB,h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.init=function(e,i){if(!p)throw new Error("indexed db is not supported");var n=p.open(t.dbName,t.dbVersion);n.onupgradeneeded=function(e){t.upgradeDB(e)},n.onsuccess=function(e){var n=e.target.result;t.db=n,i()},n.onerror=function(t){return e(t)}},t.put=function(e,i,n,r){var o=t.getStoreObject();if(o){var a=t.createRecordObject(e,i),s=o.put(a);n&&(s.onsuccess=function(t){n(t)}),r&&(s.onerror=function(t){r(t)})}else r&&r()},t.get=function(e,i,n){var r=t.getStoreObject();if(r){var o=r.get(e);o.onsuccess=function(t){var e=t.target.result;e?i(e.value,e.key):i(void 0,void 0)},n&&(o.onerror=function(t){n(t)})}else n&&n()},t.delete=function(e,i,n){var r=t.getStoreObject();if(r){var o=r.delete(e);i&&(o.onsuccess=function(t){i(t)}),n&&(o.onerror=function(t){n(t)})}else n&&n()},t.clear=function(e,i){var n=t.getStoreObject();if(n){var r=n.clear();e&&(r.onsuccess=function(t){e(t)}),i&&(r.onerror=function(t){i(t)})}else i&&i()},t.upgradeDB=function(e){var i=e.target.result,n=t.storeIndex,r=t.storeName;i.createObjectStore(r,{keyPath:n}).createIndex(n,n,{unique:!0})},t.getStoreObject=function(){if(!t.db)return null;var e=t.storeName;return t.db.transaction(e,"readwrite").objectStore(e)},t.createRecordObject=function(t,e){return{key:t,value:e}},t}();function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}h.dbName="escape-game-db",h.dbVersion=1,h.storeName="escape-game-store",h.storeIndex="key",h.db=null;var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return t.init=function(e){if(e)t.context=e;else{var i=window.AudioContext||window.webkitAudioContext;t.context=new i}var n=(0,u.qY)();n&&(t.setSoundInitializeEvent(n),t.useWebAudio(),t.setWindowLifeCycleEvent(n))},t.update=function(e){if(t.sharedContext){var i=t.killingSounds;if(i.length>0){var n=[],r=!0,o=!1,a=void 0;try{for(var s,u=i[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;t.sharedContext.currentTime>=c.endAt?c.sound.stop():n.push(c)}}catch(l){o=!0,a=l}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}t.killingSounds=n}}},t.useWebAudio=function(){if(!t.webAudioInitialized){var e=t.supportedExtensions,i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value,c=s.kCJ;c.setExtensionXhrType(u,c.XHR_RESPONSE_TYPE.BUFFER),c.setExtensionLoadType(u,c.LOAD_TYPE.XHR)}}catch(l){n=!0,r=l}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}y.game.loader.use(t.parsingMiddleware()),t.webAudioInitialized=!0}},t.parsingMiddleware=function(){return function(e,i){var n,r=t.supportedExtensions,o=e.url.split(".")[1];o&&-1!==r.indexOf(o)?null===(n=t.sharedContext)||void 0===n||n.decodeAudioData(e.data,(function(t){e.buffer=t,i()})):i()}},t.setSoundInitializeEvent=function(e){var i,n=void 0===document.ontouchend?"mousedown":"touched",r=e.version?e.version.split(".")[0]:"0";if("chrome"===e.name&&Number.parseInt(r,10)>=66)i=function(){t.sharedContext&&t.sharedContext.resume(),document.body.removeEventListener(n,i)};else{if("safari"!==e.name)return;i=function(){if(t.sharedContext){var e=t.sharedContext.createBufferSource();e.buffer=t.sharedContext.createBuffer(1,1,44100),e.connect(t.sharedContext.destination),e.start(0),e.disconnect()}document.body.removeEventListener(n,i)}}document.body.addEventListener(n,i)},t.setWindowLifeCycleEvent=function(e){"safari"===e.name?document.addEventListener("webkitvisibilitychange",(function(){document.webkitHidden?t.pauseBgm():t.resumeBgm()})):document.addEventListener("visibilitychange",(function(){document.hidden?t.pauseBgm():t.resumeBgm()}))},t.registerSound=function(e,i){t.managedSounds.set(e,i)},t.unregisterSound=function(e){t.managedSounds.delete(e)},t.getSound=function(e){return t.managedSounds.get(e)},t.createSound=function(e,i){var n=new l(i);return t.registerSound(e,n),n},t.hasSound=function(e){return t.managedSounds.has(e)},t.destroySound=function(e){var i=this.getSound(e);t.unregisterSound(e),null===i||void 0===i||i.stop()},t.pauseBgm=function(){t.paused||(t.paused=!0,t.managedSounds.forEach((function(t){t.pause()})))},t.resumeBgm=function(){t.sceneIsPaused||t.paused&&(t.paused=!1,t.managedSounds.forEach((function(t){t.resume()})))},t.fade=function(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.sharedContext){var o=t.sharedContext.currentTime+n;e.gainNode.gain.exponentialRampToValueAtTime(i,o),r&&t.killingSounds.push({sound:e,endAt:o})}},t.playBgm=function(e,i){var n=t.getSound(e);null===n||void 0===n||n.play(!0,0,i)},t.stopBgm=function(e){var i=t.getSound(e);null===i||void 0===i||i.stop()},t.playSe=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.getSound(e);null===n||void 0===n||n.play(!1,i)},t.setAllSoundVolume=function(e,i){t.managedSounds.forEach((function(t){t.loop?t.volume=e:t.volume=i}))},t.setSoundVolume=function(e,i){var n=t.getSound(e);n&&(n.volume=i)},t.loadSoundOptionFromDB=function(){h.get("bgmVolume",(function(e){t.bgmVolume=0===e?0:e||.05})),h.get("seVolume",(function(e){t.seVolume=0===e?0:e||.5}))},e=t,n=[{key:"sharedContext",get:function(){return t.context}}],(i=null)&&f(e.prototype,i),n&&f(e,n),t}();d.supportedExtensions=["mp3"],d.webAudioInitialized=!1,d.context=null,d.paused=!1,d.killingSounds=[],d.managedSounds=new Map,d.sceneIsPaused=!1;var y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.start=function(e){t.game=new s.MxU(e),h.init((function(t){throw new Error("indexed db could not be initialized")}),(function(){d.loadSoundOptionFromDB()})),d.init();var i=document.getElementById("play-game");i&&(i.appendChild(t.game.view),t.game.loader.baseUrl=a.ResourceBaseUrl,t.game.ticker.add((function(e){var i;null===(i=t.currentScene)||void 0===i||i.update(e),d.update(e)})),t.resizeCanvas(),window.addEventListener("resize",t.resizeCanvas))},t.transitionInIfPossible=function(e){var i;return!(!t.sceneResourceLoaded||!t.sceneTransitionOutFinished)&&(null===(i=t.currentScene)||void 0===i||i.destroy(),t.currentScene=e,t.game.stage.addChild(e),e.beginTransitionIn((function(){})),!0)},t.loadScene=function(e){t.currentScene?(t.sceneResourceLoaded=!1,t.sceneTransitionOutFinished=!1,e.beginLoadResource((function(){t.sceneResourceLoaded=!0,t.transitionInIfPossible(e)})),t.currentScene.beginTransitionOut((function(){t.sceneTransitionOutFinished=!0,t.transitionInIfPossible(e)}))):(t.sceneTransitionOutFinished=!0,e.beginLoadResource((function(){t.sceneResourceLoaded=!0,t.transitionInIfPossible(e)})))},t.resizeCanvas=function(){var e,i,n=t.game,r=n.renderer,o=r.width/r.height;window.innerWidth/window.innerHeight>o?(e=window.innerHeight*(r.width/r.height),i=window.innerHeight):(e=window.innerWidth,i=window.innerWidth*(r.height/r.width)),(e>=500||i>=500)&&(e=500,i=500),n.view.style.width="".concat(e-20,"px"),n.view.style.height="".concat(i-20,"px")},t}();y.sceneTransitionOutFinished=!0,y.sceneResourceLoaded=!1;var m=i(4051),v=i.n(m);var g=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=new s.W20,this.overlay=new s.TCu,this.transitionBegan=!1,this.transitionFinished=!1,this.onTransitionFinished=function(){},this.afterFinishedVisible=!1,this.alphaFrom=e,this.alphaTo=i,this.alphaProgress=n;var r=y.game.view.width,o=y.game.view.height;this.overlay.beginFill(0),this.overlay.moveTo(0,0),this.overlay.lineTo(r,0),this.overlay.lineTo(r,o),this.overlay.lineTo(0,o),this.overlay.endFill(),this.overlay.alpha=this.alphaFrom,this.container.addChild(this.overlay)}var e=t.prototype;return e.getContainer=function(){return this.container},e.begin=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.afterFinishedVisible=t,this.container.visible=!0,this.overlay.alpha=this.alphaFrom,this.transitionBegan=!0,this.transitionFinished=!1},e.isBegan=function(){return this.transitionBegan},e.isFinished=function(){return this.transitionFinished},e.isActive=function(){return this.isBegan()&&!this.isFinished()},e.update=function(t){this.alphaTo<=this.alphaFrom&&this.overlay.alpha<=this.alphaTo||this.alphaTo>=this.alphaFrom&&this.overlay.alpha>=this.alphaTo?(this.afterFinishedVisible||(this.container.visible=!1),this.transitionBegan=!1,this.onTransitionFinished(),this.transitionFinished=!0):this.overlay.alpha+=this.alphaProgress},e.setCallback=function(t){this.onTransitionFinished=t},t}(),b=Object.freeze({UI:{SceneUiGraph:function(t){return"ui_graph/".concat(t,".json")},MessageWindow:"ui/message_window.png",OptionFrame:"ui/option_frame.png"},Texts:{InventoryScene:{Ja:"ui_graph/inventory_scene_text.json",En:"ui_graph/inventory_scene_text_en.json"},TalkScene:{Ja:"ui_graph/talk_scene_text.json",En:"ui_graph/talk_scene_text_en.json"},EndingTalkScene:{Ja:"ui_graph/ending_talk_scene_text.json",En:"ui_graph/ending_talk_scene_text_en.json"},ScoreScene:{Ja:"ui_graph/score_scene_text.json",En:"ui_graph/score_scene_text_en.json"},BattleScene:{Ja:"ui_graph/battle_scene_text.json",En:"ui_graph/battle_scene_text_en.json"}},Static:{NormalAttack:"effects/normal_attack.json",NormalBossAttack:"effects/normal_boss_attack.json",HpRecover:"effects/hp_recover.json",FpRecover:"effects/fp_recover.json",FullRecover:"effects/full_recover.json",Cure:"effects/cure.json",AttackUp:"effects/attack_up.json",CriticalUp:"effects/critical_up.json",DvUp:"effects/dv_up.json",Guard:"effects/guard.json",AllGuard:"effects/all_guard.json",PlayerSkill1:"effects/player_skill_1.json",PlayerSkill2_0:"effects/player_skill_2-0.json",PlayerSkill2_1:"effects/player_skill_2-1.json",PlayerSkill3:"effects/player_skill_3.json",PlayerSkill4:"effects/player_skill_4.json",PlayerSkill5:"effects/player_skill_5.json",PlayerSkill6_0:"effects/player_skill_6-0.json",PlayerSkill6_1:"effects/player_skill_6-1.json",BossSkill1:"effects/boss_skill_1.json",BossSkill2:"effects/boss_skill_2.json",BossSkill3_0:"effects/boss_skill_3-0.json",BossSkill3_1:"effects/boss_skill_3-1.json",BossSpecialMove:"effects/boss_special_move.json",MagicTool1:"effects/magic_tool_1.json",MagicTool2:"effects/magic_tool_2.json",MagicTool3_0:"effects/magic_tool_3-0.json",MagicTool3_1:"effects/magic_tool_3-1.json",MagicTool3_2:"effects/magic_tool_3-2.json",BossTexture:{Idle:"ui/boss.png",Damaged:"ui/boss_damaged.png"},GaugeFrame:"ui/gauge_frame.png",HpBar:"ui/hp_bar.png",FpBar:"ui/fp_bar.png",GaugeEmpty:"ui/gauge_empty.png"},TextureFrame:{NormalAttack:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["normal_attack-".concat(t,".png")]},NormalBossAttack:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["boss_normal_attack_".concat(t,".png")]},BossSkill1:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["boss_skill_1_".concat(t,".png")]},BossSkill2:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["boss_skill_2_".concat(t,".png")]},BossSkill3:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["boss_skill_3_".concat(t,".png")]},BossSpecialMove:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["boss_special_move_".concat(t,".png")]},MagicTool1:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["magic_tool_1_".concat(t,".png")]},MagicTool2:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["magic_tool_2_".concat(t,".png")]},MagicTool3:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["magic_tool_3_".concat(t,".png")]},HpRecover:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["hp_recover_".concat(t,".png")]},FpRecover:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["fp_recover_".concat(t,".png")]},FullRecover:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["full_recover_".concat(t,".png")]},Cure:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["cure_".concat(t,".png")]},AttackUp:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["attack_up_".concat(t,".png")]},CriticalUp:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["critical_up_".concat(t,".png")]},DvUp:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["dv_up_".concat(t,".png")]},PlayerSkill1:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["player_skill_1_".concat(t,".png")]},PlayerSkill2:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["player_skill_2_".concat(t,".png")]},PlayerSkill3:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["player_skill_3_".concat(t,".png")]},PlayerSkill4:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["player_skill_4_".concat(t,".png")]},PlayerSkill5:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["player_skill_5_".concat(t,".png")]},PlayerSkill6:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["player_skill_6_".concat(t,".png")]},Guard:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["guard_".concat(t,".png")]},AllGuard:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s.P6Y.kN["all_guard_".concat(t,".png")]}},EquipMents:["equipments/armor4_01.png","equipments/armor4_03.png","equipments/armor6_04.png","equipments/armor7_01.png","equipments/armor1.png","equipments/boots1_01.png","equipments/boots3_02.png","equipments/bow6_03.png","equipments/bracelet_02.png","equipments/cloak3_03.png","equipments/crown01_01.png","equipments/clothes11_03.png","equipments/circlet.png","equipments/greave2_01.png","equipments/greave1_02.png","equipments/greave1_04.png","equipments/gauntlet_02.png","equipments/gauntlet_01.png","equipments/gauntlet_03.png","equipments/helm4.png","equipments/helm5_02.png","equipments/helm5_04.png","equipments/helm6_01.png","equipments/helm1_01.png","equipments/helm3_03.png","equipments/katana.png","equipments/kukri2_02.png","equipments/ninjahood2_01.png","equipments/ninjatou_01.png","equipments/ninjaclothes_01.png","equipments/ninjasocks_01.png","equipments/gloves1_04.png","equipments/gloves1_01.png","equipments/gloves1_01.png","equipments/gloves2.png","equipments/ring2.png","equipments/shuriken1.png","equipments/sword12_01.png","equipments/sword05.png","equipments/treasure05_04.png","equipments/treasure07_02.png","equipments/weapon03_01.png","equipments/weapon04_03.png","equipments/weapon08_03.png","equipments/weapon11_01.png","equipments/weapon12_03.png","equipments/weapon15_03.png"],Items:["items/potion1_01.png","items/potion1_05.png","items/potion2_02.png","items/potion2_03.png","items/potion3_01.png","items/potion3_04.png","items/aphrodisiac_01.png","items/powder_04.png","items/testtube_02.png","items/testtube_04.png","items/testtube_05.png","items/supertesttube.png"],ItemList:["greatHpPotion","greatFpPotion","highHpPotion","highFpPotion","hpPotion","fpPotion","nectar","curePowder","attackUp","criticalUp","dvUp","aronBeta"],ItemNumberAndItemName:{item_1_number:"hpPotion",item_2_number:"highHpPotion",item_3_number:"greatHpPotion",item_4_number:"fpPotion",item_5_number:"highFpPotion",item_6_number:"greatFpPotion",item_7_number:"nectar",item_8_number:"curePowder",item_9_number:"dvUp",item_10_number:"attackUp",item_11_number:"criticalUp",item_12_number:"aronBeta"},VolumeBars:["ui/sound_option/volume_bar_0.png","ui/sound_option/volume_bar_1.png","ui/sound_option/volume_bar_2.png","ui/sound_option/volume_bar_3.png","ui/sound_option/volume_bar_4.png","ui/sound_option/volume_bar_5.png","ui/sound_option/volume_bar_6.png","ui/sound_option/volume_bar_7.png","ui/sound_option/volume_bar_8.png","ui/sound_option/volume_bar_9.png","ui/sound_option/volume_bar_10.png"],Audio:{Bgm:{TitleBgm:"audio/title_bgm.mp3",TalkBgm:"audio/talk_scene_bgm.mp3",BossBgm:"audio/boss_bgm.mp3"},Se:{ShowNextText:"audio/next_text.mp3",OptionTap:"audio/option_tap.mp3",OptionTap2:"audio/option_tap2.mp3",OptionTap3:"audio/option_tap3.mp3",Equip:"audio/equip.mp3",minus:"audio/minus.mp3",plus:"audio/plus.mp3",Hit:"audio/hit.mp3",Guard:"audio/guard.mp3",AllGuard:"audio/all_guard.mp3",HpRecover:"audio/hp_recover.mp3",FpRecover:"audio/fp_recover.mp3",FullRecover:"audio/full_recover.mp3",Cure:"audio/cure.mp3",StatusUp:"audio/status_up.mp3",NormalAttack:"audio/normal_attack.mp3",PlayerSkill2:"audio/player_skill_2.mp3",PlayerSkill3:"audio/player_skill_3.mp3",PlayerSkill4:"audio/player_skill_4.mp3",PlayerSkill6:"audio/player_skill_6.mp3",BossSkill_2:"audio/boss_skill_2.mp3",SpecialMove1:"audio/special_move_1.mp3",SpecialMove2:"audio/special_move_2.mp3",MagicTool1:"audio/magic_tool_1.mp3",MagicTool2:"audio/magic_tool_2.mp3",MagicTool3:"audio/magic_tool_3.mp3"}},FontFamily:{Default:"MPLUS1p-Regular"},MaxFrameIndex:function(t){var e=y.game.loader.resources[t];return e&&e.data&&e.data.frames?Object.keys(e.data.frames).length:-1}}),S=b;function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function w(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return _(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e=t.prototype;return e.createUiNode=function(t){return new s.W20},e.createUiNodeByGraphElement=function(t){var e=this.createUiNode(t.params);return e&&(e.name=t.id,e.position.set(t.position[0],t.position[1]),t.invisible&&(e.visible=!1),!0===t.interactive&&(e.interactive=!0),!0===t.buttonMode&&(e.buttonMode=!0)),e},e.attachUiEventByGraphElement=function(t,e,i){var n=!0,r=!1,o=void 0;try{for(var a,s=function(t,n){var r,o=n.value,a=i[o.callback];if(!a)return"continue";e.on(o.type,(function(){return(r=a).call.apply(r,[i].concat(w(o.arguments)))}))},u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0)s(0,a)}catch(c){r=!0,o=c}finally{try{n||null==u.return||u.return()}finally{if(r)throw o}}},t}();function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,e){return!e||"object"!==F(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function C(t){return function(t){if(Array.isArray(t))return P(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return P(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return P(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var F=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function E(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=x(t);if(e){var r=x(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return A(this,i)}}var k=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(i,t);var e=E(i);function i(){return T(this,i),e.apply(this,arguments)}return i.prototype.createUiNode=function(t){var e={};t&&(void 0!==t.family&&(e.fontFamily=t.family),void 0!==t.size&&(e.fontSize=t.size),void 0!==t.color&&(e.fill=t.color),void 0!==t.padding&&(e.padding=t.padding),void 0!==t.wordWrap&&(e.wordWrap=t.wordWrap),void 0!==t.wordWrapWidth&&(e.wordWrapWidth=t.wordWrapWidth));var i,n=new s.pn8(e),r=new s.xvT(t&&t.text?t.text:"",n);t&&void 0!==t.anchor&&(i=r.anchor).set.apply(i,C(t.anchor));return r},i}(O);function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q(t,e){return!e||"object"!==B(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function L(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return j(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return j(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var B=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function M(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=I(t);if(e){var r=I(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return q(this,i)}}var U=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(i,t);var e=M(i);function i(){return G(this,i),e.apply(this,arguments)}return i.prototype.createUiNode=function(t){var e=new s.jyi;if(t){var i,n,r=t.textureName;if(r&&s.P6Y.kN[r]&&(e.texture=s.P6Y.kN[r]),t.anchor)(i=e.anchor).set.apply(i,L(t.anchor));if(t.scale)(n=e.scale).set.apply(n,L(t.scale))}return e},i}(O);function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function W(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function K(t,e,i){return(K=H()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&z(r,i.prototype),r}).apply(null,arguments)}function V(t){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Y(t,e){return!e||"object"!==X(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function J(t){return function(t){if(Array.isArray(t))return N(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return N(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return N(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Z(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=V(t);if(e){var r=V(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Y(this,i)}}var $=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(i,t);var e=Z(i);function i(){return W(this,i),e.apply(this,arguments)}return i.prototype.createUiNode=function(t){var e;if(t){var i=t.textureName;i&&s.P6Y.kN[i]&&(e=t.perimeter?K(s.ZTM,[s.P6Y.kN[i]].concat(J(t.perimeter))):new s.ZTM(s.P6Y.kN[i])),t.scale&&e&&(e.width=t.scale[0],e.height=t.scale[1])}return e||null},i}(O);var Q=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.getFactory=function(e){if(!t.cashedFactory[e]){var i;switch(e){case"text":case"message":case"language_option_text":case"credit_text":i=k;break;case"language_option_sprite":case"credit_sprite":case"sprite":i=U;break;case"nine_slice":i=$}if(!i)return null;t.cashedFactory[e]=new i}return t.cashedFactory[e]},t}();function tt(t,e,i,n,r,o,a){try{var s=t[o](a),u=s.value}catch(c){return void i(c)}s.done?e(u):Promise.resolve(u).then(n,r)}function et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nt(t,e){return!e||"object"!==ot(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rt(t,e){return(rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Q.cashedFactory={};var ot=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function at(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=it(t);if(e){var r=it(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return nt(this,i)}}var st=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rt(t,e)}(i,t);var e=at(i);function i(){var t;return et(this,i),(t=e.apply(this,arguments)).transitionIn=new g(1,0,-.02),t.transitionOut=new g(0,1,.02),t.objectsToUpdate=[],t.elapsedFrameCount=0,t.uiGraphContainer=new s.W20,t.uiGraph=new Map,t.isOver=!1,t}var n=i.prototype;return n.update=function(t){this.elapsedFrameCount++,this.updateRegisteredObjects(t),this.transitionIn.isActive()?this.transitionIn.update(t):this.transitionOut.isActive()&&this.transitionOut.update(t)},n.registerUpdatingObject=function(t){this.objectsToUpdate.push(t)},n.updateRegisteredObjects=function(t){var e=[],i=!0,n=!1,r=void 0;try{for(var o,a=this.objectsToUpdate[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;s&&!s.isDestroyed()&&(s.update(t),e.push(s))}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}this.objectsToUpdate=e},n.beginTransitionIn=function(t,e){this.transitionIn.setCallback((function(){return t()}));var i=this.transitionIn.getContainer();i&&this.addChild(i),this.transitionIn.begin(e)},n.beginTransitionOut=function(t,e){this.transitionOut.setCallback((function(){return t()}));var i=this.transitionOut.getContainer();i&&this.addChild(i),this.transitionOut.begin(e)},n.createInitialResourceList=function(){return[]},n.beginLoadResource=function(t){var e,i=this;return(e=v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(t){i.loadInitialResource((function(){return t(null)}))}));case 2:return e.next=4,new Promise((function(t){var e=i.onInitialResourceLoaded();i.loadAdditionalResource(e,(function(){return t(null)}))}));case 4:i.onResourceLoaded(),t();case 6:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var o=e.apply(t,i);function a(t){tt(o,n,r,a,s,"next",t)}function s(t){tt(o,n,r,a,s,"throw",t)}a(void 0)}))})()},n.loadInitialResource=function(t){var e=this.createInitialResourceList(),i=S.UI.SceneUiGraph(this.sceneName);e.push(i);var n=this.filterLoadedAssets(e);n.length>0?y.game.loader.add(n).load(t):t()},n.onInitialResourceLoaded=function(){var t=[],e=S.UI.SceneUiGraph(this.sceneName),i=y.game.loader.resources[e],n=!0,r=!1,o=void 0;try{for(var a,s=i.data.nodes[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;"sprite"!==u.type&&"sprite_option"!==u.type&&"language_option_sprite"!==u.type&&"credit_sprite"!==u.type&&"nine_slice"!==u.type||t.push({name:u.params.textureName,url:u.params.url})}}catch(c){r=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return t},n.loadAdditionalResource=function(t,e){y.game.loader.add(this.filterLoadedAssets(t)).load(e)},n.onResourceLoaded=function(){var t=S.UI.SceneUiGraph(this.sceneName),e=y.game.loader.resources[t].data;this.prepareUiGraphContainer(e)},n.filterLoadedAssets=function(t){var e=new Map,i=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;"string"===typeof s?y.game.loader.resources[s]||e.has(s)||e.set(s,{name:s,url:s}):y.game.loader.resources[s.name]||e.has(s.name)||e.set(s.name,s)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}return Array.from(e.values())},n.prepareUiGraphContainer=function(t){var e=!0,i=!1,n=void 0;try{for(var r,o=t.nodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=Q.getFactory(a.type)||this.getCustomUiGraphFactory(a.type);if(s){var u=s.createUiNodeByGraphElement(a);u&&(a.events&&s.attachUiEventByGraphElement(a.events,u,this),this.uiGraph.set(a.id,u),this.uiGraphContainer.addChild(u))}}}catch(c){i=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}},n.getCustomUiGraphFactory=function(t){return null},n.destroySound=function(){var t=y.game.loader.resources,e=Object.keys(t),i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;t[s].buffer&&d.destroySound(s)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}},i}(s.W20);function ut(t,e,i){return(ut="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ct(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lt(t,e){return!e||"object"!==ht(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pt(t,e){return(pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ht=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function ft(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ct(t);if(e){var r=ct(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return lt(this,i)}}var dt=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pt(t,e)}(i,t);var e=ft(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).sceneName="option_scene",n.language=t,n.transitionIn=new g(1,0,-.02),n.transitionOut=new g(0,1,.02),n}var n=i.prototype;return n.onResourceLoaded=function(){ut(ct(i.prototype),"onResourceLoaded",this).call(this),this.initVolumeGraph(),this.initLanguageButton(),this.addChild(this.uiGraphContainer)},n.createInitialResourceList=function(){return ut(ct(i.prototype),"createInitialResourceList",this).call(this).concat(S.VolumeBars)},n.initLanguageButton=function(){var t=this.uiGraph.get("japanese"),e=this.uiGraph.get("japanese_2"),i=this.uiGraph.get("english"),n=this.uiGraph.get("english_2");t&&e&&i&&n&&("japanese"===this.language?(t.visible=!0,e.visible=!1,i.visible=!1,n.visible=!0):(t.visible=!1,e.visible=!0,i.visible=!0,n.visible=!1))},n.onLanguageSelected=function(t){d.playSe(S.Audio.Se.OptionTap3);var e=this.uiGraph.get("japanese"),i=this.uiGraph.get("japanese_2"),n=this.uiGraph.get("english"),r=this.uiGraph.get("english_2");e&&i&&n&&r&&("japanese"===t?(e.visible=!0,i.visible=!1,n.visible=!1,r.visible=!0):(e.visible=!1,i.visible=!0,n.visible=!0,r.visible=!1),this.saveLanguageToDB(t))},n.initVolumeGraph=function(){var t=Math.round(100*d.bgmVolume),e=Math.round(10*d.seVolume),i=this.uiGraph.get("bgm_volume_bar"),n=this.uiGraph.get("se_volume_bar"),r=s.P6Y.kN["ui/sound_option/volume_bar_".concat(t.toString(),".png")],o=s.P6Y.kN["ui/sound_option/volume_bar_".concat(e.toString(),".png")];i&&n&&(i.texture=r,n.texture=o)},n.showTitleScene=function(){this.transitionIn.isActive()||this.transitionOut.isActive()||(d.playSe(S.Audio.Se.OptionTap2),y.loadScene(new eo))},n.onBgmArrowDown=function(t){var e=d.bgmVolume;if(t<0&&0!==e||t>0&&.1!==e){var i="ui/sound_option/volume_bar_".concat(Math.round(100*e+100*t).toString(),".png"),n=s.P6Y.kN[i],r=this.uiGraph.get("bgm_volume_bar");if(!r)return;r.texture=n}(e+=t)<.001?e=0:e>.0999&&(e=.1),d.bgmVolume=e,d.playSe(S.Audio.Se.OptionTap),this.saveBgmVolumeToDB(d.bgmVolume),d.setAllSoundVolume(d.bgmVolume,d.seVolume)},n.onSeArrowDown=function(t){var e=d.seVolume;if(t<0&&0!==e||t>0&&1!==e){var i="ui/sound_option/volume_bar_".concat(Math.round(10*e+10*t).toString(),".png"),n=s.P6Y.kN[i],r=this.uiGraph.get("se_volume_bar");if(!r)return;r.texture=n}(e+=t)<.001?e=0:e>.999&&(e=1),d.seVolume=e,d.playSe(S.Audio.Se.OptionTap),this.saveSeVolumeToDB(d.seVolume)},n.saveLanguageToDB=function(t){h.put("language",t)},n.saveBgmVolumeToDB=function(t){h.put("bgmVolume",t)},n.saveSeVolumeToDB=function(t){h.put("seVolume",t)},i}(st);function yt(t,e,i){return(yt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mt(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vt(t,e){return!e||"object"!==bt(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gt(t,e){return(gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bt=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function St(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=mt(t);if(e){var r=mt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return vt(this,i)}}var _t=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gt(t,e)}(i,t);var e=St(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=e.call(this)).creditContainer=new s.W20,t.currentPage=0,t.sceneName="credit_scene",t.transitionIn=new g(1,0,-.02),t.transitionOut=new g(0,1,.02),t}var n=i.prototype;return n.onResourceLoaded=function(){yt(mt(i.prototype),"onResourceLoaded",this).call(this),this.addChild(this.uiGraphContainer),this.addChild(this.creditContainer)},n.changePage=function(t){d.playSe(S.Audio.Se.OptionTap),this.currentPage=this.currentPage+t,this.currentPage<-2?this.currentPage=0:this.currentPage>0&&(this.currentPage=-2),this.creditContainer.position.x=640*this.currentPage},n.showTitleScene=function(){this.transitionIn.isActive()||this.transitionOut.isActive()||(d.playSe(S.Audio.Se.OptionTap2),y.loadScene(new eo))},n.prepareUiGraphContainer=function(t){var e=!0,i=!1,n=void 0;try{for(var r,o=t.nodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=Q.getFactory(a.type)||this.getCustomUiGraphFactory(a.type);if(s){var u=s.createUiNodeByGraphElement(a);u&&(a.events&&s.attachUiEventByGraphElement(a.events,u,this),this.uiGraph.set(a.id,u),"credit_text"===a.type||"credit_sprite"===a.type?this.creditContainer.addChild(u):this.uiGraphContainer.addChild(u))}}}catch(c){i=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}},i}(st);function wt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pt(t,e){return!e||"object"!==xt(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tt(t,e){return(Tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xt=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function At(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Ot(t);if(e){var r=Ot(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Pt(this,i)}}var Rt=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tt(t,e)}(i,t);var e=At(i);function i(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(o=e.call(this)).currentTextIndex=0,o.delegate=r,o.texts=t,o.initWindow(n),o}var n,r,o,a=i.prototype;return a.initWindow=function(t){var e=this,n=s.P6Y.kN[S.UI.MessageWindow];this.window=new s.jyi(n),this.window.interactive=!0,this.window.on("pointertap",(function(){e.showNextText()})),this.window.scale.set((y.game.view.width-20)/this.window.width,y.game.view.height/4/this.window.height),this.window.anchor.set(.5,.5),this.window.position.set(y.game.view.width/2,y.game.view.height-this.window.height/2-20),this.windowScaleX=this.window.scale.x,this.windowScaleY=this.window.scale.y,this.windowSizeUpRateX=this.windowScaleX/i.WindowSizeUpFrame,this.windowSizeUpRateY=this.windowScaleY/i.WindowSizeUpFrame,this.window.scale.set(0,0),this.window.addChild(t),this.window.addChild(this.texts[0]),this.window.buttonMode=!0,this.addChild(this.window)},a.isDestroyed=function(){return this._destroyed},a.update=function(t){this.isDestroyed()||this.window.scale.x===this.windowScaleX&&this.window.scale.y===this.windowScaleY||(this.window.scale.set(this.window.scale.x+this.windowSizeUpRateX,this.window.scale.y+this.windowSizeUpRateY),this.window.scale.x>=this.windowScaleX&&(this.window.scale.x=this.windowScaleX),this.window.scale.y>=this.windowScaleY&&(this.window.scale.y=this.windowScaleY))},a.showNextText=function(){if(d.playSe(S.Audio.Se.ShowNextText),this.window.interactive=!0,this.currentTextIndex!==this.texts.length-1){this.texts[this.currentTextIndex].visible=!1;var t=this.texts[++this.currentTextIndex];this.window.addChild(t)}else{this.delegate.onMessageWindowClosed();var e=!0,i=!1,n=void 0;try{for(var r,o=this.texts[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){r.value.visible=!0}}catch(a){i=!0,n=a}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}this.destroy()}},a.addText=function(t,e){this.texts.splice(this.currentTextIndex+e,0,t)},n=i,o=[{key:"resourceList",get:function(){return[S.UI.MessageWindow]}}],(r=null)&&wt(n.prototype,r),o&&wt(n,o),i}(s.W20);Rt.WindowSizeUpFrame=10;var Ct=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.weapon=0,this.head=0,this.body=0,this.arm=0,this.foot=0};var Ft=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hp=800,this.fp=500,this.atk=1,this.def=1,this.dv=1,this.hit=1,this.crit=1,this.state=1,this.cp=3700};var Et=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hp=15e3,this.fp=1,this.atk=1,this.def=1,this.dv=1,this.hit=1,this.crit=1},kt=Object.freeze({GreatHpPotion:"greatHpPotion",GreatFpPotion:"greatFpPotion",HighHpPotion:"highHpPotion",HighFpPotion:"highFpPotion",HpPotion:"hpPotion",FpPotion:"fpPotion",Nectar:"nectar",CurePowder:"curePowder",AttackUp:"attackUp",CriticalUp:"criticalUp",AronBeta:"aronBeta",DvUp:"dvUp"}),jt=Object.freeze({SKILL_1:1,SKILL_2:2,SKILL_3:3,SKILL_4:4,SKILL_5:5,SKILL_6:6}),Gt=Object.freeze({IDLE:1,GUARD:2}),It=Object.freeze({NORMAL_ATTACK:1,GUARD:2,SKILL_1:3,SKILL_2:4,SKILL_3:5,MAGIC_TOOL_1:6,MAGIC_TOOL_2:7,MAGIC_TOOL_3:8,AVOID:9,SPECIAL_MOVE:10}),qt=Object.freeze({SWORD_VERTICAL:1,SWORD_HORIZON:2,SWORD_UP:3,SWORD_CROSS:4,SWORD_DOWN:5,LOW_POSTURE:6,RIGHT_FOOT_FORWARD:7,LEFT_FOOT_FORWARD:8,RIGHT_HAND_FORWARD:9,LEFT_HAND_FORWARD:10});var Dt=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bossStatus=new Et,this.bossAction=1,this.bossState=1,this.playerHitDown=0,this.playerDefenseDown=0,this.playerAttackUp=0,this.playerCriticalUp=0,this.playerDvUp=0,this.playerDamageCut=0,this.playerDamageAdd=0,this.bossFlinched=!1,this.isUsingSkill6=!1,this.isUsingAronBeta=!1,this.turn=1,this.delegator=e,this.playerStatus=i,this.maxPlayerHp=i.hp,this.maxPlayerFp=i.fp,this.setPlayerDamageRate()}var e=t.prototype;return e.onAttackButtonTapped=function(){var t=this.calcuBossDamage();this.bossAction===It.GUARD&&(t=Math.round(t/2));var e=this.playerAttackCritical(0);e&&(t=Math.round(1.5*t)),this.playerAttackHitted(0)?(this.bossStatus.hp-=t,this.delegator.onBossHpChanged(this.bossStatus.hp),this.delegator.onBossDamaged(t,e,this.bossStatus.hp,this.turn)):this.delegator.onPlayerAttackMissed()},e.onGuardButtonTapped=function(){this.playerStatus.state=Gt.GUARD},e.bossTurn=function(){this.turn+=1,this.delegator.onTurnAdded(this.turn),0!==this.playerHitDown&&(this.playerHitDown-=1);var t=!1;0!==this.playerDefenseDown&&(this.playerDefenseDown-=1,t=!0),0!==this.playerAttackUp&&(this.playerAttackUp-=1),0!==this.playerCriticalUp&&(this.playerCriticalUp-=1);var e=!1;if(0!==this.playerDvUp&&(this.playerDvUp-=1,e=!0),this.bossAction===It.GUARD)return this.bossFlinched=!1,this.isUsingAronBeta=!1,this.playerStatus.state=Gt.IDLE,this.decideBossState(),this.decideBossAction(),void this.delegator.onBossGuarded(this.bossState,this.playerHitDown,this.playerDefenseDown,this.isUsingSkill6,this.playerAttackUp,this.playerCriticalUp,this.playerDvUp);if(this.bossAction===It.AVOID)return this.isUsingAronBeta=!1,this.playerStatus.state=Gt.IDLE,this.decideBossState(),this.decideBossAction(),void this.delegator.onBossAvoided(this.bossState,this.playerHitDown,this.playerDefenseDown,this.isUsingSkill6,this.playerAttackUp,this.playerCriticalUp,this.playerDvUp);if(!0===this.bossFlinched)return this.isUsingAronBeta=!1,this.bossFlinched=!1,this.decideBossState(),this.decideBossAction(),void this.delegator.onBossFlinched(this.bossState,this.playerHitDown,this.playerDefenseDown,this.isUsingSkill6,this.playerAttackUp,this.playerCriticalUp,this.playerDvUp);var i=this.calcuPlayerDamage();this.isUsingAronBeta=!1,this.playerStatus.state===Gt.GUARD&&(i=Math.round(i/2),this.playerStatus.state=Gt.IDLE);var n=this.bossAttackCritical(this.bossAction);if(n&&(i=Math.round(1.5*i)),t&&(i=Math.round(2*i)),this.bossAttackHitted(this.bossAction,e)){this.bossAction===It.MAGIC_TOOL_1&&(this.playerHitDown=2),this.bossAction===It.MAGIC_TOOL_2&&(this.playerDefenseDown=2);var r=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp-=i,this.delegator.onPlayerHpChanged(this.playerStatus.hp);var o=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp<=0&&(o=0),this.decideBossState(),this.delegator.onPlayerDamaged(i,r,o,this.bossState,this.bossAction,this.playerHitDown,this.playerDefenseDown,n,this.isUsingSkill6,this.playerAttackUp,this.playerCriticalUp,this.playerDvUp,this.turn,this.bossStatus.hp),this.decideBossAction()}else this.decideBossState(),this.delegator.onBossAttackMissed(this.bossState,this.bossAction,this.playerHitDown,this.playerDefenseDown,this.isUsingSkill6,this.playerAttackUp,this.playerCriticalUp,this.playerDvUp),this.decideBossAction()},e.onItemUsed=function(t){if(t===kt.GreatHpPotion){var e=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp+=1e3;var i=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp>this.maxPlayerHp&&(this.playerStatus.hp=this.maxPlayerHp,i=1),this.delegator.onPlayerHpRecovered(1e3,e,i),this.delegator.onPlayerHpChanged(this.playerStatus.hp)}if(t===kt.HighHpPotion){var n=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp+=500;var r=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp>this.maxPlayerHp&&(this.playerStatus.hp=this.maxPlayerHp,r=1),this.delegator.onPlayerHpRecovered(500,n,r),this.delegator.onPlayerHpChanged(this.playerStatus.hp)}if(t===kt.HpPotion){var o=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp+=300;var a=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp>this.maxPlayerHp&&(this.playerStatus.hp=this.maxPlayerHp,a=1),this.delegator.onPlayerHpRecovered(300,o,a),this.delegator.onPlayerHpChanged(this.playerStatus.hp)}if(t===kt.GreatFpPotion){var s=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp+=800;var u=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp>this.maxPlayerFp&&(this.playerStatus.fp=this.maxPlayerFp,u=1),this.delegator.onPlayerFpRecovered(800,s,u),this.delegator.onPlayerFpChanged(this.playerStatus.fp)}if(t===kt.HighFpPotion){var c=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp+=400;var l=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp>this.maxPlayerFp&&(this.playerStatus.fp=this.maxPlayerFp,l=1),this.delegator.onPlayerFpRecovered(400,c,l),this.delegator.onPlayerFpChanged(this.playerStatus.fp)}if(t===kt.FpPotion){var p=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp+=250;var h=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp>this.maxPlayerFp&&(this.playerStatus.fp=this.maxPlayerFp,h=1),this.delegator.onPlayerFpRecovered(250,p,h),this.delegator.onPlayerFpChanged(this.playerStatus.fp)}if(t===kt.Nectar){var f=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp+=1500;var d=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp>this.maxPlayerHp&&(this.playerStatus.hp=this.maxPlayerHp,d=1);var y=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp+=1500;var m=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp>this.maxPlayerFp&&(this.playerStatus.fp=this.maxPlayerFp,m=1),this.playerDefenseDown=0,this.playerHitDown=0,this.delegator.onPlayerFullRecovered(f,d,y,m),this.delegator.onPlayerHpChanged(this.playerStatus.hp),this.delegator.onPlayerFpChanged(this.playerStatus.fp)}t===kt.CurePowder&&(this.playerDefenseDown=0,this.playerHitDown=0,this.delegator.onPlayerCured()),t===kt.AttackUp&&(this.playerAttackUp=4,this.delegator.onPlayerAttackUpped()),t===kt.CriticalUp&&(this.playerCriticalUp=4,this.delegator.onPlayerCriticalUpped()),t===kt.DvUp&&(this.playerDvUp=4,this.delegator.onPlayerDvUpped()),t===kt.AronBeta&&(this.isUsingAronBeta=!0,this.delegator.onAronBetaUsed())},e.onSkillUsed=function(t){if(t===jt.SKILL_1){var e=Math.round(1.2*this.calcuBossDamage());this.playerStatus.fp<200&&(e=Math.round(e/4)),this.bossAction===It.GUARD&&(e=Math.round(e/2));var i=this.playerAttackCritical(t);i&&(e=Math.round(1.5*e)),this.playerAttackHitted(t)?(this.bossStatus.hp-=e,this.delegator.onBossHpChanged(this.bossStatus.hp),this.delegator.onBossDamaged(e,i,this.bossStatus.hp,this.turn)):this.delegator.onPlayerAttackMissed();var n=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp-=200;var r=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp<=0&&(this.playerStatus.fp=0,r=0),this.delegator.onPlayerFpChanged(this.playerStatus.fp),this.delegator.onPlayerFpDecreased(n,r)}if(t===jt.SKILL_2){var o=Math.round(1.4*this.calcuBossDamage());this.playerStatus.fp<340&&(o=Math.round(o/4)),this.bossAction===It.GUARD&&(o=Math.round(o/2));var a=this.playerAttackCritical(t);if(a&&(o=Math.round(1.5*o)),this.playerAttackHitted(t))Math.random()<=.3&&(this.bossFlinched=!0),this.bossStatus.hp-=o,this.delegator.onBossHpChanged(this.bossStatus.hp),this.delegator.onBossDamaged(o,a,this.bossStatus.hp,this.turn);else this.delegator.onPlayerAttackMissed();var s=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp-=340;var u=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp<=0&&(this.playerStatus.fp=0,u=0),this.delegator.onPlayerFpChanged(this.playerStatus.fp),this.delegator.onPlayerFpDecreased(s,u)}if(t===jt.SKILL_3){var c=2*this.calcuBossDamage();this.playerStatus.fp<450&&(c=Math.round(c/4)),this.bossAction===It.GUARD&&(c=Math.round(c/2));var l=this.playerAttackCritical(t);l&&(c=Math.round(1.5*c)),this.playerAttackHitted(t)?(this.bossStatus.hp-=c,this.delegator.onBossHpChanged(this.bossStatus.hp),this.delegator.onBossDamaged(c,l,this.bossStatus.hp,this.turn)):this.delegator.onPlayerAttackMissed();var p=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp-=450;var h=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp<=0&&(this.playerStatus.fp=0,h=0),this.delegator.onPlayerFpChanged(this.playerStatus.fp),this.delegator.onPlayerFpDecreased(p,h)}if(t===jt.SKILL_4){var f=Math.round(1.2*this.calcuBossDamage());this.playerStatus.fp<200&&(f=Math.round(f/4));var d=this.playerAttackCritical(t);this.bossAction===It.GUARD&&(d=!0),d&&(f=Math.round(1.7*f)),this.playerAttackHitted(t)?(this.bossStatus.hp-=f,this.delegator.onBossHpChanged(this.bossStatus.hp),this.delegator.onBossDamaged(f,d,this.bossStatus.hp,this.turn)):this.delegator.onPlayerAttackMissed();var y=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp-=200;var m=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp<=0&&(this.playerStatus.fp=0,m=0),this.delegator.onPlayerFpChanged(this.playerStatus.fp),this.delegator.onPlayerFpDecreased(y,m)}if(t===jt.SKILL_5){var v=Math.round(1.3*this.calcuBossDamage());this.playerStatus.fp<250&&(v=Math.round(v/4)),this.bossAction===It.GUARD&&(v=Math.round(v/2));var g=this.playerAttackCritical(t);this.bossAction===It.AVOID&&(g=!0),g&&(v=Math.round(1.5*v)),this.playerAttackHitted(t)?(this.bossStatus.hp-=v,this.delegator.onBossHpChanged(this.bossStatus.hp),this.delegator.onBossDamaged(v,g,this.bossStatus.hp,this.turn)):this.delegator.onPlayerAttackMissed();var b=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp-=250;var S=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp<=0&&(this.playerStatus.fp=0,S=0),this.delegator.onPlayerFpChanged(this.playerStatus.fp),this.delegator.onPlayerFpDecreased(b,S)}if(t!==jt.SKILL_6||this.isUsingSkill6){if(t===jt.SKILL_6&&this.isUsingSkill6){this.isUsingSkill6=!1;var _=Math.round(2.5*this.calcuBossDamage());this.playerStatus.fp<250&&(_=Math.round(_/4)),this.bossAction===It.GUARD&&(_=Math.round(_/2));var w=this.playerAttackCritical(t);w&&(_=Math.round(1.5*_)),this.playerAttackHitted(t)?(this.bossStatus.hp-=_,this.delegator.onBossHpChanged(this.bossStatus.hp),this.delegator.onBossDamaged(_,w,this.bossStatus.hp,this.turn)):this.delegator.onPlayerAttackMissed();var O=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp-=250;var P=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp<=0&&(this.playerStatus.fp=0,P=0),this.delegator.onPlayerFpChanged(this.playerStatus.fp),this.delegator.onPlayerFpDecreased(O,P)}}else this.isUsingSkill6=!0,this.delegator.onSkill6Used()},e.calcuPlayerDamage=function(){return this.isUsingAronBeta?0:this.bossAction===It.NORMAL_ATTACK?Math.floor((101*Math.random()+100)*this.playerDamageCut):this.bossAction===It.SKILL_1?Math.floor((201*Math.random()+100)*this.playerDamageCut):this.bossAction===It.SKILL_2?Math.floor((201*Math.random()+200)*this.playerDamageCut):this.bossAction===It.SKILL_3?Math.floor((201*Math.random()+300)*this.playerDamageCut):this.bossAction===It.MAGIC_TOOL_1?Math.floor((51*Math.random()+250)*this.playerDamageCut):this.bossAction===It.MAGIC_TOOL_2?Math.floor((51*Math.random()+150)*this.playerDamageCut):this.bossAction===It.MAGIC_TOOL_3?Math.floor((101*Math.random()+400)*this.playerDamageCut):this.bossAction===It.SPECIAL_MOVE?Math.floor((201*Math.random()+500)*this.playerDamageCut):0},e.calcuBossDamage=function(){return this.playerAttackUp?Math.floor((41*Math.random()+140)*this.playerDamageAdd):Math.floor((51*Math.random()+100)*this.playerDamageAdd)},e.bossAttackHitted=function(t,e){var i=0;return t===It.NORMAL_ATTACK?i=1:t===It.SKILL_1||t===It.SKILL_2||t===It.SKILL_3?i=.95:t===It.MAGIC_TOOL_1?i=.85:t===It.MAGIC_TOOL_2?i=.9:(t===It.MAGIC_TOOL_3||t===It.SPECIAL_MOVE)&&(i=.95),i-=.02*this.playerStatus.dv,1===this.playerStatus.dv?i-=.02:2===this.playerStatus.dv?i-=.04:3===this.playerStatus.dv?i-=.06:4===this.playerStatus.dv?i-=.08:5===this.playerStatus.dv?i-=.1:6===this.playerStatus.dv?i-=.12:7===this.playerStatus.dv?i-=.15:8===this.playerStatus.dv?i-=.2:9===this.playerStatus.dv?i-=.25:10===this.playerStatus.dv&&(i-=.3),e&&(i-=.5),Math.random()<=i},e.playerAttackHitted=function(t){if(this.bossAction===It.AVOID&&t!==jt.SKILL_5)return!1;var e=0;return 0===t?e=.5:t===jt.SKILL_1||t===jt.SKILL_2||t===jt.SKILL_3||t===jt.SKILL_4?e=.45:t===jt.SKILL_5?e=1.05:t===jt.SKILL_6&&(e=.55),1===this.playerStatus.hit?e+=.2:2===this.playerStatus.hit?e+=.25:3===this.playerStatus.hit?e+=.3:4===this.playerStatus.hit?e+=.35:5===this.playerStatus.hit?e+=.4:6===this.playerStatus.hit?e+=.45:7===this.playerStatus.hit?e+=.5:8===this.playerStatus.hit?e+=1:9===this.playerStatus.hit?e+=1.2:10===this.playerStatus.hit&&(e+=1.45),this.playerHitDown&&(e/=2),Math.random()<=e},e.playerAttackCritical=function(t){var e=0;return 0===t?(e=.15,e+=.04*this.playerStatus.crit):t===jt.SKILL_1?(e=.3,e+=.06*this.playerStatus.crit):t===jt.SKILL_2?(e=.05,e+=.04*this.playerStatus.crit):t===jt.SKILL_3?(e=.1,e+=.08*this.playerStatus.crit):(t===jt.SKILL_4||t===jt.SKILL_5||t===jt.SKILL_6)&&(e=.05,e+=.04*this.playerStatus.crit),this.playerCriticalUp&&(e+=.5),Math.random()<=e},e.bossAttackCritical=function(t){var e=0;return t===It.NORMAL_ATTACK?e=.15:t===It.SKILL_1?e=.2:t===It.SKILL_2||t===It.SKILL_3?e=.15:t===It.SPECIAL_MOVE&&(e=.3),Math.random()<e},e.decideBossState=function(){if(10500<=this.bossStatus.hp){var t=[qt.SWORD_VERTICAL,qt.SWORD_HORIZON,qt.SWORD_UP,qt.SWORD_CROSS,qt.SWORD_DOWN,qt.RIGHT_FOOT_FORWARD,qt.LEFT_FOOT_FORWARD,qt.RIGHT_HAND_FORWARD,qt.LEFT_HAND_FORWARD],e=Math.random();e>=.8?this.bossState=t[0]:e>=.6&&e<.8?this.bossState=t[1]:e>=.4&&e<.6?this.bossState=t[2]:e>=.25&&e<.4?this.bossState=t[3]:e>=.2&&e<.25?this.bossState=t[4]:e>=.15&&e<.2?this.bossState=t[5]:e>=.1&&e<.15?this.bossState=t[6]:e>=.05&&e<.1?this.bossState=t[7]:e>=0&&e<.05&&(this.bossState=t[8])}else if(6e3<=this.bossStatus.hp&&this.bossStatus.hp<10500){var i=[qt.SWORD_VERTICAL,qt.SWORD_HORIZON,qt.SWORD_UP,qt.SWORD_CROSS,qt.SWORD_DOWN,qt.RIGHT_FOOT_FORWARD,qt.LEFT_FOOT_FORWARD,qt.RIGHT_HAND_FORWARD,qt.LEFT_HAND_FORWARD],n=Math.random();n>=.85?this.bossState=i[0]:n>=.7&&n<.85?this.bossState=i[1]:n>=.55&&n<.7?this.bossState=i[2]:n>=.45&&n<.55?this.bossState=i[3]:n>=.4&&n<.45?this.bossState=i[4]:n>=.3&&n<.4?this.bossState=i[5]:n>=.2&&n<.3?this.bossState=i[6]:n>=.1&&n<.2?this.bossState=i[7]:n>=0&&n<.1&&(this.bossState=i[8])}else if(3e3<=this.bossStatus.hp&&this.bossStatus.hp<6e3){var r=[qt.SWORD_VERTICAL,qt.SWORD_HORIZON,qt.SWORD_UP,qt.SWORD_CROSS,qt.SWORD_DOWN,qt.RIGHT_FOOT_FORWARD,qt.LEFT_FOOT_FORWARD,qt.RIGHT_HAND_FORWARD,qt.LEFT_HAND_FORWARD],o=Math.random();o>=.95?this.bossState=r[0]:o>=.9&&o<.95?this.bossState=r[1]:o>=.75&&o<.9?this.bossState=r[2]:o>=.6&&o<.75?this.bossState=r[3]:o>=.5&&o<.6?this.bossState=r[4]:o>=.4&&o<.5?this.bossState=r[5]:o>=.3&&o<.4?this.bossState=r[6]:o>=.15&&o<.3?this.bossState=r[7]:o>=0&&o<.15&&(this.bossState=r[8])}else if(1<=this.bossStatus.hp&&this.bossStatus.hp<3e3){var a=[qt.SWORD_VERTICAL,qt.SWORD_HORIZON,qt.SWORD_UP,qt.SWORD_CROSS,qt.SWORD_DOWN,qt.RIGHT_FOOT_FORWARD,qt.LEFT_FOOT_FORWARD,qt.RIGHT_HAND_FORWARD,qt.LEFT_HAND_FORWARD,qt.LOW_POSTURE],s=Math.random();s>=.95?this.bossState=a[0]:s>=.9&&s<.95?this.bossState=a[1]:s>=.8&&s<.9?this.bossState=a[2]:s>=.7&&s<.8?this.bossState=a[3]:s>=.6&&s<.7?this.bossState=a[4]:s>=.5&&s<.6?this.bossState=a[5]:s>=.4&&s<.5?this.bossState=a[6]:s>=.3&&s<.4?this.bossState=a[7]:s>=.2&&s<.3?this.bossState=a[8]:s>=0&&s<.2&&(this.bossState=a[9])}},e.decideBossAction=function(){if(this.bossState===qt.SWORD_VERTICAL){var t=[It.NORMAL_ATTACK,It.SKILL_1,It.SKILL_2,It.GUARD],e=Math.random();e>=.3?this.bossAction=t[0]:e>=.2&&e<.3?this.bossAction=t[1]:e>=.1&&e<.2?this.bossAction=t[2]:e>=0&&e<.1&&(this.bossAction=t[3])}if(this.bossState===qt.SWORD_HORIZON){var i=[It.NORMAL_ATTACK,It.SKILL_1,It.GUARD,It.AVOID],n=Math.random();n>=.5?this.bossAction=i[0]:n>=.3&&n<.5?this.bossAction=i[1]:n>=.15&&n<.3?this.bossAction=i[2]:n>=0&&n<.15&&(this.bossAction=i[3])}if(this.bossState===qt.SWORD_DOWN){var r=[It.AVOID,It.SKILL_1,It.NORMAL_ATTACK,It.MAGIC_TOOL_2],o=Math.random();o>=.5?this.bossAction=r[0]:o>=.4&&o<.5?this.bossAction=r[1]:o>=.2&&o<.4?this.bossAction=r[2]:o>=0&&o<.2&&(this.bossAction=r[3])}if(this.bossState===qt.SWORD_CROSS){var a=[It.SKILL_3,It.SKILL_2,It.NORMAL_ATTACK],s=Math.random();s>=.5?this.bossAction=a[0]:s>=.25&&s<.5?this.bossAction=a[1]:s>=0&&s<.25&&(this.bossAction=a[2])}if(this.bossState===qt.SWORD_UP){var u=[It.SKILL_2,It.SKILL_3,It.NORMAL_ATTACK,It.GUARD],c=Math.random();c>=.5?this.bossAction=u[0]:c>=.3&&c<.5?this.bossAction=u[1]:c>=.15&&c<.3?this.bossAction=u[2]:c>=0&&c<.15&&(this.bossAction=u[3])}if(this.bossState===qt.LOW_POSTURE){var l=[It.SKILL_2,It.SKILL_3,It.SPECIAL_MOVE],p=Math.random();p>=.8?this.bossAction=l[0]:p>=.5&&p<.8?this.bossAction=l[1]:p>=0&&p<.5&&(this.bossAction=l[2])}if(this.bossState===qt.RIGHT_HAND_FORWARD){var h=[It.MAGIC_TOOL_1,It.MAGIC_TOOL_2,It.NORMAL_ATTACK,It.GUARD],f=Math.random();f>=.6?this.bossAction=h[0]:f>=.3&&f<.6?this.bossAction=h[1]:f>=.15&&f<.3?this.bossAction=h[2]:f>=0&&f<.15&&(this.bossAction=h[3])}if(this.bossState===qt.LEFT_HAND_FORWARD){var d=[It.MAGIC_TOOL_1,It.MAGIC_TOOL_3,It.NORMAL_ATTACK,It.GUARD],y=Math.random();y>=.8?this.bossAction=d[0]:y>=.3&&y<.8?this.bossAction=d[1]:y>=.15&&y<.3?this.bossAction=d[2]:y>=0&&y<.15&&(this.bossAction=d[3])}if(this.bossState===qt.RIGHT_FOOT_FORWARD){var m=[It.GUARD,It.NORMAL_ATTACK,It.MAGIC_TOOL_1,It.SKILL_2],v=Math.random();v>=.5?this.bossAction=m[0]:v>=.3&&v<.5?this.bossAction=m[1]:v>=.1&&v<.3?this.bossAction=m[2]:v>=0&&v<.1&&(this.bossAction=m[3])}if(this.bossState===qt.LEFT_FOOT_FORWARD){var g=[It.GUARD,It.AVOID,It.MAGIC_TOOL_2,It.SKILL_3],b=Math.random();b>=.7?this.bossAction=g[0]:b>=.4&&b<.7?this.bossAction=g[1]:b>=.2&&b<.4?this.bossAction=g[2]:b>=0&&b<.2&&(this.bossAction=g[3])}},e.setPlayerDamageRate=function(){1===this.playerStatus.def?this.playerDamageCut=1:2===this.playerStatus.def?this.playerDamageCut=.96:3===this.playerStatus.def?this.playerDamageCut=.91:4===this.playerStatus.def?this.playerDamageCut=.86:5===this.playerStatus.def?this.playerDamageCut=.81:6===this.playerStatus.def?this.playerDamageCut=.78:7===this.playerStatus.def?this.playerDamageCut=.75:8===this.playerStatus.def?this.playerDamageCut=.73:9===this.playerStatus.def?this.playerDamageCut=.71:10===this.playerStatus.def&&(this.playerDamageCut=.69),1===this.playerStatus.atk?this.playerDamageAdd=1.2:2===this.playerStatus.atk?this.playerDamageAdd=1.3:3===this.playerStatus.atk?this.playerDamageAdd=1.4:4===this.playerStatus.atk?this.playerDamageAdd=1.5:5===this.playerStatus.atk?this.playerDamageAdd=1.6:6===this.playerStatus.atk?this.playerDamageAdd=1.65:7===this.playerStatus.atk?this.playerDamageAdd=1.7:8===this.playerStatus.atk?this.playerDamageAdd=1.75:9===this.playerStatus.atk?this.playerDamageAdd=1.8:10===this.playerStatus.atk&&(this.playerDamageAdd=1.85)},t}();function Lt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Bt(t){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mt(t,e){return!e||"object"!==Nt(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ut(t,e){return(Ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Nt=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Wt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Bt(t);if(e){var r=Bt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Mt(this,i)}}var Ht=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ut(t,e)}(i,t);var e=Wt(i);function i(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=e.call(this)).elapsedFrameCount=0,r.onAnimationEnded=function(){},r.text=t,r.text.anchor.set(.5,.5),r.text.alpha=0,r.text.position.set(0,0),r.onAnimationEnded=n,r.addChild(r.text),r}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){this.isDestroyed()||(this.elapsedFrameCount++,this.elapsedFrameCount<=25&&(this.text.alpha+=.04),this.elapsedFrameCount>=0&&this.elapsedFrameCount<=10&&(this.text.position.y-=5),50===this.elapsedFrameCount&&(this.destroy(),this.onAnimationEnded()))},n=i,o=[{key:"resourceList",get:function(){return[]}}],(r=null)&&Lt(n.prototype,r),o&&Lt(n,o),i}(s.W20);function Kt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Vt(t){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yt(t,e){return!e||"object"!==Jt(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zt(t,e){return(zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Jt=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Xt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Vt(t);if(e){var r=Vt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Yt(this,i)}}var Zt=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}(i,t);var e=Xt(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.NormalAttack(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.NormalAttack))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();3===r&&d.playSe(S.Audio.Se.NormalAttack),this.sprite.texture=S.TextureFrame.NormalAttack(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.NormalAttack,S.Audio.Se.NormalAttack]}}],(r=null)&&Kt(n.prototype,r),o&&Kt(n,o),i}(s.W20);function $t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Qt(t){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function te(t,e){return!e||"object"!==ie(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ee(t,e){return(ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Zt.TextureFrameUpdateFrequency=3;var ie=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function ne(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Qt(t);if(e){var r=Qt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return te(this,i)}}var re=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ee(t,e)}(i,t);var e=ne(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.NormalBossAttack(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.NormalBossAttack))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();3===r&&d.playSe(S.Audio.Se.NormalAttack),this.sprite.texture=S.TextureFrame.NormalBossAttack(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.NormalBossAttack]}}],(r=null)&&$t(n.prototype,r),o&&$t(n,o),i}(s.W20);re.TextureFrameUpdateFrequency=3;var oe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.animationType="idle",this.elapsedFrameCount=0,this.destroyed=!1,this.onAnimationEnded=function(){},this.sprite=e}var e=t.prototype;return e.isDestroyed=function(){return this.destroyed},e.destroy=function(){this.sprite.destroy(),this.destroyed=!0},e.update=function(t){this.updateAnimation()},e.updateAnimation=function(){if("idle"!==this.animationType&&"damaged"===this.animationType){if(8===this.elapsedFrameCount)return this.animationType="idle",this.sprite.position.x=320,this.sprite.texture=s.P6Y.kN[S.Static.BossTexture.Idle],void this.onAnimationEnded();if(0===this.elapsedFrameCount)this.sprite.texture=s.P6Y.kN[S.Static.BossTexture.Damaged],this.sprite.position.x=this.sprite.position.x+10;else if(this.elapsedFrameCount%2===0){var t;t=this.sprite.position.x>320?-1:1,this.sprite.position.x=this.sprite.position.x+20*t}this.elapsedFrameCount++}},e.requestAnimation=function(t,e){this.elapsedFrameCount=0,this.animationType=t,this.onAnimationEnded=e},t}();function ae(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function se(t){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ue(t,e){return!e||"object"!==le(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ce(t,e){return(ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var le=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function pe(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=se(t);if(e){var r=se(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ue(this,i)}}var he=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ce(t,e)}(i,t);var e=pe(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.reducingFrameCount=4,n.frame=new s.jyi,n.gauge=new s.jyi,n.gaugeEmpty=new s.jyi,n.fromPercent=1,n.toPercent=1,n.frame.texture=s.P6Y.kN[S.Static.GaugeFrame],"hp"===t?n.gauge.texture=s.P6Y.kN[S.Static.HpBar]:"fp"===t&&(n.gauge.texture=s.P6Y.kN[S.Static.FpBar]),n.gaugeEmpty.texture=s.P6Y.kN[S.Static.GaugeEmpty],n.gaugeEmpty.scale.set(.95,.5),n.gauge.scale.set(.95,.5),n.gaugeMaxWidth=n.gauge.width,n.frame.anchor.set(.5,.5),n.gauge.anchor.set(0,.5),n.gaugeEmpty.anchor.set(.5,.5),n.gauge.position.x=-114,n.addChild(n.gaugeEmpty),n.addChild(n.gauge),n.addChild(n.frame),n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!(this.elapsedFrameCount>this.reducingFrameCount)&&(this.elapsedFrameCount++,this.elapsedFrameCount<=this.reducingFrameCount)){var e=this.fromPercent-this.toPercent,i=this.elapsedFrameCount/this.reducingFrameCount,n=this.fromPercent-e*i;this.gauge.width=this.gaugeMaxWidth*n}},a.scaleGauge=function(t,e){this.elapsedFrameCount=0,this.fromPercent=t,this.toPercent=e},n=i,o=[{key:"resourceList",get:function(){return[S.Static.GaugeFrame,S.Static.HpBar,S.Static.FpBar,S.Static.GaugeEmpty]}}],(r=null)&&ae(n.prototype,r),o&&ae(n,o),i}(s.W20);function fe(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function de(t){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ye(t,e){return!e||"object"!==ve(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function me(t,e){return(me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ve=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function ge(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=de(t);if(e){var r=de(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ye(this,i)}}var be=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&me(t,e)}(i,t);var e=ge(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.HpRecover(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.HpRecover))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&d.playSe(S.Audio.Se.HpRecover),this.sprite.texture=S.TextureFrame.HpRecover(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.HpRecover,S.Audio.Se.HpRecover]}}],(r=null)&&fe(n.prototype,r),o&&fe(n,o),i}(s.W20);function Se(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _e(t){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function we(t,e){return!e||"object"!==Pe(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oe(t,e){return(Oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}be.TextureFrameUpdateFrequency=4;var Pe=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Te(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=_e(t);if(e){var r=_e(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return we(this,i)}}var xe=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oe(t,e)}(i,t);var e=Te(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.FpRecover(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.FpRecover))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&d.playSe(S.Audio.Se.FpRecover),this.sprite.texture=S.TextureFrame.FpRecover(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.FpRecover,S.Audio.Se.FpRecover]}}],(r=null)&&Se(n.prototype,r),o&&Se(n,o),i}(s.W20);function Ae(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Re(t){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ce(t,e){return!e||"object"!==Ee(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fe(t,e){return(Fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}xe.TextureFrameUpdateFrequency=4;var Ee=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function ke(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Re(t);if(e){var r=Re(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ce(this,i)}}var je=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fe(t,e)}(i,t);var e=ke(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.FullRecover(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.FullRecover))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&d.playSe(S.Audio.Se.FullRecover),this.sprite.texture=S.TextureFrame.FullRecover(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.FullRecover,S.Audio.Se.FullRecover]}}],(r=null)&&Ae(n.prototype,r),o&&Ae(n,o),i}(s.W20);function Ge(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ie(t){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qe(t,e){return!e||"object"!==Le(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function De(t,e){return(De=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}je.TextureFrameUpdateFrequency=4;var Le=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Be(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Ie(t);if(e){var r=Ie(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return qe(this,i)}}var Me=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&De(t,e)}(i,t);var e=Be(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.Cure(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.Cure))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&d.playSe(S.Audio.Se.Cure),this.sprite.texture=S.TextureFrame.Cure(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.Cure,S.Audio.Se.Cure]}}],(r=null)&&Ge(n.prototype,r),o&&Ge(n,o),i}(s.W20);function Ue(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ne(t){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function We(t,e){return!e||"object"!==Ke(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function He(t,e){return(He=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Me.TextureFrameUpdateFrequency=4;var Ke=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Ve(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Ne(t);if(e){var r=Ne(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return We(this,i)}}var Ye=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&He(t,e)}(i,t);var e=Ve(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.AttackUp(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.AttackUp))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&d.playSe(S.Audio.Se.StatusUp),this.sprite.texture=S.TextureFrame.AttackUp(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.AttackUp]}}],(r=null)&&Ue(n.prototype,r),o&&Ue(n,o),i}(s.W20);function ze(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Je(t){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xe(t,e){return!e||"object"!==$e(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ze(t,e){return(Ze=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ye.TextureFrameUpdateFrequency=4;var $e=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Qe(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Je(t);if(e){var r=Je(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Xe(this,i)}}var ti=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ze(t,e)}(i,t);var e=Qe(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.CriticalUp(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.CriticalUp))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&d.playSe(S.Audio.Se.StatusUp),this.sprite.texture=S.TextureFrame.CriticalUp(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.CriticalUp]}}],(r=null)&&ze(n.prototype,r),o&&ze(n,o),i}(s.W20);function ei(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ii(t){return(ii=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ni(t,e){return!e||"object"!==oi(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ri(t,e){return(ri=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}ti.TextureFrameUpdateFrequency=4;var oi=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function ai(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ii(t);if(e){var r=ii(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ni(this,i)}}var si=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ri(t,e)}(i,t);var e=ai(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.DvUp(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.DvUp))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&d.playSe(S.Audio.Se.StatusUp),this.sprite.texture=S.TextureFrame.DvUp(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.DvUp,S.Audio.Se.StatusUp]}}],(r=null)&&ei(n.prototype,r),o&&ei(n,o),i}(s.W20);function ui(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ci(t){return(ci=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function li(t,e){return!e||"object"!==hi(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pi(t,e){return(pi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}si.TextureFrameUpdateFrequency=4;var hi=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function fi(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ci(t);if(e){var r=ci(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return li(this,i)}}var di=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pi(t,e)}(i,t);var e=fi(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.PlayerSkill1(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.PlayerSkill1))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();4===r&&d.playSe(S.Audio.Se.NormalAttack),12===r&&d.playSe(S.Audio.Se.NormalAttack),this.sprite.texture=S.TextureFrame.PlayerSkill1(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.PlayerSkill1]}}],(r=null)&&ui(n.prototype,r),o&&ui(n,o),i}(s.W20);function yi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mi(t){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vi(t,e){return!e||"object"!==bi(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gi(t,e){return(gi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}di.TextureFrameUpdateFrequency=2;var bi=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Si(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=mi(t);if(e){var r=mi(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return vi(this,i)}}var _i=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gi(t,e)}(i,t);var e=Si(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.PlayerSkill2(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.PlayerSkill2_0)+S.MaxFrameIndex(S.Static.PlayerSkill2_1))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&d.playSe(S.Audio.Se.PlayerSkill2),this.sprite.texture=S.TextureFrame.PlayerSkill2(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.PlayerSkill2_0,S.Static.PlayerSkill2_1,S.Audio.Se.PlayerSkill2]}}],(r=null)&&yi(n.prototype,r),o&&yi(n,o),i}(s.W20);function wi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Oi(t){return(Oi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pi(t,e){return!e||"object"!==xi(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ti(t,e){return(Ti=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}_i.TextureFrameUpdateFrequency=3;var xi=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Ai(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Oi(t);if(e){var r=Oi(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Pi(this,i)}}var Ri=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ti(t,e)}(i,t);var e=Ai(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.PlayerSkill3(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.PlayerSkill3))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&d.playSe(S.Audio.Se.PlayerSkill3),5===r&&d.playSe(S.Audio.Se.Hit),this.sprite.texture=S.TextureFrame.PlayerSkill3(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.PlayerSkill3,S.Audio.Se.PlayerSkill3,S.Audio.Se.Hit]}}],(r=null)&&wi(n.prototype,r),o&&wi(n,o),i}(s.W20);function Ci(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Fi(t){return(Fi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ei(t,e){return!e||"object"!==ji(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ki(t,e){return(ki=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ri.TextureFrameUpdateFrequency=3;var ji=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Gi(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Fi(t);if(e){var r=Fi(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ei(this,i)}}var Ii=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ki(t,e)}(i,t);var e=Gi(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.PlayerSkill4(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.PlayerSkill4))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&d.playSe(S.Audio.Se.PlayerSkill4),this.sprite.texture=S.TextureFrame.PlayerSkill4(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.PlayerSkill4,S.Audio.Se.PlayerSkill4]}}],(r=null)&&Ci(n.prototype,r),o&&Ci(n,o),i}(s.W20);function qi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Di(t){return(Di=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Li(t,e){return!e||"object"!==Mi(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bi(t,e){return(Bi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ii.TextureFrameUpdateFrequency=3;var Mi=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Ui(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Di(t);if(e){var r=Di(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Li(this,i)}}var Ni=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bi(t,e)}(i,t);var e=Ui(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.PlayerSkill5(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.PlayerSkill5))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();r%2===0&&d.playSe(S.Audio.Se.NormalAttack),this.sprite.texture=S.TextureFrame.PlayerSkill5(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.PlayerSkill5]}}],(r=null)&&qi(n.prototype,r),o&&qi(n,o),i}(s.W20);function Wi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Hi(t){return(Hi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ki(t,e){return!e||"object"!==Yi(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vi(t,e){return(Vi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ni.TextureFrameUpdateFrequency=3;var Yi=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function zi(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Hi(t);if(e){var r=Hi(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ki(this,i)}}var Ji=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vi(t,e)}(i,t);var e=zi(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.PlayerSkill6(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.PlayerSkill6_0)+S.MaxFrameIndex(S.Static.PlayerSkill6_1))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&d.playSe(S.Audio.Se.PlayerSkill6),this.sprite.texture=S.TextureFrame.PlayerSkill6(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.PlayerSkill6_0,S.Static.PlayerSkill6_1,S.Audio.Se.PlayerSkill6]}}],(r=null)&&Wi(n.prototype,r),o&&Wi(n,o),i}(s.W20);function Xi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Zi(t){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $i(t,e){return!e||"object"!==tn(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qi(t,e){return(Qi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ji.TextureFrameUpdateFrequency=3;var tn=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function en(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Zi(t);if(e){var r=Zi(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return $i(this,i)}}var nn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qi(t,e)}(i,t);var e=en(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.Guard(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.Guard))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();3===r&&d.playSe(S.Audio.Se.Guard),this.sprite.texture=S.TextureFrame.Guard(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.Guard,S.Audio.Se.Guard]}}],(r=null)&&Xi(n.prototype,r),o&&Xi(n,o),i}(s.W20);function rn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function on(t){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function an(t,e){return!e||"object"!==un(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sn(t,e){return(sn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}nn.TextureFrameUpdateFrequency=8;var un=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function cn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=on(t);if(e){var r=on(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return an(this,i)}}var ln=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sn(t,e)}(i,t);var e=cn(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.AllGuard(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.AllGuard))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&d.playSe(S.Audio.Se.AllGuard),this.sprite.texture=S.TextureFrame.AllGuard(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.AllGuard,S.Audio.Se.AllGuard]}}],(r=null)&&rn(n.prototype,r),o&&rn(n,o),i}(s.W20);function pn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function hn(t){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fn(t,e){return!e||"object"!==yn(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dn(t,e){return(dn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}ln.TextureFrameUpdateFrequency=4;var yn=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function mn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=hn(t);if(e){var r=hn(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return fn(this,i)}}var vn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dn(t,e)}(i,t);var e=mn(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.BossSkill1(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.BossSkill1))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();4===r&&d.playSe(S.Audio.Se.NormalAttack),12===r&&d.playSe(S.Audio.Se.NormalAttack),this.sprite.texture=S.TextureFrame.BossSkill1(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.BossSkill1]}}],(r=null)&&pn(n.prototype,r),o&&pn(n,o),i}(s.W20);function gn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bn(t){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sn(t,e){return!e||"object"!==wn(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _n(t,e){return(_n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}vn.TextureFrameUpdateFrequency=3;var wn=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function On(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=bn(t);if(e){var r=bn(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Sn(this,i)}}var Pn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_n(t,e)}(i,t);var e=On(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.BossSkill2(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.BossSkill2))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&d.playSe(S.Audio.Se.BossSkill_2),this.sprite.texture=S.TextureFrame.BossSkill2(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.BossSkill2,S.Audio.Se.BossSkill_2]}}],(r=null)&&gn(n.prototype,r),o&&gn(n,o),i}(s.W20);function Tn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xn(t){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function An(t,e){return!e||"object"!==Cn(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rn(t,e){return(Rn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Pn.TextureFrameUpdateFrequency=3;var Cn=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Fn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=xn(t);if(e){var r=xn(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return An(this,i)}}var En=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rn(t,e)}(i,t);var e=Fn(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.BossSkill3(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.BossSkill3_0)+S.MaxFrameIndex(S.Static.BossSkill3_1))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();r%4===0&&d.playSe(S.Audio.Se.NormalAttack),this.sprite.texture=S.TextureFrame.BossSkill3(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.BossSkill3_0,S.Static.BossSkill3_1]}}],(r=null)&&Tn(n.prototype,r),o&&Tn(n,o),i}(s.W20);function kn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function jn(t){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gn(t,e){return!e||"object"!==qn(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function In(t,e){return(In=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}En.TextureFrameUpdateFrequency=3;var qn=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Dn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=jn(t);if(e){var r=jn(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Gn(this,i)}}var Ln=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&In(t,e)}(i,t);var e=Dn(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.BossSpecialMove(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.BossSpecialMove))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&d.playSe(S.Audio.Se.SpecialMove1),3===r&&d.playSe(S.Audio.Se.SpecialMove2),this.sprite.texture=S.TextureFrame.BossSpecialMove(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.BossSpecialMove,S.Audio.Se.SpecialMove1,S.Audio.Se.SpecialMove2]}}],(r=null)&&kn(n.prototype,r),o&&kn(n,o),i}(s.W20);function Bn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Mn(t){return(Mn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Un(t,e){return!e||"object"!==Wn(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nn(t,e){return(Nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ln.TextureFrameUpdateFrequency=3;var Wn=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Hn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Mn(t);if(e){var r=Mn(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Un(this,i)}}var Kn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nn(t,e)}(i,t);var e=Hn(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.MagicTool1(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.MagicTool1))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&d.playSe(S.Audio.Se.MagicTool1),this.sprite.texture=S.TextureFrame.MagicTool1(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.MagicTool1,S.Audio.Se.MagicTool1]}}],(r=null)&&Bn(n.prototype,r),o&&Bn(n,o),i}(s.W20);function Vn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Yn(t){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zn(t,e){return!e||"object"!==Xn(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jn(t,e){return(Jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Kn.TextureFrameUpdateFrequency=3;var Xn=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Zn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Yn(t);if(e){var r=Yn(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return zn(this,i)}}var $n=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jn(t,e)}(i,t);var e=Zn(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.MagicTool2(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.MagicTool2))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&d.playSe(S.Audio.Se.MagicTool2),this.sprite.texture=S.TextureFrame.MagicTool2(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.MagicTool2,S.Audio.Se.MagicTool2]}}],(r=null)&&Vn(n.prototype,r),o&&Vn(n,o),i}(s.W20);function Qn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function tr(t){return(tr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function er(t,e){return!e||"object"!==nr(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ir(t,e){return(ir=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}$n.TextureFrameUpdateFrequency=3;var nr=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function rr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=tr(t);if(e){var r=tr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return er(this,i)}}var or=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ir(t,e)}(i,t);var e=rr(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new s.jyi(S.TextureFrame.MagicTool3(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>S.MaxFrameIndex(S.Static.MagicTool3_0)+S.MaxFrameIndex(S.Static.MagicTool3_1)+S.MaxFrameIndex(S.Static.MagicTool3_2))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&d.playSe(S.Audio.Se.MagicTool3),this.sprite.texture=S.TextureFrame.MagicTool3(r)}}},n=i,o=[{key:"resourceList",get:function(){return[S.Static.MagicTool3_0,S.Static.MagicTool3_1,S.Static.MagicTool3_2,S.Audio.Se.MagicTool3]}}],(r=null)&&Qn(n.prototype,r),o&&Qn(n,o),i}(s.W20);function ar(t,e,i){return(ar="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sr(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function sr(t){return(sr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ur(t,e){return!e||"object"!==lr(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cr(t,e){return(cr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}or.TextureFrameUpdateFrequency=3;var lr=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function pr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=sr(t);if(e){var r=sr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ur(this,i)}}var hr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cr(t,e)}(i,t);var e=pr(i);function i(t,n,r,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(a=e.call(this)).sceneName="score_scene",a.transitionIn=new g(1,0,-.02),a.transitionOut=new g(0,1,.02),a.language=t,a.cp=n,a.turn=r,a.bossHp=o,a}var n=i.prototype;return n.createInitialResourceList=function(){var t=ar(sr(i.prototype),"createInitialResourceList",this).call(this);return t.push(S.Audio.Se.OptionTap2),t},n.loadInitialResource=function(t){var e,i=this.createInitialResourceList(),n=S.UI.SceneUiGraph(this.sceneName);e="japanese"===this.language?S.Texts.ScoreScene.Ja:S.Texts.ScoreScene.En,i.push(n),i.push(e);var r=this.filterLoadedAssets(i);r.length>0?y.game.loader.add(r).load(t):t()},n.onInitialResourceLoaded=function(){var t,e=[],i=S.UI.SceneUiGraph(this.sceneName);t="japanese"===this.language?S.Texts.ScoreScene.Ja:S.Texts.ScoreScene.En;var n=y.game.loader.resources[i].data.nodes;n=n.concat(y.game.loader.resources[t].data.nodes);var r=!0,o=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;"sprite"===c.type&&e.push({name:c.params.textureName,url:c.params.url})}}catch(l){o=!0,a=l}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return e},n.onResourceLoaded=function(){var t,e=y.game.loader.resources[S.UI.SceneUiGraph(this.sceneName)].data;t="japanese"===this.language?S.Texts.ScoreScene.Ja:S.Texts.ScoreScene.En;var i=y.game.loader.resources[t].data;this.prepareUiGraphContainer(e),this.prepareUiGraphContainer(i),this.uiGraphContainer.zIndex=1,this.addChild(this.uiGraphContainer),this.initSound(),this.initScore()},n.initScore=function(){var t=this.uiGraph.get("score"),e=this.uiGraph.get("difficulty_easy"),i=this.uiGraph.get("difficulty_normal"),n=this.uiGraph.get("difficulty_hard"),r=this.uiGraph.get("cp"),o=this.uiGraph.get("turn"),a=this.uiGraph.get("boss_hp");if(t&&e&&i&&n&&r&&o&&a){var s=0,u=0;this.cp>=8e3?(s=1e4,u=500,e.visible=!0):this.cp>=7e3&&this.cp<8e3?(s=15e3,u=400,i.visible=!0):this.cp<7e3&&(s=2e4,u=300,n.visible=!0);var c=0;this.bossHp<=0?(c=5e4,a.text="0"):(c=20*-this.bossHp,a.text=this.bossHp.toString()),o.text=this.turn.toString(),r.text=this.cp.toString();var l=s*((13400-this.cp)/1e3)-this.turn*u+c;l<=0&&(l=0),t.text=l.toString()}},n.initSound=function(){var t=y.game.loader.resources,e=[S.Audio.Se.OptionTap2],i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;d.createSound(s,t[s].buffer)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}},n.showTitleScene=function(){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(this.isOver=!0,d.playSe(S.Audio.Se.OptionTap2),y.loadScene(new eo))},i}(st);function fr(t,e,i){return(fr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dr(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function dr(t){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yr(t,e){return!e||"object"!==vr(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mr(t,e){return(mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vr=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function gr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=dr(t);if(e){var r=dr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return yr(this,i)}}var br=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mr(t,e)}(i,t);var e=gr(i);function i(t,n,r,o,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(s=e.call(this)).texts=new Map,s.whenLoseNames=["emperor_name","player_name","no_name"],s.whenLoseTextIdsArray=[["lose_emperor_message_1"],["lose_player_message_1"],["lose_narrator_message_1"]],s.whenWinNames=["emperor_name","player_name","emperor_name","player_name","emperor_name","player_name","no_name"],s.whenWinTextIdsArray=[["win_emperor_message_1"],["win_player_message_1"],["win_emperor_message_2"],["win_player_message_2"],["win_emperor_message_3","win_emperor_message_4"],["win_player_message_3"],["win_narrator_message_1"]],s.whenEasyWinNames=["emperor_name","player_name","no_name","player_name","emperor_name","no_name"],s.whenEasyWinTextIdsArray=[["easy_win_emperor_message_1"],["easy_win_player_message_1","easy_win_player_message_2"],["easy_win_narrator_message_1"],["easy_win_player_message_3"],["easy_win_emperor_message_2"],["easy_win_narrator_message_2"]],s.sceneName="talk_scene",s.transitionIn=new g(1,0,-.02),s.transitionOut=new g(0,1,.02),s.language=t,s.endingType=r,s.playerStatus=n,s.turn=o,s.bossHp=a,s}var n=i.prototype;return n.createInitialResourceList=function(){var t=fr(dr(i.prototype),"createInitialResourceList",this).call(this);return t.push(S.UI.MessageWindow),t.push(S.Audio.Bgm.TalkBgm),t},n.update=function(t){fr(dr(i.prototype),"update",this).call(this,t)},n.loadInitialResource=function(t){var e,i=this.createInitialResourceList(),n=S.UI.SceneUiGraph(this.sceneName);e="japanese"===this.language?S.Texts.EndingTalkScene.Ja:S.Texts.EndingTalkScene.En,i.push(n),i.push(e);var r=this.filterLoadedAssets(i);r.length>0?y.game.loader.add(r).load(t):t()},n.onResourceLoaded=function(){var t,e=y.game.loader.resources[S.UI.SceneUiGraph(this.sceneName)].data;t="japanese"===this.language?S.Texts.EndingTalkScene.Ja:S.Texts.EndingTalkScene.En;var i,n,r=y.game.loader.resources[t].data;this.prepareUiGraphContainer(e),this.prepareUiGraphContainer(r),this.uiGraphContainer.zIndex=1,this.addChild(this.uiGraphContainer),this.initSound(),"lose"===this.endingType?(i=this.whenLoseTextIdsArray.shift(),n=this.whenLoseNames.shift()):"win"===this.endingType?(i=this.whenWinTextIdsArray.shift(),n=this.whenWinNames.shift()):"easyWin"===this.endingType&&(i=this.whenEasyWinTextIdsArray.shift(),n=this.whenEasyWinNames.shift()),i&&n&&(this.spawnMessageWindow(i,n),d.playBgm(S.Audio.Bgm.TalkBgm,3))},n.initSound=function(){var t=y.game.loader.resources,e=[S.Audio.Bgm.TalkBgm],i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;d.createSound(s,t[s].buffer)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}},n.spawnMessageWindow=function(t,e){var i=this.createTexts(t),n=this.texts.get(e);if(n){var r=new Rt(i,n,this);r.zIndex=3,this.addChild(r),this.registerUpdatingObject(r)}},n.createTexts=function(t){var e=[],i=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value,u=this.texts.get(s);u&&e.push(u)}}catch(c){n=!0,r=c}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}return e},n.onMessageWindowClosed=function(){var t,e;"lose"===this.endingType&&0===this.whenLoseNames.length&&this.showNextScene(),"win"===this.endingType&&0===this.whenWinNames.length&&this.showNextScene(),"easyWin"===this.endingType&&0===this.whenEasyWinNames.length&&this.showNextScene(),"lose"===this.endingType&&(t=this.whenLoseTextIdsArray.shift(),e=this.whenLoseNames.shift()),"win"===this.endingType&&(t=this.whenWinTextIdsArray.shift(),e=this.whenWinNames.shift()),"easyWin"===this.endingType&&(t=this.whenEasyWinTextIdsArray.shift(),e=this.whenEasyWinNames.shift()),t&&e&&this.spawnMessageWindow(t,e)},n.prepareUiGraphContainer=function(t){var e=!0,i=!1,n=void 0;try{for(var r,o=t.nodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=Q.getFactory(a.type)||this.getCustomUiGraphFactory(a.type);if(s){var u=s.createUiNodeByGraphElement(a);u&&(a.events&&s.attachUiEventByGraphElement(a.events,u,this),"message"===a.type?this.texts.set(a.id,u):(this.uiGraph.set(a.id,u),this.uiGraphContainer.addChild(u)))}}}catch(c){i=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}},n.onSkipButtonTapped=function(){d.playSe(S.Audio.Se.OptionTap2),this.showNextScene()},n.showNextScene=function(){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(d.destroySound(S.Audio.Bgm.TalkBgm),this.isOver=!0,y.loadScene(new hr(this.language,this.playerStatus.cp,this.turn,this.bossHp)))},i}(st);function Sr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _r(t,e,i){return(_r="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wr(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function wr(t){return(wr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Or(t,e){return!e||"object"!==Tr(e)&&"function"!==typeof e?Sr(t):e}function Pr(t,e){return(Pr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tr=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function xr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=wr(t);if(e){var r=wr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Or(this,i)}}var Ar=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pr(t,e)}(i,t);var e=xr(i);function i(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(o=e.call(this)).itemNumbers=new Map,o.first_select=new s.W20,o.battle_select=new s.W20,o.texts=new Map,o.animationType="idle",o.itemPage=new s.W20,o.skillPage=new s.W20,o.itemNames1=new s.W20,o.itemNames2=new s.W20,o.selectedItemMarker=null,o.selectedSkillMarker=null,o.selectedItemName="",o.selectedItemNumberId="",o.selectedSkillType=0,o.backToTitle=new s.W20,o.sceneName="battle_scene",o.transitionIn=new g(1,0,-.02),o.transitionOut=new g(0,1,.02),o.itemNumbers=n,o.playerStatus=t,o.language=r||"japanese",o.gameLogic=new Dt(Sr(o),o.playerStatus),o.loadSaveDataFromDB(),o}var n=i.prototype;return n.createInitialResourceList=function(){var t=_r(wr(i.prototype),"createInitialResourceList",this).call(this);return t.push(S.Static.BossTexture.Damaged),t.push(S.Audio.Bgm.BossBgm),t.concat(S.Items,Zt.resourceList,re.resourceList,be.resourceList,xe.resourceList,je.resourceList,Me.resourceList,Ye.resourceList,ti.resourceList,si.resourceList,di.resourceList,_i.resourceList,Ri.resourceList,Ii.resourceList,Ni.resourceList,Ji.resourceList,nn.resourceList,ln.resourceList,vn.resourceList,Pn.resourceList,En.resourceList,Ln.resourceList,he.resourceList,Kn.resourceList,$n.resourceList,or.resourceList)},n.loadInitialResource=function(t){var e,i=this.createInitialResourceList(),n=S.UI.SceneUiGraph(this.sceneName);e="japanese"===this.language?S.Texts.BattleScene.Ja:S.Texts.BattleScene.En,i.push(n),i.push(e);var r=this.filterLoadedAssets(i);r.length>0?y.game.loader.add(r).load(t):t()},n.update=function(t){_r(wr(i.prototype),"update",this).call(this,t),this.updatePlayerDamaged()},n.onResourceLoaded=function(){var t,e=y.game.loader.resources[S.UI.SceneUiGraph(this.sceneName)].data;t="japanese"===this.language?S.Texts.BattleScene.Ja:S.Texts.BattleScene.En;var i=y.game.loader.resources[t].data;this.prepareUiGraphContainer(e),this.prepareUiGraphContainer(i),this.uiGraphContainer.zIndex=1,this.battle_select.visible=!1,this.uiGraphContainer.addChild(this.first_select),this.uiGraphContainer.addChild(this.battle_select),this.registerUpdatingObject(this.boss),this.uiGraphContainer.addChild(this.boss.sprite),this.createGauge(),this.initItemNumber(),this.itemNames2.visible=!1,this.itemPage.addChild(this.itemNames1),this.itemPage.addChild(this.itemNames2),this.itemPage.visible=!1,this.uiGraphContainer.addChild(this.itemPage),this.skillPage.visible=!1,this.uiGraphContainer.addChild(this.skillPage),this.backToTitle.visible=!1,this.uiGraphContainer.addChild(this.backToTitle),this.addChild(this.uiGraphContainer),this.initSound(),this.playBgmIfNeeded(),this.itemAndSkillFirstSelect(),this.spawnBossState(1),this.initPlayerHpFpText(),this.initPlayerStatusText()},n.initPlayerStatusText=function(){var t=this.uiGraph.get("cp"),e=this.uiGraph.get("hp"),i=this.uiGraph.get("fp"),n=this.uiGraph.get("atk"),r=this.uiGraph.get("def"),o=this.uiGraph.get("dv"),a=this.uiGraph.get("hit"),s=this.uiGraph.get("crit"),u=this.uiGraph.get("max_hp"),c=this.uiGraph.get("max_fp"),l=this.uiGraph.get("max_atk"),p=this.uiGraph.get("max_def"),h=this.uiGraph.get("max_dv"),f=this.uiGraph.get("max_hit"),d=this.uiGraph.get("max_crit");t&&e&&i&&n&&r&&o&&a&&s&&u&&c&&l&&p&&h&&f&&d&&(t.text=this.playerStatus.cp.toString(),e.text=this.playerStatus.hp.toString(),i.text=this.playerStatus.fp.toString(),n.text=this.playerStatus.atk.toString(),r.text=this.playerStatus.def.toString(),o.text=this.playerStatus.dv.toString(),a.text=this.playerStatus.hit.toString(),s.text=this.playerStatus.crit.toString(),1200===this.playerStatus.hp?(e.visible=!1,u.visible=!0):(e.visible=!0,u.visible=!1),1200===this.playerStatus.fp?(i.visible=!1,c.visible=!0):(i.visible=!0,c.visible=!1),10===this.playerStatus.atk?(n.visible=!1,l.visible=!0):(n.visible=!0,l.visible=!1),10===this.playerStatus.def?(r.visible=!1,p.visible=!0):(r.visible=!0,p.visible=!1),10===this.playerStatus.dv?(o.visible=!1,h.visible=!0):(o.visible=!0,h.visible=!1),10===this.playerStatus.hit?(a.visible=!1,f.visible=!0):(a.visible=!0,f.visible=!1),10===this.playerStatus.crit?(s.visible=!1,d.visible=!0):(s.visible=!0,d.visible=!1))},n.initPlayerHpFpText=function(){var t=this.uiGraph.get("player_hp"),e=this.uiGraph.get("player_fp");t&&e&&(t.text=this.playerStatus.hp.toString(),e.text=this.playerStatus.fp.toString())},n.initSound=function(){var t=y.game.loader.resources,e=[S.Audio.Se.Hit,S.Audio.Se.Guard,S.Audio.Se.AllGuard,S.Audio.Se.Cure,S.Audio.Se.StatusUp,S.Audio.Se.HpRecover,S.Audio.Se.FpRecover,S.Audio.Se.FullRecover,S.Audio.Se.NormalAttack,S.Audio.Se.PlayerSkill2,S.Audio.Se.PlayerSkill3,S.Audio.Se.PlayerSkill4,S.Audio.Se.PlayerSkill6,S.Audio.Se.BossSkill_2,S.Audio.Se.SpecialMove1,S.Audio.Se.SpecialMove2,S.Audio.Se.MagicTool1,S.Audio.Se.MagicTool2,S.Audio.Se.MagicTool3],i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;d.createSound(s,t[s].buffer)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}},n.itemAndSkillFirstSelect=function(){var t,e;"japanese"===this.language?(e="\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u304c\u3067\u3084\u3059\u3044\u3000FP -200",t="300HP\u304b\u3044\u3075\u304f"):(e="Easy to be critical\u3000FP -200",t="Recover 300HP"),this.onItemNameTapped("items/potion3_04.png","item_marker_1",t,"hpPotion","item_1_number",!1),this.onSkillNameTapped(1,"skill_marker_1",e,!1)},n.initItemNumber=function(){for(var t=Object.keys(S.ItemNumberAndItemName),e=Object.values(S.ItemNumberAndItemName),i=0;i<e.length;i++){var n=e[i],r=t[i],o=this.uiGraph.get(r),a=this.itemNumbers.get(n);if(!o||void 0===a)return;o.text=a.toString()}},n.createGauge=function(){this.hpGauge=new he("hp"),this.fpGauge=new he("fp"),this.registerUpdatingObject(this.hpGauge),this.registerUpdatingObject(this.fpGauge),this.hpGauge.position.set(150,30),this.fpGauge.position.set(150,60),this.hpGauge.scale.set(.8,1),this.fpGauge.scale.set(.8,1),this.uiGraphContainer.addChild(this.hpGauge),this.uiGraphContainer.addChild(this.fpGauge)},n.onBattleButtonTapped=function(){d.playSe(S.Audio.Se.OptionTap),this.first_select.visible=!1,this.battle_select.visible=!0,this.backToTitle.visible=!1},n.onReturnButtonTapped=function(){d.playSe(S.Audio.Se.OptionTap),this.battle_select.visible=!1,this.itemPage.visible=!1,this.skillPage.visible=!1,this.first_select.visible=!0},n.onSkillReturnButtonTapped=function(){d.playSe(S.Audio.Se.OptionTap),this.skillPage.visible=!1,this.battle_select.visible=!0},n.onItemButtonTapped=function(){d.playSe(S.Audio.Se.OptionTap),this.first_select.visible=!1,this.itemPage.visible=!0,this.backToTitle.visible=!1},n.onSkillButtonTapped=function(){d.playSe(S.Audio.Se.OptionTap),this.battle_select.visible=!1,this.skillPage.visible=!0},n.onAttackButtonTapped=function(){var t=this.uiGraph.get("boss_state");t&&(t.visible=!1,this.battle_select.visible=!1,this.spawnEffect("playerNormalAttack",(function(){})),this.gameLogic.onAttackButtonTapped())},n.onGuardButtonTapped=function(){var t=this,e=this.uiGraph.get("boss_state");e&&(e.visible=!1,this.battle_select.visible=!1,this.gameLogic.onGuardButtonTapped(),this.spawnEffect("playerGuard",(function(){t.gameLogic.bossTurn()})))},n.onItemUseButtonTapped=function(){d.playSe(S.Audio.Se.OptionTap);var t=this.itemNumbers.get(this.selectedItemName),e=this.uiGraph.get(this.selectedItemNumberId);if(t&&e){this.itemNumbers.set(this.selectedItemName,t-1),e.text=(t-1).toString(),this.itemPage.visible=!1;var i=this.uiGraph.get("boss_state");i&&(i.visible=!1,this.gameLogic.onItemUsed(this.selectedItemName))}},n.onSkillUseButtonTapped=function(){var t=this.uiGraph.get("boss_state");t&&(t.visible=!1,this.skillPage.visible=!1,this.selectedSkillType!==jt.SKILL_6&&this.spawnEffect(this.selectedSkillType,(function(){})),this.gameLogic.onSkillUsed(this.selectedSkillType))},n.onPlayerAttackMissed=function(){var t=this;this.spawnText("MISS",450,280,(function(){t.gameLogic.bossTurn()}))},n.onBossAttackMissed=function(t,e,i,n,r,o,a,s){var u,c,l=this.uiGraph.get("hit_down"),p=this.uiGraph.get("defense_down"),h=this.uiGraph.get("attack_up"),f=this.uiGraph.get("critical_up"),d=this.uiGraph.get("dv_up"),y=this.selectEffectName(e);if("japanese"===this.language?(u="\u7687\u5e1d\u306e\u30bf\u30fc\u30f3\uff01",c="\u7687\u5e1d\u306f\u9b54\u5177\u3092\u4f7f\u3063\u305f\uff01"):(u="The emperor's turn!",c="The emperor used a magic tool!"),e===It.MAGIC_TOOL_1||e===It.MAGIC_TOOL_2||e===It.MAGIC_TOOL_3){var m=this;this.spawnText(u,320,550,(function(){var e=m;m.spawnText(c,320,550,(function(){var u=e;e.spawnEffect(y,(function(){var e=u;u.spawnText("MISS",320,550,(function(){l&&p&&h&&f&&d&&(l.visible=!1,p.visible=!1,h.visible=!1,f.visible=!1,d.visible=!1,i&&(l.visible=!0),n&&(p.visible=!0),o&&(h.visible=!0),a&&(f.visible=!0),s&&(d.visible=!0),r?(e.spawnEffect(e.selectedSkillType,(function(){})),e.gameLogic.onSkillUsed(e.selectedSkillType)):(e.first_select.visible=!0,e.spawnBossState(t)))}))}))}))}))}else{var v=this;this.spawnText(u,320,550,(function(){var e=v;v.spawnEffect(y,(function(){var u=e;e.spawnText("MISS",320,550,(function(){l&&p&&h&&f&&d&&(l.visible=!1,p.visible=!1,h.visible=!1,f.visible=!1,d.visible=!1,i&&(l.visible=!0),n&&(p.visible=!0),o&&(h.visible=!0),a&&(f.visible=!0),s&&(d.visible=!0),r?(u.spawnEffect(u.selectedSkillType,(function(){})),u.gameLogic.onSkillUsed(u.selectedSkillType)):(u.first_select.visible=!0,u.spawnBossState(t)))}))}))}))}},n.onBossDamaged=function(t,e,i,n){var r,o=this;this.boss.requestAnimation("damaged",(function(){})),r="japanese"===this.language?"".concat(t," \u30c0\u30e1\u30fc\u30b8\uff01"):"".concat(t," Damage!"),e&&this.spawnCriticalText(450,240),this.spawnText(r,450,280,(function(){i<=0&&o.playerStatus.cp<8e3?o.showEndingScene("win",n,i):i<=0&&o.playerStatus.cp>=8e3?o.showEndingScene("easyWin",n,i):o.gameLogic.bossTurn()}))},n.onSkill6Used=function(){var t,e=this;t="japanese"===this.language?"\u5263\u5148\u306b\u7cbe\u795e\u3092\u96c6\u4e2d\u3055\u305b\u305f":"You focused your mind on the tip of your sword",this.spawnText(t,320,550,(function(){e.gameLogic.bossTurn()}))},n.onBossGuarded=function(t,e,i,n,r,o,a){var s,u=this,c=this.uiGraph.get("hit_down"),l=this.uiGraph.get("defense_down"),p=this.uiGraph.get("attack_up"),h=this.uiGraph.get("critical_up"),f=this.uiGraph.get("dv_up");s="japanese"===this.language?"\u7687\u5e1d\u306e\u30bf\u30fc\u30f3\uff01":"The emperor's turn!",this.spawnText(s,320,550,(function(){var s,d=u;s="japanese"===u.language?"\u7687\u5e1d\u306f\u30ac\u30fc\u30c9\u3057\u3066\u3044\u308b\uff01":"The emperor is guarding!",u.spawnText(s,320,550,(function(){c&&l&&p&&h&&f&&(c.visible=!1,l.visible=!1,p.visible=!1,h.visible=!1,f.visible=!1,e&&(c.visible=!0),i&&(l.visible=!0),r&&(p.visible=!0),o&&(h.visible=!0),a&&(f.visible=!0),n?(d.spawnEffect(d.selectedSkillType,(function(){})),d.gameLogic.onSkillUsed(d.selectedSkillType)):(d.first_select.visible=!0,d.spawnBossState(t)))}))}))},n.onBossAvoided=function(t,e,i,n,r,o,a){var s,u=this,c=this.uiGraph.get("hit_down"),l=this.uiGraph.get("defense_down"),p=this.uiGraph.get("attack_up"),h=this.uiGraph.get("critical_up"),f=this.uiGraph.get("dv_up");s="japanese"===this.language?"\u7687\u5e1d\u306e\u30bf\u30fc\u30f3\uff01":"The emperor's turn!",this.spawnText(s,320,550,(function(){var s,d=u;s="japanese"===u.language?"\u7687\u5e1d\u306f\u56de\u907f\u884c\u52d5\u3092\u3057\u3066\u3044\u308b\uff01":"The emperor is doing avoidance behavior!",u.spawnText(s,320,550,(function(){c&&l&&p&&h&&f&&(c.visible=!1,l.visible=!1,p.visible=!1,h.visible=!1,f.visible=!1,e&&(c.visible=!0),i&&(l.visible=!0),r&&(p.visible=!0),o&&(h.visible=!0),a&&(f.visible=!0),n?(d.spawnEffect(d.selectedSkillType,(function(){})),d.gameLogic.onSkillUsed(d.selectedSkillType)):(d.first_select.visible=!0,d.spawnBossState(t)))}))}))},n.onBossFlinched=function(t,e,i,n,r,o,a){var s,u=this,c=this.uiGraph.get("hit_down"),l=this.uiGraph.get("defense_down"),p=this.uiGraph.get("attack_up"),h=this.uiGraph.get("critical_up"),f=this.uiGraph.get("dv_up");s="japanese"===this.language?"\u7687\u5e1d\u306e\u30bf\u30fc\u30f3\uff01":"The emperor's turn!",this.spawnText(s,320,550,(function(){var s,d=u;s="japanese"===u.language?"\u7687\u5e1d\u306f\u602f\u3093\u3067\u3044\u308b\uff01":"The emperor is Flinching!",u.spawnText(s,320,550,(function(){c&&l&&p&&h&&f&&(c.visible=!1,l.visible=!1,p.visible=!1,h.visible=!1,f.visible=!1,e&&(c.visible=!0),i&&(l.visible=!0),r&&(p.visible=!0),o&&(h.visible=!0),a&&(f.visible=!0),n?(d.spawnEffect(d.selectedSkillType,(function(){})),d.gameLogic.onSkillUsed(d.selectedSkillType)):(d.first_select.visible=!0,d.spawnBossState(t)))}))}))},n.onPlayerDamaged=function(t,e,i,n,r,o,a,s,u,c,l,p,h,f){var d,y,m,v,g=this.uiGraph.get("hit_down"),b=this.uiGraph.get("defense_down"),S=this.uiGraph.get("attack_up"),_=this.uiGraph.get("critical_up"),w=this.uiGraph.get("dv_up"),O=this.selectEffectName(r);if("japanese"===this.language?(d="\u7687\u5e1d\u306e\u30bf\u30fc\u30f3\uff01",y="\u7687\u5e1d\u306f\u9b54\u5177\u3092\u4f7f\u3063\u305f\uff01",m="\u547d\u4e2d\u7387\u30c0\u30a6\u30f3\uff01",v="\u9632\u5fa1\u529b\u30c0\u30a6\u30f3\uff01"):(d="The emperor's turn!",y="The emperor used a magic tool!",m="Hit rate down!",v="Defense down\uff01"),r===It.MAGIC_TOOL_1||r===It.MAGIC_TOOL_2){var P=this,T=r===It.MAGIC_TOOL_1?m:v;this.spawnText(d,320,550,(function(){var r=P;P.spawnText(y,320,550,(function(){var s=r;r.elapsedFrameCount=0,r.animationType="damaged",r.spawnEffect(O,(function(){var e,r=s;e="japanese"===s.language?"".concat(t," \u30c0\u30e1\u30fc\u30b8\uff01"):"".concat(t," Damage!"),g&&b&&S&&_&&w&&(g.visible=!1,b.visible=!1,S.visible=!1,_.visible=!1,w.visible=!1,o&&(g.visible=!0),a&&(b.visible=!0),c&&(S.visible=!0),l&&(_.visible=!0),p&&(w.visible=!0),s.spawnText(e,320,550,(function(){var t=r;0!==i?r.spawnText(T,320,550,(function(){u?(t.spawnEffect(t.selectedSkillType,(function(){})),t.gameLogic.onSkillUsed(t.selectedSkillType)):(t.first_select.visible=!0,t.spawnBossState(n))})):r.showEndingScene("lose",h,f)})))})),r.hpGauge.scaleGauge(e,i)}))}))}else if(r===It.MAGIC_TOOL_3){var x=this;this.spawnText(d,320,550,(function(){var r=x;x.spawnText(y,320,550,(function(){var s=r;r.elapsedFrameCount=0,r.animationType="damaged",r.spawnEffect(O,(function(){var e,r=s;e="japanese"===s.language?"".concat(t," \u30c0\u30e1\u30fc\u30b8\uff01"):"".concat(t," Damage!"),s.spawnText(e,320,550,(function(){0!==i?g&&b&&S&&_&&w&&(g.visible=!1,b.visible=!1,S.visible=!1,_.visible=!1,w.visible=!1,o&&(g.visible=!0),a&&(b.visible=!0),c&&(S.visible=!0),l&&(_.visible=!0),p&&(w.visible=!0),u?(r.spawnEffect(r.selectedSkillType,(function(){})),r.gameLogic.onSkillUsed(r.selectedSkillType)):(r.first_select.visible=!0,r.spawnBossState(n))):r.showEndingScene("lose",h,f)}))})),r.hpGauge.scaleGauge(e,i)}))}))}else{var A=this;this.spawnText(d,320,550,(function(){var r=A;A.elapsedFrameCount=0,A.animationType="damaged",A.spawnEffect(O,(function(){var e,d=r;s&&r.spawnCriticalText(320,510),e="japanese"===r.language?"".concat(t," \u30c0\u30e1\u30fc\u30b8\uff01"):"".concat(t," Damage!"),r.spawnText(e,320,550,(function(){0!==i?g&&b&&S&&_&&w&&(g.visible=!1,b.visible=!1,S.visible=!1,_.visible=!1,w.visible=!1,o&&(g.visible=!0),a&&(b.visible=!0),c&&(S.visible=!0),l&&(_.visible=!0),p&&(w.visible=!0),u?(d.spawnEffect(d.selectedSkillType,(function(){})),d.gameLogic.onSkillUsed(d.selectedSkillType)):(d.first_select.visible=!0,d.spawnBossState(n))):d.showEndingScene("lose",h,f)}))})),A.hpGauge.scaleGauge(e,i)}))}},n.onPlayerHpRecovered=function(t,e,i){var n=this;this.spawnEffect("playerHpRecovered",(function(){var e,i=n;e="japanese"===n.language?"HP ".concat(t," \u56de\u5fa9\uff01"):"HP ".concat(t," Recovered!"),n.spawnText(e,320,550,(function(){i.gameLogic.bossTurn()}))})),this.hpGauge.scaleGauge(e,i)},n.onPlayerFpRecovered=function(t,e,i){var n=this;this.spawnEffect("playerFpRecovered",(function(){var e,i=n;e="japanese"===n.language?"FP ".concat(t," \u56de\u5fa9\uff01"):"FP ".concat(t," Recovered!"),n.spawnText(e,320,550,(function(){i.gameLogic.bossTurn()}))})),this.fpGauge.scaleGauge(e,i)},n.onPlayerFullRecovered=function(t,e,i,n){var r=this,o=this.uiGraph.get("hit_down"),a=this.uiGraph.get("defense_down");o&&a&&(o.visible=!1,a.visible=!1,this.spawnEffect("playerFullRecovered",(function(){var t,e=r;t="japanese"===r.language?"\u5b8c\u5168\u56de\u5fa9\u3057\u305f\uff01":"Perfectly recovered!",r.spawnText(t,320,550,(function(){e.gameLogic.bossTurn()}))})),this.hpGauge.scaleGauge(t,e),this.fpGauge.scaleGauge(i,n))},n.onPlayerCured=function(){var t=this,e=this.uiGraph.get("hit_down"),i=this.uiGraph.get("defense_down");e&&i&&(e.visible=!1,i.visible=!1,this.spawnEffect("playerCured",(function(){var e,i=t;e="japanese"===t.language?"\u72b6\u614b\u7570\u5e38\u56de\u5fa9\uff01":"Bad status cured!",t.spawnText(e,320,550,(function(){i.gameLogic.bossTurn()}))})))},n.onPlayerAttackUpped=function(){var t=this,e=this.uiGraph.get("attack_up");e&&(e.visible=!0,this.spawnEffect("playerAttackUp",(function(){var e,i=t;e="japanese"===t.language?"\u653b\u6483\u529b\u30a2\u30c3\u30d7\uff01":"Attack up!",t.spawnText(e,320,550,(function(){i.gameLogic.bossTurn()}))})))},n.onPlayerCriticalUpped=function(){var t=this,e=this.uiGraph.get("critical_up");e&&(e.visible=!0,this.spawnEffect("playerCriticalUp",(function(){var e,i=t;e="japanese"===t.language?"\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30a2\u30c3\u30d7\uff01":"Critical up!",t.spawnText(e,320,550,(function(){i.gameLogic.bossTurn()}))})))},n.onPlayerDvUpped=function(){var t=this,e=this.uiGraph.get("dv_up");e&&(e.visible=!0,this.spawnEffect("playerDvUp",(function(){var e,i=t;e="japanese"===t.language?"\u56de\u907f\u7387\u30a2\u30c3\u30d7\uff01":"Evasion rate up!",t.spawnText(e,320,550,(function(){i.gameLogic.bossTurn()}))})))},n.onAronBetaUsed=function(){var t=this;this.spawnEffect("playerAllGuard",(function(){t.gameLogic.bossTurn()}))},n.onPlayerFpDecreased=function(t,e){this.fpGauge.scaleGauge(t,e)},n.spawnEffect=function(t,e){var i;switch(t){case"playerNormalAttack":(i=new Zt(e)).position.set(320,280),i.scale.set(3,3);break;case"bossNormalAttack":(i=new re(e)).position.set(320,450),i.scale.set(2,2);break;case"bossSkill1":(i=new vn(e)).position.set(320,400),i.scale.set(1.2,1.2);break;case"bossSkill2":(i=new Pn(e)).position.set(320,400),i.scale.set(1.2,1.2);break;case"bossSkill3":(i=new En(e)).position.set(320,320),i.scale.set(1,1.4);break;case"bossSpecialMove":(i=new Ln(e)).position.set(320,320),i.scale.set(1,1.4);break;case"magicTool1":(i=new Kn(e)).position.set(320,450),i.scale.set(1,1);break;case"magicTool2":(i=new $n(e)).position.set(320,450),i.scale.set(1,1);break;case"magicTool3":(i=new or(e)).position.set(320,320),i.scale.set(1,1.4);break;case"playerHpRecovered":(i=new be(e)).position.set(320,500),i.scale.set(2,2);break;case"playerFpRecovered":(i=new xe(e)).position.set(320,500),i.scale.set(2,2);break;case"playerFullRecovered":(i=new je(e)).position.set(320,500),i.scale.set(2,2);break;case"playerCured":(i=new Me(e)).position.set(320,500),i.scale.set(2,2);break;case"playerAttackUp":(i=new Ye(e)).position.set(320,500),i.scale.set(1.2,1.1);break;case"playerCriticalUp":(i=new ti(e)).position.set(320,500),i.scale.set(1.2,1.1);break;case"playerDvUp":(i=new si(e)).position.set(320,500),i.scale.set(1.2,1.1);break;case"playerGuard":(i=new nn(e)).position.set(320,500),i.scale.set(1.2,1.2);break;case"playerAllGuard":(i=new ln(e)).position.set(320,500),i.scale.set(1.5,1.5);break;case jt.SKILL_1:(i=new di(e)).position.set(320,280),i.scale.set(1,1);break;case jt.SKILL_2:(i=new _i(e)).position.set(320,320),i.scale.set(1,1);break;case jt.SKILL_3:(i=new Ri(e)).position.set(320,320),i.scale.set(1,1.4);break;case jt.SKILL_4:(i=new Ii(e)).position.set(320,280),i.scale.set(1.5,1.5);break;case jt.SKILL_5:(i=new Ni(e)).position.set(320,280),i.scale.set(2,2);break;case jt.SKILL_6:(i=new Ji(e)).position.set(320,280),i.scale.set(1.5,1.5);break;default:i=new Zt(e)}this.uiGraphContainer.addChild(i),this.registerUpdatingObject(i)},n.spawnText=function(t,e,i,n){var r=this.texts.get("battle_scene_text");if(r){r.text=t;var o=new Ht(r,n);o.position.set(e,i),this.uiGraphContainer.addChild(o),this.registerUpdatingObject(o)}},n.spawnCriticalText=function(t,e){var i=this.texts.get("critical_text");if(i){var n=new Ht(i,(function(){}));n.position.set(t,e),this.uiGraphContainer.addChild(n),this.registerUpdatingObject(n)}},n.spawnBossState=function(t){var e,i=this.uiGraph.get("boss_state");i&&(e=t===qt.SWORD_VERTICAL?"japanese"===this.language?"\u7687\u5e1d\u306f\u5263\u3092\u5782\u76f4\u306b\u69cb\u3048\u3066\u3044\u308b":"The emperor holds the sword vertically":t===qt.SWORD_HORIZON?"japanese"===this.language?"\u7687\u5e1d\u306f\u5263\u3092\u6c34\u5e73\u306b\u69cb\u3048\u3066\u3044\u308b":"The emperor holds the sword horizontally":t===qt.SWORD_UP?"japanese"===this.language?"\u7687\u5e1d\u306f\u5263\u3092\u9ad8\u304f\u4e0a\u3052\u3066\u3044\u308b":"The emperor is raising the sword high":t===qt.SWORD_CROSS?"japanese"===this.language?"\u7687\u5e1d\u306f\u5263\u3092\u4ea4\u5dee\u3055\u305b\u3066\u3044\u308b":"The emperor is crossing the swords":t===qt.SWORD_DOWN?"japanese"===this.language?"\u7687\u5e1d\u306f\u5263\u3092\u4e0b\u306b\u4e0b\u3052\u3066\u3044\u308b":"The emperor is lowering the sword":t===qt.LOW_POSTURE?"japanese"===this.language?"\u7687\u5e1d\u306f\u4f53\u52e2\u3092\u4f4e\u304f\u3057\u3066\u3044\u308b":"The emperor is in a low position":t===qt.RIGHT_FOOT_FORWARD?"japanese"===this.language?"\u7687\u5e1d\u306f\u53f3\u8db3\u3092\u524d\u306b\u51fa\u3057\u3066\u3044\u308b":"The emperor has his right foot forward":t===qt.LEFT_FOOT_FORWARD?"japanese"===this.language?"\u7687\u5e1d\u306f\u5de6\u8db3\u3092\u524d\u306b\u51fa\u3057\u3066\u3044\u308b":"The emperor has his left foot forward":t===qt.RIGHT_HAND_FORWARD?"japanese"===this.language?"\u7687\u5e1d\u306f\u53f3\u624b\u3092\u7a81\u304d\u51fa\u3057\u3066\u3044\u308b":"The emperor sticks out his right hand":t===qt.LEFT_HAND_FORWARD?"japanese"===this.language?"\u7687\u5e1d\u306f\u5de6\u624b\u3092\u7a81\u304d\u51fa\u3057\u3066\u3044\u308b":"The emperor sticks out his left hand":"",i.text=e,i.visible=!0)},n.onEscapeButtonTapped=function(){d.playSe(S.Audio.Se.OptionTap),this.backToTitle.visible=!this.backToTitle.visible},n.onSkillNameTapped=function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];n&&d.playSe(S.Audio.Se.OptionTap),this.selectedSkillType=t;var r=this.uiGraph.get(e),o=this.uiGraph.get("skill_caption");r&&o&&(this.selectedSkillMarker&&(this.selectedSkillMarker.visible=!1),r.visible=!0,this.selectedSkillMarker=r,o.text=i)},n.onItemNameTapped=function(t,e,i,n,r){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];o&&d.playSe(S.Audio.Se.OptionTap);var a=s.P6Y.kN[t],u=this.uiGraph.get("item_texture"),c=this.uiGraph.get(e),l=this.uiGraph.get("item_caption");u&&c&&l&&(u.texture=a,this.selectedItemMarker&&(this.selectedItemMarker.visible=!1),c.visible=!0,this.selectedItemMarker=c,l.text=i,this.selectedItemName=n,this.selectedItemNumberId=r)},n.onPageButtonTapped=function(t){var e;if(d.playSe(S.Audio.Se.OptionTap),1===t)this.itemNames2.visible=!1,this.itemNames1.visible=!0,e="japanese"===this.language?"300HP\u304b\u3044\u3075\u304f":"Recover 300HP",this.onItemNameTapped("items/potion3_04.png","item_marker_1",e,"hpPotion","item_1_number",!1);else if(2===t){var i;this.itemNames1.visible=!1,this.itemNames2.visible=!0,i="japanese"===this.language?"HP\u30fbFP\u30fb\u72b6\u614b\u7570\u5e38\u3092\u5b8c\u5168\u304b\u3044\u3075\u304f":"Completely Recover HP\u30fbFP\u30fbHealth",this.onItemNameTapped("items/aphrodisiac_01.png","item_marker_1",i,"nectar","item_7_number",!1)}},n.prepareUiGraphContainer=function(t){var e=!0,i=!1,n=void 0;try{for(var r,o=t.nodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=Q.getFactory(a.type)||this.getCustomUiGraphFactory(a.type);if(s){var u=s.createUiNodeByGraphElement(a);u&&(a.events&&s.attachUiEventByGraphElement(a.events,u,this),"first_select"===a.type2?(this.uiGraph.set(a.id,u),this.first_select.addChild(u)):"battle_select"===a.type2?(this.uiGraph.set(a.id,u),this.battle_select.addChild(u)):"message"===a.type?this.texts.set(a.id,u):"boss"===a.type2?this.boss=new oe(u):"item"===a.type2?(this.uiGraph.set(a.id,u),this.itemPage.addChild(u)):"item_page_1"===a.type2?(this.uiGraph.set(a.id,u),this.itemNames1.addChild(u)):"item_page_2"===a.type2?(this.uiGraph.set(a.id,u),this.itemNames2.addChild(u)):"skill"===a.type2?(this.uiGraph.set(a.id,u),this.skillPage.addChild(u)):"back_to_title"===a.type2?(this.uiGraph.set(a.id,u),this.backToTitle.addChild(u)):(this.uiGraph.set(a.id,u),this.uiGraphContainer.addChild(u)))}}}catch(c){i=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}},n.selectEffectName=function(t){return t===It.NORMAL_ATTACK?"bossNormalAttack":t===It.SKILL_1?"bossSkill1":t===It.SKILL_2?"bossSkill2":t===It.SKILL_3?"bossSkill3":t===It.SPECIAL_MOVE?"bossSpecialMove":t===It.MAGIC_TOOL_1?"magicTool1":t===It.MAGIC_TOOL_2?"magicTool2":t===It.MAGIC_TOOL_3?"magicTool3":""},n.updatePlayerDamaged=function(){if("idle"!==this.animationType&&"damaged"===this.animationType){if(8===this.elapsedFrameCount)return this.animationType="idle",void(this.uiGraphContainer.position.x=0);if(0===this.elapsedFrameCount)this.uiGraphContainer.position.x=this.uiGraphContainer.position.x+10;else if(this.elapsedFrameCount%2===0){var t;t=this.uiGraphContainer.position.x>0?-1:1,this.uiGraphContainer.position.x=this.uiGraphContainer.position.x+20*t}}},n.playBgmIfNeeded=function(){var t=S.Audio.Bgm.BossBgm;if(!d.hasSound(t)){var e=y.game.loader.resources[t];d.createSound(t,e.buffer),d.playBgm(t,3),0!==d.bgmVolume&&(d.setSoundVolume(S.Audio.Bgm.BossBgm,.005),this.fadeInBgm())}},n.fadeInBgm=function(){var t=d.getSound(S.Audio.Bgm.BossBgm);t&&d.fade(t,3*d.bgmVolume,1.5)},n.loadSaveDataFromDB=function(){h.get("saveData",(function(t){}))},n.onBossHpChanged=function(t){var e=this.uiGraph.get("boss_hp");e&&(e.text=t.toString())},n.onPlayerHpChanged=function(t){var e=this.uiGraph.get("player_hp");e&&(e.text=t.toString())},n.onPlayerFpChanged=function(t){var e=this.uiGraph.get("player_fp");e&&(e.text=t.toString())},n.onTurnAdded=function(t){var e=this.uiGraph.get("turn");e&&(e.text=t.toString())},n.showEndingScene=function(t,e,i){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(d.destroySound(S.Audio.Bgm.BossBgm),this.isOver=!0,y.loadScene(new br(this.language,this.playerStatus,t,e,i)))},n.showTitleScene=function(){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(this.isOver=!0,d.destroySound(S.Audio.Bgm.BossBgm),d.playSe(S.Audio.Se.OptionTap2),y.loadScene(new eo))},i}(st);function Rr(t,e,i){return(Rr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cr(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function Cr(t){return(Cr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fr(t,e){return!e||"object"!==kr(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Er(t,e){return(Er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kr=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function jr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Cr(t);if(e){var r=Cr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Fr(this,i)}}var Gr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Er(t,e)}(i,t);var e=jr(i);function i(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(o=e.call(this)).texts=new Map,o.names=["emperor_name","player_name","emperor_name","player_name","emperor_name","player_name","emperor_name","player_name","emperor_name","player_name","emperor_name"],o.textIdsArray=[["emperor_message_1"],["player_message_1"],["emperor_message_2"],["player_message_2"],["emperor_message_3"],["player_message_3","player_message_4"],["emperor_message_4"],["player_message_5"],["emperor_message_5","emperor_message_6","emperor_message_7"],["player_message_6"],["emperor_message_8","emperor_message_9","emperor_message_10"]],o.sceneName="talk_scene",o.transitionIn=new g(1,0,-.02),o.transitionOut=new g(0,1,.02),o.language=t,o.playerStatus=n,o.itemNumbers=r,o}var n=i.prototype;return n.createInitialResourceList=function(){var t=Rr(Cr(i.prototype),"createInitialResourceList",this).call(this);return t.push(S.UI.MessageWindow),t.push(S.Audio.Bgm.TalkBgm),t},n.update=function(t){Rr(Cr(i.prototype),"update",this).call(this,t)},n.loadInitialResource=function(t){var e,i=this.createInitialResourceList(),n=S.UI.SceneUiGraph(this.sceneName);e="japanese"===this.language?S.Texts.TalkScene.Ja:S.Texts.TalkScene.En,i.push(n),i.push(e);var r=this.filterLoadedAssets(i);r.length>0?y.game.loader.add(r).load(t):t()},n.onResourceLoaded=function(){var t,e=y.game.loader.resources[S.UI.SceneUiGraph(this.sceneName)].data;t="japanese"===this.language?S.Texts.TalkScene.Ja:S.Texts.TalkScene.En;var i=y.game.loader.resources[t].data;this.prepareUiGraphContainer(e),this.prepareUiGraphContainer(i),this.uiGraphContainer.zIndex=1,this.addChild(this.uiGraphContainer),this.initSound();var n=this.textIdsArray.shift(),r=this.names.shift();n&&r&&(this.spawnMessageWindow(n,r),d.playBgm(S.Audio.Bgm.TalkBgm,3))},n.initSound=function(){var t=y.game.loader.resources,e=[S.Audio.Bgm.TalkBgm],i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;d.createSound(s,t[s].buffer)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}},n.spawnMessageWindow=function(t,e){var i=this.createTexts(t),n=this.texts.get(e);if(n){var r=new Rt(i,n,this);r.zIndex=3,this.addChild(r),this.registerUpdatingObject(r)}},n.createTexts=function(t){var e=[],i=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value,u=this.texts.get(s);u&&e.push(u)}}catch(c){n=!0,r=c}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}return e},n.onMessageWindowClosed=function(){0===this.names.length&&this.showNextScene();var t=this.textIdsArray.shift(),e=this.names.shift();t&&e&&this.spawnMessageWindow(t,e)},n.prepareUiGraphContainer=function(t){var e=!0,i=!1,n=void 0;try{for(var r,o=t.nodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=Q.getFactory(a.type)||this.getCustomUiGraphFactory(a.type);if(s){var u=s.createUiNodeByGraphElement(a);u&&(a.events&&s.attachUiEventByGraphElement(a.events,u,this),"message"===a.type?this.texts.set(a.id,u):(this.uiGraph.set(a.id,u),this.uiGraphContainer.addChild(u)))}}}catch(c){i=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}},n.onSkipButtonTapped=function(){d.playSe(S.Audio.Se.OptionTap2),this.showNextScene()},n.showNextScene=function(){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(d.destroySound(S.Audio.Bgm.TalkBgm),this.isOver=!0,y.loadScene(new Ar(this.playerStatus,this.itemNumbers,this.language)))},i}(st);function Ir(t,e,i){return(Ir="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qr(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function qr(t){return(qr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dr(t,e){return!e||"object"!==Br(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lr(t,e){return(Lr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Br=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Mr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=qr(t);if(e){var r=qr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Dr(this,i)}}var Ur=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lr(t,e)}(i,t);var e=Mr(i);function i(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).isPaused=!1,n.equipmentPage=new s.W20,n.itemPage=new s.W20,n.texts=new Map,n.equipmentNames=new Map,n.messageWindowClosed=!0,n.selectedMarker1=null,n.selectedMarker2=null,n.selectedMarker3=null,n.selectedMarker4=null,n.rank=null,n.selectedEquipmentParam=null,n.equipmentHPs=new Ct,n.equipmentFPs=new Ct,n.equipmentATKs=new Ct,n.equipmentDEFs=new Ct,n.equipmentDVs=new Ct,n.equipmentHITs=new Ct,n.equipmentCRITs=new Ct,n.weaponE=null,n.headE=null,n.bodyE=null,n.armE=null,n.footE=null,n.initialPlayerStatus=new Ft,n.playerStatus=new Ft,n.equipingWeaponParam=null,n.equipingHeadParam=null,n.equipingBodyParam=null,n.equipingArmParam=null,n.equipingFootParam=null,n.itemNames1=new s.W20,n.itemNames2=new s.W20,n.itemNumbers=new Map,n.firstSelectIsDone=!1,n.itemCp=2700,n.transitionIn=new g(1,0,-.02),n.transitionOut=new g(0,1,.02),n.sceneName="inventory_scene",n.language=t;var r=!0,o=!1,a=void 0;try{for(var u,c=S.ItemList[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var l=u.value;n.itemNumbers.set(l,5)}}catch(p){o=!0,a=p}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}var n=i.prototype;return n.beginTransitionIn=function(t,e){var n=this;Ir(qr(i.prototype),"beginTransitionIn",this).call(this,(function(){t(n)}),e)},n.createInitialResourceList=function(){return Ir(qr(i.prototype),"createInitialResourceList",this).call(this).concat(Rt.resourceList,S.Items,S.EquipMents,[S.Audio.Se.ShowNextText,S.Audio.Se.Equip,S.Audio.Se.minus,S.Audio.Se.plus,S.UI.OptionFrame])},n.loadInitialResource=function(t){var e,i=this.createInitialResourceList(),n=S.UI.SceneUiGraph(this.sceneName);e="japanese"===this.language?S.Texts.InventoryScene.Ja:S.Texts.InventoryScene.En,i.push(n),i.push(e);var r=this.filterLoadedAssets(i);r.length>0?y.game.loader.add(r).load(t):t()},n.onInitialResourceLoaded=function(){var t,e=[],i=S.UI.SceneUiGraph(this.sceneName);t="japanese"===this.language?S.Texts.InventoryScene.Ja:S.Texts.InventoryScene.En;var n=y.game.loader.resources[i].data.nodes;n=n.concat(y.game.loader.resources[t].data.nodes);var r=!0,o=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;"sprite"===c.type&&e.push({name:c.params.textureName,url:c.params.url})}}catch(l){o=!0,a=l}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return e},n.onResourceLoaded=function(){var t,e=y.game.loader.resources[S.UI.SceneUiGraph(this.sceneName)].data;t="japanese"===this.language?S.Texts.InventoryScene.Ja:S.Texts.InventoryScene.En;var i,n=y.game.loader.resources[t].data;this.prepareUiGraphContainer(e),this.prepareUiGraphContainer(n),this.uiGraphContainer.zIndex=1,this.addChild(this.uiGraphContainer),this.equipmentPage.visible=!1,this.addChild(this.equipmentPage),this.itemNames2.visible=!1,this.itemPage.addChild(this.itemNames1),this.itemPage.addChild(this.itemNames2),this.addChild(this.itemPage),this.initSound(),this.initPlayerStatus(),this.onInventoryTypeSelected("equipment"),this.onEquipmentTypeSelected("weapon_marker",["weapon_name_1","weapon_name_2","weapon_name_3","weapon_name_4","weapon_name_5","weapon_name_6"],{markerName:"equipment_1_marker",eName:"equipment_1_e",textureName:"equipments/weapon08_03.png",type:"weapon",rank:"legendary",hp:0,fp:100,atk:5,def:0,dv:0,hit:1,crit:3}),i="japanese"===this.language?"300HP\u304b\u3044\u3075\u304f":"Recover 300HP",this.onItemNameTapped("items/potion3_04.png","item_marker_1",i),this.spawnMessageWindow(["prepare_battle"],"hero_name")},n.initSound=function(){var t=y.game.loader.resources,e=[S.Audio.Se.ShowNextText,S.Audio.Se.Equip,S.Audio.Se.minus,S.Audio.Se.plus],i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;d.createSound(s,t[s].buffer)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}},n.update=function(t){Ir(qr(i.prototype),"update",this).call(this,t),this.transitionIn.isActive()?this.transitionIn.update(t):this.transitionOut.isActive()&&this.transitionOut.update(t)},n.spawnMessageWindow=function(t,e){var i=this.createTexts(t),n=this.texts.get(e);if(n){var r=new Rt(i,n,this);r.zIndex=3,this.messageWindowClosed=!1,this.addChild(r),this.registerUpdatingObject(r)}},n.createTexts=function(t){var e=[],i=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value,u=this.texts.get(s);u&&e.push(u)}}catch(c){n=!0,r=c}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}return e},n.onMessageWindowClosed=function(){this.messageWindowClosed=!0,this.firstSelectIsDone=!0},n.getCustomUiGraphFactory=function(t){return null},n.updatePlayerStatus=function(){var t=0,e=0,i=0,n=0,r=0,o=0,a=0,s=!0,u=!1,c=void 0;try{for(var l,p=Object.values(this.equipmentHPs)[Symbol.iterator]();!(s=(l=p.next()).done);s=!0){t+=l.value}}catch(it){u=!0,c=it}finally{try{s||null==p.return||p.return()}finally{if(u)throw c}}var h=!0,f=!1,d=void 0;try{for(var y,m=Object.values(this.equipmentFPs)[Symbol.iterator]();!(h=(y=m.next()).done);h=!0){e+=y.value}}catch(it){f=!0,d=it}finally{try{h||null==m.return||m.return()}finally{if(f)throw d}}var v=!0,g=!1,b=void 0;try{for(var S,_=Object.values(this.equipmentATKs)[Symbol.iterator]();!(v=(S=_.next()).done);v=!0){i+=S.value}}catch(it){g=!0,b=it}finally{try{v||null==_.return||_.return()}finally{if(g)throw b}}var w=!0,O=!1,P=void 0;try{for(var T,x=Object.values(this.equipmentDEFs)[Symbol.iterator]();!(w=(T=x.next()).done);w=!0){n+=T.value}}catch(it){O=!0,P=it}finally{try{w||null==x.return||x.return()}finally{if(O)throw P}}var A=!0,R=!1,C=void 0;try{for(var F,E=Object.values(this.equipmentDVs)[Symbol.iterator]();!(A=(F=E.next()).done);A=!0){r+=F.value}}catch(it){R=!0,C=it}finally{try{A||null==E.return||E.return()}finally{if(R)throw C}}var k=!0,j=!1,G=void 0;try{for(var I,q=Object.values(this.equipmentHITs)[Symbol.iterator]();!(k=(I=q.next()).done);k=!0){o+=I.value}}catch(it){j=!0,G=it}finally{try{k||null==q.return||q.return()}finally{if(j)throw G}}var D=!0,L=!1,B=void 0;try{for(var M,U=Object.values(this.equipmentCRITs)[Symbol.iterator]();!(D=(M=U.next()).done);D=!0){a+=M.value}}catch(it){L=!0,B=it}finally{try{D||null==U.return||U.return()}finally{if(L)throw B}}this.playerStatus.hp=this.initialPlayerStatus.hp+t,this.playerStatus.fp=this.initialPlayerStatus.fp+e,this.playerStatus.atk=this.initialPlayerStatus.atk+i,this.playerStatus.def=this.initialPlayerStatus.def+n,this.playerStatus.dv=this.initialPlayerStatus.dv+r,this.playerStatus.hit=this.initialPlayerStatus.hit+o,this.playerStatus.crit=this.initialPlayerStatus.crit+a;var N=this.uiGraph.get("max_hp"),W=this.uiGraph.get("max_fp"),H=this.uiGraph.get("max_atk"),K=this.uiGraph.get("max_def"),V=this.uiGraph.get("max_hit"),Y=this.uiGraph.get("max_dv"),z=this.uiGraph.get("max_crit");if(H&&z&&K&&Y&&W&&N&&V){var J=this.uiGraph.get("hp"),X=this.uiGraph.get("fp"),Z=this.uiGraph.get("atk"),$=this.uiGraph.get("def"),Q=this.uiGraph.get("dv"),tt=this.uiGraph.get("hit"),et=this.uiGraph.get("crit");J&&X&&Z&&$&&Q&&tt&&et&&(this.playerStatus.hp>=1200?(this.playerStatus.hp=1200,J.visible=!1,N.visible=!0):(J.visible=!0,N.visible=!1),this.playerStatus.fp>=1200?(this.playerStatus.fp=1200,X.visible=!1,W.visible=!0):(X.visible=!0,W.visible=!1),this.playerStatus.atk>=10?(this.playerStatus.atk=10,Z.visible=!1,H.visible=!0):(Z.visible=!0,H.visible=!1),this.playerStatus.def>=10?(this.playerStatus.def=10,$.visible=!1,K.visible=!0):($.visible=!0,K.visible=!1),this.playerStatus.dv>=10?(this.playerStatus.dv=10,Q.visible=!1,Y.visible=!0):(Q.visible=!0,Y.visible=!1),this.playerStatus.hit>=10?(this.playerStatus.hit=10,tt.visible=!1,V.visible=!0):(tt.visible=!0,V.visible=!1),this.playerStatus.crit>=10?(this.playerStatus.crit=10,et.visible=!1,z.visible=!0):(et.visible=!0,z.visible=!1),this.initPlayerStatus())}},n.updateCp=function(){var t=0;t+=200+2*(this.playerStatus.hp-800),t+=this.playerStatus.fp-500+100,t+=200*this.playerStatus.atk,t+=200*this.playerStatus.def,t+=100*this.playerStatus.dv,t+=100*this.playerStatus.hit,t+=100*this.playerStatus.crit,t+=this.itemCp,this.playerStatus.cp=t,this.updateDifficulty();var e=this.uiGraph.get("cp"),i=this.uiGraph.get("cp_2");t&&(e.text=t.toString(),i.text=t.toString())},n.updateDifficulty=function(){var t=this.uiGraph.get("easy"),e=this.uiGraph.get("easy_2"),i=this.uiGraph.get("normal"),n=this.uiGraph.get("normal_2"),r=this.uiGraph.get("hard"),o=this.uiGraph.get("hard_2");t&&e&&i&&n&&r&&o&&(this.playerStatus.cp>=8e3?(t.visible=!0,e.visible=!0,i.visible=!1,n.visible=!1,r.visible=!1,o.visible=!1):this.playerStatus.cp<8e3&&this.playerStatus.cp>=7e3?(t.visible=!1,e.visible=!1,i.visible=!0,n.visible=!0,r.visible=!1,o.visible=!1):this.playerStatus.cp<7e3&&(t.visible=!1,e.visible=!1,i.visible=!1,n.visible=!1,r.visible=!0,o.visible=!0))},n.initPlayerStatus=function(){var t=this.uiGraph.get("hp"),e=this.uiGraph.get("fp"),i=this.uiGraph.get("atk"),n=this.uiGraph.get("def"),r=this.uiGraph.get("dv"),o=this.uiGraph.get("hit"),a=this.uiGraph.get("crit");t&&e&&i&&n&&r&&o&&a&&(t.text=this.playerStatus.hp.toString(),e.text=this.playerStatus.fp.toString(),i.text=this.playerStatus.atk.toString(),n.text=this.playerStatus.def.toString(),r.text=this.playerStatus.dv.toString(),o.text=this.playerStatus.hit.toString(),a.text=this.playerStatus.crit.toString())},n.onInventoryTypeSelected=function(t){if(this.messageWindowClosed)if(this.firstSelectIsDone&&d.playSe(S.Audio.Se.OptionTap),"equipment"===t){this.equipmentPage.visible=!0,this.itemPage.visible=!1,this.selectedMarker1&&(this.selectedMarker1.visible=!1);var e=this.uiGraph.get("equipment_marker");if(!e)return;e.visible=!0,this.selectedMarker1=e}else if("item"===t){this.equipmentPage.visible=!1,this.itemPage.visible=!0,this.selectedMarker1&&(this.selectedMarker1.visible=!1);var i=this.uiGraph.get("item_marker");if(!i)return;i.visible=!0,this.selectedMarker1=i}},n.onEquipmentTypeSelected=function(t,e,i){if(this.messageWindowClosed){this.firstSelectIsDone&&d.playSe(S.Audio.Se.OptionTap),this.weaponE&&(this.weaponE.visible=!1),this.headE&&(this.headE.visible=!1),this.bodyE&&(this.bodyE.visible=!1),this.armE&&(this.armE.visible=!1),this.footE&&(this.footE.visible=!1),"weapon"===i.type&&this.weaponE&&(this.weaponE.visible=!0),"head"===i.type&&this.headE&&(this.headE.visible=!0),"body"===i.type&&this.bodyE&&(this.bodyE.visible=!0),"arm"===i.type&&this.armE&&(this.armE.visible=!0),"foot"===i.type&&this.footE&&(this.footE.visible=!0),this.equipmentNames.forEach((function(t,e){t.visible=!1}));var n=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value,c=this.equipmentNames.get(u);c&&(c.visible=!0)}}catch(p){r=!0,o=p}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}this.selectedMarker2&&(this.selectedMarker2.visible=!1);var l=this.uiGraph.get(t);l&&(l.visible=!0,this.selectedMarker2=l,this.selectedEquipmentParam=i,"weapon"===i.type&&this.equipingWeaponParam?this.onEquipmentTypeSelected2(this.equipingWeaponParam,!1):"head"===i.type&&this.equipingHeadParam?this.onEquipmentTypeSelected2(this.equipingHeadParam,!1):"body"===i.type&&this.equipingBodyParam?this.onEquipmentTypeSelected2(this.equipingBodyParam,!1):"arm"===i.type&&this.equipingArmParam?this.onEquipmentTypeSelected2(this.equipingArmParam,!1):"foot"===i.type&&this.equipingFootParam?this.onEquipmentTypeSelected2(this.equipingFootParam,!1):this.onEquipmentTypeSelected2(i,!1))}},n.onEquipmentTypeSelected2=function(t){var e,i,n,r,o,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.messageWindowClosed){this.firstSelectIsDone&&a&&d.playSe(S.Audio.Se.OptionTap),this.selectedEquipmentParam=t,this.selectedMarker3&&(this.selectedMarker3.visible=!1);var u=this.uiGraph.get(t.markerName);if(u){u.visible=!0,this.selectedMarker3=u,this.rank&&(this.rank.visible=!1);var c=this.uiGraph.get(t.rank);if(c){c.visible=!0,this.rank=c;var l=s.P6Y.kN[t.textureName],p=this.uiGraph.get("equipment_texture");if(p){p.texture=l;var h=this.uiGraph.get("equipment_hp"),f=this.uiGraph.get("equipment_fp"),y=this.uiGraph.get("equipment_atk"),m=this.uiGraph.get("equipment_def"),v=this.uiGraph.get("equipment_dv"),g=this.uiGraph.get("equipment_hit"),b=this.uiGraph.get("equipment_crit");if(h&&f&&y&&m&&v&&g&&b){h.text=t.hp.toString(),f.text=t.fp.toString(),y.text=t.atk.toString(),m.text=t.def.toString(),v.text=t.dv.toString(),g.text=t.hit.toString(),b.text=t.crit.toString();var _=this.uiGraph.get("equip_button"),w=this.uiGraph.get("equip_button_text"),O=this.uiGraph.get("unEquip_button"),P=this.uiGraph.get("unEquip_button_text");_&&w&&O&&P&&((null===(e=this.equipingWeaponParam)||void 0===e?void 0:e.textureName)===this.selectedEquipmentParam.textureName||(null===(i=this.equipingHeadParam)||void 0===i?void 0:i.textureName)===this.selectedEquipmentParam.textureName||(null===(n=this.equipingBodyParam)||void 0===n?void 0:n.textureName)===this.selectedEquipmentParam.textureName||(null===(r=this.equipingArmParam)||void 0===r?void 0:r.textureName)===this.selectedEquipmentParam.textureName||(null===(o=this.equipingFootParam)||void 0===o?void 0:o.textureName)===this.selectedEquipmentParam.textureName?(_.visible=!1,w.visible=!1,O.visible=!0,P.visible=!0):(_.visible=!0,w.visible=!0,O.visible=!1,P.visible=!1))}}}}}},n.onUnEquipButtonTapped=function(){if(this.messageWindowClosed&&this.selectedEquipmentParam){d.playSe(S.Audio.Se.Equip);var t=this.uiGraph.get("equip_button"),e=this.uiGraph.get("equip_button_text"),i=this.uiGraph.get("unEquip_button"),n=this.uiGraph.get("unEquip_button_text");t&&e&&i&&n&&(t.visible=!0,e.visible=!0,i.visible=!1,n.visible=!1,"weapon"===this.selectedEquipmentParam.type?(this.equipmentHPs.weapon=0,this.equipmentFPs.weapon=0,this.equipmentATKs.weapon=0,this.equipmentDEFs.weapon=0,this.equipmentDVs.weapon=0,this.equipmentHITs.weapon=0,this.equipmentCRITs.weapon=0,this.weaponE&&(this.weaponE.visible=!1),this.weaponE=null,this.equipingWeaponParam=null):"head"===this.selectedEquipmentParam.type?(this.equipmentHPs.head=0,this.equipmentFPs.head=0,this.equipmentATKs.head=0,this.equipmentDEFs.head=0,this.equipmentDVs.head=0,this.equipmentHITs.head=0,this.equipmentCRITs.head=0,this.headE&&(this.headE.visible=!1),this.headE=null,this.equipingHeadParam=null):"body"===this.selectedEquipmentParam.type?(this.equipmentHPs.body=0,this.equipmentFPs.body=0,this.equipmentATKs.body=0,this.equipmentDEFs.body=0,this.equipmentDVs.body=0,this.equipmentHITs.body=0,this.equipmentCRITs.body=0,this.bodyE&&(this.bodyE.visible=!1),this.bodyE=null,this.equipingBodyParam=null):"arm"===this.selectedEquipmentParam.type?(this.equipmentHPs.arm=0,this.equipmentFPs.arm=0,this.equipmentATKs.arm=0,this.equipmentDEFs.arm=0,this.equipmentDVs.arm=0,this.equipmentHITs.arm=0,this.equipmentCRITs.arm=0,this.armE&&(this.armE.visible=!1),this.armE=null,this.equipingArmParam=null):"foot"===this.selectedEquipmentParam.type&&(this.equipmentHPs.foot=0,this.equipmentFPs.foot=0,this.equipmentATKs.foot=0,this.equipmentDEFs.foot=0,this.equipmentDVs.foot=0,this.equipmentHITs.foot=0,this.equipmentCRITs.foot=0,this.footE&&(this.footE.visible=!1),this.footE=null,this.equipingFootParam=null),this.updatePlayerStatus(),this.updateCp())}},n.onEquipButtonTapped=function(){if(this.messageWindowClosed&&this.selectedEquipmentParam){d.playSe(S.Audio.Se.Equip);var t=this.uiGraph.get("equip_button"),e=this.uiGraph.get("equip_button_text"),i=this.uiGraph.get("unEquip_button"),n=this.uiGraph.get("unEquip_button_text");if(t&&e&&i&&n){if(t.visible=!1,e.visible=!1,i.visible=!0,n.visible=!0,"weapon"===this.selectedEquipmentParam.type){this.equipmentHPs.weapon=this.selectedEquipmentParam.hp,this.equipmentFPs.weapon=this.selectedEquipmentParam.fp,this.equipmentATKs.weapon=this.selectedEquipmentParam.atk,this.equipmentDEFs.weapon=this.selectedEquipmentParam.def,this.equipmentDVs.weapon=this.selectedEquipmentParam.dv,this.equipmentHITs.weapon=this.selectedEquipmentParam.hit,this.equipmentCRITs.weapon=this.selectedEquipmentParam.crit,this.weaponE&&(this.weaponE.visible=!1);var r=this.uiGraph.get(this.selectedEquipmentParam.eName);if(!r)return;r.visible=!0,this.weaponE=r,this.equipingWeaponParam=this.selectedEquipmentParam}else if("head"===this.selectedEquipmentParam.type){this.equipmentHPs.head=this.selectedEquipmentParam.hp,this.equipmentFPs.head=this.selectedEquipmentParam.fp,this.equipmentATKs.head=this.selectedEquipmentParam.atk,this.equipmentDEFs.head=this.selectedEquipmentParam.def,this.equipmentDVs.head=this.selectedEquipmentParam.dv,this.equipmentHITs.head=this.selectedEquipmentParam.hit,this.equipmentCRITs.head=this.selectedEquipmentParam.crit,this.headE&&(this.headE.visible=!1);var o=this.uiGraph.get(this.selectedEquipmentParam.eName);if(!o)return;o.visible=!0,this.headE=o,this.equipingHeadParam=this.selectedEquipmentParam}else if("body"===this.selectedEquipmentParam.type){this.equipmentHPs.body=this.selectedEquipmentParam.hp,this.equipmentFPs.body=this.selectedEquipmentParam.fp,this.equipmentATKs.body=this.selectedEquipmentParam.atk,this.equipmentDEFs.body=this.selectedEquipmentParam.def,this.equipmentDVs.body=this.selectedEquipmentParam.dv,this.equipmentHITs.body=this.selectedEquipmentParam.hit,this.equipmentCRITs.body=this.selectedEquipmentParam.crit,this.bodyE&&(this.bodyE.visible=!1);var a=this.uiGraph.get(this.selectedEquipmentParam.eName);if(!a)return;a.visible=!0,this.bodyE=a,this.equipingBodyParam=this.selectedEquipmentParam}else if("arm"===this.selectedEquipmentParam.type){this.equipmentHPs.arm=this.selectedEquipmentParam.hp,this.equipmentFPs.arm=this.selectedEquipmentParam.fp,this.equipmentATKs.arm=this.selectedEquipmentParam.atk,this.equipmentDEFs.arm=this.selectedEquipmentParam.def,this.equipmentDVs.arm=this.selectedEquipmentParam.dv,this.equipmentHITs.arm=this.selectedEquipmentParam.hit,this.equipmentCRITs.arm=this.selectedEquipmentParam.crit,this.armE&&(this.armE.visible=!1);var s=this.uiGraph.get(this.selectedEquipmentParam.eName);if(!s)return;s.visible=!0,this.armE=s,this.equipingArmParam=this.selectedEquipmentParam}else if("foot"===this.selectedEquipmentParam.type){this.equipmentHPs.foot=this.selectedEquipmentParam.hp,this.equipmentFPs.foot=this.selectedEquipmentParam.fp,this.equipmentATKs.foot=this.selectedEquipmentParam.atk,this.equipmentDEFs.foot=this.selectedEquipmentParam.def,this.equipmentDVs.foot=this.selectedEquipmentParam.dv,this.equipmentHITs.foot=this.selectedEquipmentParam.hit,this.equipmentCRITs.foot=this.selectedEquipmentParam.crit,this.footE&&(this.footE.visible=!1);var u=this.uiGraph.get(this.selectedEquipmentParam.eName);if(!u)return;u.visible=!0,this.footE=u,this.equipingFootParam=this.selectedEquipmentParam}this.updatePlayerStatus(),this.updateCp()}}},n.onPageButtonTapped=function(t){var e;if(1===t)this.itemNames2.visible=!1,this.itemNames1.visible=!0,e="japanese"===this.language?"300HP\u304b\u3044\u3075\u304f":"Recover 300HP",this.onItemNameTapped("items/potion3_04.png","item_marker_1",e);else if(2===t){var i;this.itemNames1.visible=!1,this.itemNames2.visible=!0,i="japanese"===this.language?"HP\u30fbFP\u30fb\u72b6\u614b\u7570\u5e38\u3092\u5b8c\u5168\u304b\u3044\u3075\u304f":"Completely Recover HP\u30fbFP\u30fbHealth",this.onItemNameTapped("items/aphrodisiac_01.png","item_marker_1",i)}},n.onItemNameTapped=function(t,e,i){if(this.messageWindowClosed){this.firstSelectIsDone&&d.playSe(S.Audio.Se.OptionTap);var n=s.P6Y.kN[t],r=this.uiGraph.get("item_texture"),o=this.uiGraph.get(e),a=this.uiGraph.get("item_caption");r&&o&&a&&(r.texture=n,this.selectedMarker4&&(this.selectedMarker4.visible=!1),o.visible=!0,this.selectedMarker4=o,a.text=i)}},n.onItemNumberChanged=function(t,e,i,n,r){if(this.messageWindowClosed){var o=this.uiGraph.get(e),a=this.uiGraph.get(i),s=this.itemNumbers.get(t);o&&a&&void 0!==s&&(0===s&&-1===n||10===s&&1===n||(-1===n?d.playSe(S.Audio.Se.minus):1===n&&d.playSe(S.Audio.Se.plus),this.itemNumbers.set(t,s+=n),this.itemCp+=r,this.updateCp(),10===s?(o.visible=!1,a.visible=!0):(o.visible=!0,a.visible=!1),o.text=s.toString()))}},n.prepareUiGraphContainer=function(t){var e=!0,i=!1,n=void 0;try{for(var r,o=t.nodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=Q.getFactory(a.type)||this.getCustomUiGraphFactory(a.type);if(s){var u=s.createUiNodeByGraphElement(a);u&&(a.events&&s.attachUiEventByGraphElement(a.events,u,this),"message"===a.type?this.texts.set(a.id,u):"equipment"===a.type2?(this.uiGraph.set(a.id,u),this.equipmentPage.addChild(u)):"item"===a.type2?(this.uiGraph.set(a.id,u),this.itemPage.addChild(u)):"equipment_name"===a.type2?(this.equipmentPage.addChild(u),this.equipmentNames.set(a.id,u)):"item_page_1"===a.type2?(this.itemNames1.addChild(u),this.uiGraph.set(a.id,u)):"item_page_2"===a.type2?(this.itemNames2.addChild(u),this.uiGraph.set(a.id,u)):(this.uiGraph.set(a.id,u),this.uiGraphContainer.addChild(u)))}}}catch(c){i=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}},n.onBattleButtonTapped=function(){this.messageWindowClosed&&!this.isOver&&(d.paused=!1,d.sceneIsPaused=!1,d.playSe(S.Audio.Se.OptionTap2),y.loadScene(new Gr(this.language,this.playerStatus,this.itemNumbers)),this.isOver=!0)},i}(st);function Nr(t,e,i){return(Nr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wr(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function Wr(t){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hr(t,e){return!e||"object"!==Vr(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kr(t,e){return(Kr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vr=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Yr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Wr(t);if(e){var r=Wr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Hr(this,i)}}var zr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kr(t,e)}(i,t);var e=Yr(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).lanuguage="",n.sceneName="opening_scene",n.lanuguage=t,n.transitionIn=new g(1,0,-.02),n.transitionOut=new g(0,1,.02),n}var n=i.prototype;return n.createInitialResourceList=function(){var t=Nr(Wr(i.prototype),"createInitialResourceList",this).call(this);return t.push(S.Audio.Se.OptionTap2),t},n.onResourceLoaded=function(){if(Nr(Wr(i.prototype),"onResourceLoaded",this).call(this),"japanese"===this.lanuguage){var t=this.uiGraph.get("opening_text");if(!t)return;this.uiGraphContainer.addChild(t)}else{var e=this.uiGraph.get("opening_text_en");if(!e)return;this.uiGraphContainer.addChild(e)}this.addChild(this.uiGraphContainer),this.initSound()},n.initSound=function(){var t=y.game.loader.resources,e=[S.Audio.Se.OptionTap2],i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;d.createSound(s,t[s].buffer)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}},n.showInventoryScene=function(){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(this.isOver=!0,d.playSe(S.Audio.Se.OptionTap2),y.loadScene(new Ur(this.lanuguage)))},n.prepareUiGraphContainer=function(t){var e=!0,i=!1,n=void 0;try{for(var r,o=t.nodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=Q.getFactory(a.type)||this.getCustomUiGraphFactory(a.type);if(s){var u=s.createUiNodeByGraphElement(a);u&&(a.events&&s.attachUiEventByGraphElement(a.events,u,this),this.uiGraph.set(a.id,u),"text"!==a.type&&this.uiGraphContainer.addChild(u))}}}catch(c){i=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}},i}(st);function Jr(t,e,i){return(Jr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xr(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function Xr(t){return(Xr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zr(t,e){return!e||"object"!==Qr(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $r(t,e){return($r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qr=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function to(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Xr(t);if(e){var r=Xr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Zr(this,i)}}var eo=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$r(t,e)}(i,t);var e=to(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=e.call(this)).languageOption=new s.W20,t.equipment=new s.jyi,t.equipmentMoveRate=0,t.isEquipmentIn=!0,t.sceneName="title_scene",t.transitionIn=new g(1,0,-.02),t.transitionOut=new g(0,1,.02),t.loadSaveDataFromDB(),t}var n=i.prototype;return n.createInitialResourceList=function(){var t=Jr(Xr(i.prototype),"createInitialResourceList",this).call(this);return t.push(S.Audio.Bgm.TitleBgm),t.push(S.Audio.Se.OptionTap),t.push(S.Audio.Se.OptionTap3),t.concat(S.EquipMents)},n.update=function(t){Jr(Xr(i.prototype),"update",this).call(this,t),this.updateEquipMentIn(),this.updateEquipMentOut()},n.onResourceLoaded=function(){Jr(Xr(i.prototype),"onResourceLoaded",this).call(this),this.equipment.texture=this.getRandomTexture(),this.equipment.position.x=0,this.equipment.position.y=250,this.equipment.scale.set(.4,.4),this.equipment.anchor.set(1,.5),this.equipmentMoveDistance=320+this.equipment.width/2,this.uiGraphContainer.addChild(this.equipment),this.languageOption.visible=!1,this.uiGraphContainer.addChild(this.languageOption),this.addChild(this.uiGraphContainer),this.loadLanguageFromDB(),this.initSound(),this.playBgmIfNeeded()},n.updateEquipMentIn=function(){this.isEquipmentIn&&(this.equipment.position.x>=this.equipmentMoveDistance?(this.equipment.position.x=this.equipmentMoveDistance,this.isEquipmentIn=!1,this.elapsedFrameCount=0,this.equipmentMoveRate=0):(this.equipmentMoveRate+=.01,this.equipment.position.x=this.equipmentMoveDistance*this.easeOutQuint(this.equipmentMoveRate)))},n.updateEquipMentOut=function(){this.isEquipmentIn||this.elapsedFrameCount<=60||(this.equipment.position.x>=2*this.equipmentMoveDistance?(this.equipment.position.x=0,this.isEquipmentIn=!0,this.equipment.texture=this.getRandomTexture(),this.equipmentMoveRate=0):(this.equipmentMoveRate+=.01,this.equipment.position.x=this.equipmentMoveDistance+this.equipmentMoveDistance*this.easeOutQuint(this.equipmentMoveRate)))},n.getRandomTexture=function(){var t=S.EquipMents[Math.floor(Math.random()*S.EquipMents.length)];return s.P6Y.kN[t]},n.initSound=function(){var t=y.game.loader.resources,e=[S.Audio.Se.OptionTap,S.Audio.Se.OptionTap3],i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;d.createSound(s,t[s].buffer)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}},n.onLanguageSelected=function(t){d.playSe(S.Audio.Se.OptionTap3);var e=this.uiGraph.get("new_game_button"),i=this.uiGraph.get("option_button"),n=this.uiGraph.get("credit_button");e&&i&&n&&(e.interactive=!0,i.interactive=!0,n.interactive=!0,this.languageOption.visible=!1,this.language=t,this.saveLanguageToDB(t))},n.onNewGameButtonTouched=function(){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(d.destroySound(S.Audio.Bgm.TitleBgm),d.playSe(S.Audio.Se.OptionTap2),y.loadScene(new zr(this.language)),this.isOver=!0)},n.showOptionScene=function(){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(this.isOver=!0,d.playSe(S.Audio.Se.OptionTap2),y.loadScene(new dt(this.language)))},n.showCreditScene=function(){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(this.isOver=!0,d.playSe(S.Audio.Se.OptionTap2),y.loadScene(new _t))},n.showLanguageOption=function(){var t=this.uiGraph.get("new_game_button"),e=this.uiGraph.get("option_button"),i=this.uiGraph.get("credit_button");t&&e&&i&&(t.interactive=!1,e.interactive=!1,i.interactive=!1,this.languageOption.visible=!0)},n.saveLanguageToDB=function(t){h.put("language",t)},n.loadLanguageFromDB=function(){var t=this;h.get("language",(function(e){e?t.language=e:t.showLanguageOption()}))},n.prepareUiGraphContainer=function(t){var e=!0,i=!1,n=void 0;try{for(var r,o=t.nodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=Q.getFactory(a.type)||this.getCustomUiGraphFactory(a.type);if(s){var u=s.createUiNodeByGraphElement(a);u&&(a.events&&s.attachUiEventByGraphElement(a.events,u,this),this.uiGraph.set(a.id,u),"language_option_sprite"===a.type||"language_option_text"===a.type?this.languageOption.addChild(u):this.uiGraphContainer.addChild(u))}}}catch(c){i=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}},n.playBgmIfNeeded=function(){var t=S.Audio.Bgm.TitleBgm;if(!d.hasSound(t)){var e=y.game.loader.resources[t];d.createSound(t,e.buffer),d.playBgm(t,1.7),0!==d.bgmVolume&&(d.setSoundVolume(S.Audio.Bgm.TitleBgm,.005),this.fadeInBgm())}},n.fadeInBgm=function(){var t=d.getSound(S.Audio.Bgm.TitleBgm);t&&d.fade(t,1.7*d.bgmVolume,1.5)},n.loadSaveDataFromDB=function(){h.get("saveData",(function(t){}))},n.easeOutQuint=function(t){return 1-Math.pow(1-t,5)},i}(st);function io(t,e,i){return(io="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=no(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function no(t){return(no=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ro(t,e){return!e||"object"!==ao(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function oo(t,e){return(oo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ao=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function so(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=no(t);if(e){var r=no(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ro(this,i)}}var uo=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oo(t,e)}(i,t);var e=so(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=e.call(this)).sceneName="start_scene",t.transitionIn=new g(1,0,-.02),t.transitionOut=new g(0,1,.02),t.interactive=!0,t.on("pointerdown",(function(){t.showTitleScene()})),t}var n=i.prototype;return n.createInitialResourceList=function(){var t=io(no(i.prototype),"createInitialResourceList",this).call(this);return t.push(S.Audio.Se.OptionTap2),t},n.update=function(t){io(no(i.prototype),"update",this).call(this,t),this.elapsedFrameCount%40===0&&(this.startButton.visible=!this.startButton.visible)},n.onResourceLoaded=function(){io(no(i.prototype),"onResourceLoaded",this).call(this),this.addChild(this.uiGraphContainer);var t=this.uiGraph.get("start_button");t&&(this.startButton=t,this.initSound())},n.initSound=function(){var t=y.game.loader.resources,e=[S.Audio.Se.OptionTap2],i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;d.createSound(s,t[s].buffer)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}},n.showTitleScene=function(){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(this.isOver=!0,d.playSe(S.Audio.Se.OptionTap2),y.loadScene(new eo))},i}(st);var co=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.startGame=function(){t.initGame()},t.initGame=function(){y.start({width:640,height:640,backgroundColor:0}),y.loadScene(new uo)},t}(),lo=i(7294);function po(){return(0,lo.useEffect)((function(){co.startGame()})),(0,n.jsx)("div",{id:"play-game"})}}}]);