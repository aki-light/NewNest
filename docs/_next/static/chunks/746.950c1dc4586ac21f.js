"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[746],{7746:function(t,e,i){i.r(e),i.d(e,{default:function(){return ho}});var n=i(5893),r=Object.freeze({ResourceBaseUrl:"/game_sources/rpg_1/assets/"}),o=i(8866),a=i(3631);function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.loop=!1,this.played=!1,this.paused=!1,this.offset=0,this.playedAt=0,this.volumeRate=void 0,h.sharedContext&&(this.buffer=e,this.gainNode=h.sharedContext.createGain())}var e,i,n,r=t.prototype;return r.play=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,n=this,r=h.sharedContext;r&&(this.loop=t,this.source=r.createBufferSource(),this.source.loop=this.loop,this.source.loopStart=0,this.source.loopEnd=this.buffer.duration,this.source.buffer=this.buffer,this.source.onended=function(){return n.stop()},i?(this.gainNode.gain.value=t?h.bgmVolume*i:h.seVolume*i,this.volumeRate=i):this.gainNode.gain.value=t?h.bgmVolume:h.seVolume,this.gainNode.connect(r.destination),this.source.connect(this.gainNode),this.source.start(0,e),this.played=!0,this.playedAt=r.currentTime-e,this.paused=!1)},r.stop=function(){if(this.source&&this.played){this.source.disconnect();try{this.source.buffer=null}catch(t){}this.source.onended=null,this.source=null,this.paused=!1}},r.pause=function(){!this.paused&&this.played&&this.source&&(this.offset=this.elapsedTime,this.stop(),this.paused=!0)},r.resume=function(){this.paused&&this.played&&(this.play(this.loop,this.offset,this.volumeRate),this.paused=!1)},r.isPosed=function(){return this.paused},e=t,(i=[{key:"volume",get:function(){return this.gainNode?this.gainNode.gain.value:-1},set:function(t){this.gainNode&&(this.gainNode.gain.value=t)}},{key:"elapsedTime",get:function(){if(this.paused)return this.offset;var t=h.sharedContext;if(!this.source||!t)return 0;var e=t.currentTime-this.playedAt;if(this.loop){var i=this.source.loopEnd-this.source.loopStart;if(e>i)return e%i}return e}}])&&s(e.prototype,i),n&&s(e,n),t}();var c=window.indexedDB||window.webkitIndexedDB,l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.init=function(e,i){if(!c)throw new Error("indexed db is not supported");var n=c.open(t.dbName,t.dbVersion);n.onupgradeneeded=function(e){t.upgradeDB(e)},n.onsuccess=function(e){var n=e.target.result;t.db=n,i()},n.onerror=function(t){return e(t)}},t.put=function(e,i,n,r){var o=t.getStoreObject();if(o){var a=t.createRecordObject(e,i),s=o.put(a);n&&(s.onsuccess=function(t){n(t)}),r&&(s.onerror=function(t){r(t)})}else r&&r()},t.get=function(e,i,n){var r=t.getStoreObject();if(r){var o=r.get(e);o.onsuccess=function(t){var e=t.target.result;e?i(e.value,e.key):i(void 0,void 0)},n&&(o.onerror=function(t){n(t)})}else n&&n()},t.delete=function(e,i,n){var r=t.getStoreObject();if(r){var o=r.delete(e);i&&(o.onsuccess=function(t){i(t)}),n&&(o.onerror=function(t){n(t)})}else n&&n()},t.clear=function(e,i){var n=t.getStoreObject();if(n){var r=n.clear();e&&(r.onsuccess=function(t){e(t)}),i&&(r.onerror=function(t){i(t)})}else i&&i()},t.upgradeDB=function(e){var i=e.target.result,n=t.storeIndex,r=t.storeName;i.createObjectStore(r,{keyPath:n}).createIndex(n,n,{unique:!0})},t.getStoreObject=function(){if(!t.db)return null;var e=t.storeName;return t.db.transaction(e,"readwrite").objectStore(e)},t.createRecordObject=function(t,e){return{key:t,value:e}},t}();function p(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}l.dbName="escape-game-db",l.dbVersion=1,l.storeName="escape-game-store",l.storeIndex="key",l.db=null;var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return t.init=function(e){if(e)t.context=e;else{var i=window.AudioContext||window.webkitAudioContext;t.context=new i}var n=(0,a.qY)();n&&(t.setSoundInitializeEvent(n),t.useWebAudio(),t.setWindowLifeCycleEvent(n))},t.update=function(e){if(t.sharedContext){var i=t.killingSounds;if(i.length>0){var n=[],r=!0,o=!1,a=void 0;try{for(var s,u=i[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;t.sharedContext.currentTime>=c.endAt?c.sound.stop():n.push(c)}}catch(l){o=!0,a=l}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}t.killingSounds=n}}},t.useWebAudio=function(){if(!t.webAudioInitialized){var e=t.supportedExtensions,i=!0,n=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var u=a.value,c=o.kCJ;c.setExtensionXhrType(u,c.XHR_RESPONSE_TYPE.BUFFER),c.setExtensionLoadType(u,c.LOAD_TYPE.XHR)}}catch(l){n=!0,r=l}finally{try{i||null==s.return||s.return()}finally{if(n)throw r}}f.game.loader.use(t.parsingMiddleware()),t.webAudioInitialized=!0}},t.parsingMiddleware=function(){return function(e,i){var n,r=t.supportedExtensions,o=e.url.split(".")[1];o&&-1!==r.indexOf(o)?null===(n=t.sharedContext)||void 0===n||n.decodeAudioData(e.data,(function(t){e.buffer=t,i()})):i()}},t.setSoundInitializeEvent=function(e){var i,n=void 0===document.ontouchend?"mousedown":"touched",r=e.version?e.version.split(".")[0]:"0";if("chrome"===e.name&&Number.parseInt(r,10)>=66)i=function(){t.sharedContext&&t.sharedContext.resume(),document.body.removeEventListener(n,i)};else{if("safari"!==e.name)return;i=function(){if(t.sharedContext){var e=t.sharedContext.createBufferSource();e.buffer=t.sharedContext.createBuffer(1,1,44100),e.connect(t.sharedContext.destination),e.start(0),e.disconnect()}document.body.removeEventListener(n,i)}}document.body.addEventListener(n,i)},t.setWindowLifeCycleEvent=function(e){"safari"===e.name?document.addEventListener("webkitvisibilitychange",(function(){document.webkitHidden?t.pauseBgm():t.resumeBgm()})):document.addEventListener("visibilitychange",(function(){document.hidden?t.pauseBgm():t.resumeBgm()}))},t.registerSound=function(e,i){t.managedSounds.set(e,i)},t.unregisterSound=function(e){t.managedSounds.delete(e)},t.getSound=function(e){return t.managedSounds.get(e)},t.createSound=function(e,i){var n=new u(i);return t.registerSound(e,n),n},t.hasSound=function(e){return t.managedSounds.has(e)},t.destroySound=function(e){var i=this.getSound(e);t.unregisterSound(e),null===i||void 0===i||i.stop()},t.pauseBgm=function(){t.paused||(t.paused=!0,t.managedSounds.forEach((function(t){t.pause()})))},t.resumeBgm=function(){t.sceneIsPaused||t.paused&&(t.paused=!1,t.managedSounds.forEach((function(t){t.resume()})))},t.fade=function(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.sharedContext){var o=t.sharedContext.currentTime+n;e.gainNode.gain.exponentialRampToValueAtTime(i,o),r&&t.killingSounds.push({sound:e,endAt:o})}},t.playBgm=function(e,i){var n=t.getSound(e);null===n||void 0===n||n.play(!0,0,i)},t.stopBgm=function(e){var i=t.getSound(e);null===i||void 0===i||i.stop()},t.playSe=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.getSound(e);null===n||void 0===n||n.play(!1,i)},t.setAllSoundVolume=function(e,i){t.managedSounds.forEach((function(t){t.loop?t.volume=e:t.volume=i}))},t.setSoundVolume=function(e,i){var n=t.getSound(e);n&&(n.volume=i)},t.loadSoundOptionFromDB=function(){l.get("bgmVolume",(function(e){t.bgmVolume=0===e?0:e||.05})),l.get("seVolume",(function(e){t.seVolume=0===e?0:e||.5}))},e=t,n=[{key:"sharedContext",get:function(){return t.context}}],(i=null)&&p(e.prototype,i),n&&p(e,n),t}();h.supportedExtensions=["mp3"],h.webAudioInitialized=!1,h.context=null,h.paused=!1,h.killingSounds=[],h.managedSounds=new Map,h.sceneIsPaused=!1;var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.start=function(e){t.game=new o.MxU(e),l.init((function(t){throw new Error("indexed db could not be initialized")}),(function(){h.loadSoundOptionFromDB()})),h.init();var i=document.getElementById("play-game");i&&(i.appendChild(t.game.view),t.game.loader.baseUrl=r.ResourceBaseUrl,t.game.ticker.add((function(e){var i;null===(i=t.currentScene)||void 0===i||i.update(e),h.update(e)})),t.resizeCanvas(),window.addEventListener("resize",t.resizeCanvas))},t.transitionInIfPossible=function(e){var i;return!(!t.sceneResourceLoaded||!t.sceneTransitionOutFinished)&&(null===(i=t.currentScene)||void 0===i||i.destroy(),t.currentScene=e,t.game.stage.addChild(e),e.beginTransitionIn((function(){})),!0)},t.loadScene=function(e){t.currentScene?(t.sceneResourceLoaded=!1,t.sceneTransitionOutFinished=!1,e.beginLoadResource((function(){t.sceneResourceLoaded=!0,t.transitionInIfPossible(e)})),t.currentScene.beginTransitionOut((function(){t.sceneTransitionOutFinished=!0,t.transitionInIfPossible(e)}))):(t.sceneTransitionOutFinished=!0,e.beginLoadResource((function(){t.sceneResourceLoaded=!0,t.transitionInIfPossible(e)})))},t.resizeCanvas=function(){var e,i,n=t.game,r=n.renderer,o=r.width/r.height;window.innerWidth/window.innerHeight>o?(e=window.innerHeight*(r.width/r.height),i=window.innerHeight):(e=window.innerWidth,i=window.innerWidth*(r.height/r.width)),(e>=500||i>=500)&&(e=500,i=500),n.view.style.width="".concat(e-20,"px"),n.view.style.height="".concat(i-20,"px")},t}();f.sceneTransitionOutFinished=!0,f.sceneResourceLoaded=!1;var d=i(4051),y=i.n(d);var m=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=new o.W20,this.overlay=new o.TCu,this.transitionBegan=!1,this.transitionFinished=!1,this.onTransitionFinished=function(){},this.afterFinishedVisible=!1,this.alphaFrom=e,this.alphaTo=i,this.alphaProgress=n;var r=f.game.view.width,a=f.game.view.height;this.overlay.beginFill(0),this.overlay.moveTo(0,0),this.overlay.lineTo(r,0),this.overlay.lineTo(r,a),this.overlay.lineTo(0,a),this.overlay.endFill(),this.overlay.alpha=this.alphaFrom,this.container.addChild(this.overlay)}var e=t.prototype;return e.getContainer=function(){return this.container},e.begin=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.afterFinishedVisible=t,this.container.visible=!0,this.overlay.alpha=this.alphaFrom,this.transitionBegan=!0,this.transitionFinished=!1},e.isBegan=function(){return this.transitionBegan},e.isFinished=function(){return this.transitionFinished},e.isActive=function(){return this.isBegan()&&!this.isFinished()},e.update=function(t){this.alphaTo<=this.alphaFrom&&this.overlay.alpha<=this.alphaTo||this.alphaTo>=this.alphaFrom&&this.overlay.alpha>=this.alphaTo?(this.afterFinishedVisible||(this.container.visible=!1),this.transitionBegan=!1,this.onTransitionFinished(),this.transitionFinished=!0):this.overlay.alpha+=this.alphaProgress},e.setCallback=function(t){this.onTransitionFinished=t},t}(),v=Object.freeze({UI:{SceneUiGraph:function(t){return"ui_graph/".concat(t,".json")},MessageWindow:"ui/message_window.png",OptionFrame:"ui/option_frame.png"},Texts:{InventoryScene:{Ja:"ui_graph/inventory_scene_text.json",En:"ui_graph/inventory_scene_text_en.json"},TalkScene:{Ja:"ui_graph/talk_scene_text.json",En:"ui_graph/talk_scene_text_en.json"},EndingTalkScene:{Ja:"ui_graph/ending_talk_scene_text.json",En:"ui_graph/ending_talk_scene_text_en.json"},ScoreScene:{Ja:"ui_graph/score_scene_text.json",En:"ui_graph/score_scene_text_en.json"},BattleScene:{Ja:"ui_graph/battle_scene_text.json",En:"ui_graph/battle_scene_text_en.json"}},Static:{NormalAttack:"effects/normal_attack.json",NormalBossAttack:"effects/normal_boss_attack.json",HpRecover:"effects/hp_recover.json",FpRecover:"effects/fp_recover.json",FullRecover:"effects/full_recover.json",Cure:"effects/cure.json",AttackUp:"effects/attack_up.json",CriticalUp:"effects/critical_up.json",DvUp:"effects/dv_up.json",Guard:"effects/guard.json",AllGuard:"effects/all_guard.json",PlayerSkill1:"effects/player_skill_1.json",PlayerSkill2_0:"effects/player_skill_2-0.json",PlayerSkill2_1:"effects/player_skill_2-1.json",PlayerSkill3:"effects/player_skill_3.json",PlayerSkill4:"effects/player_skill_4.json",PlayerSkill5:"effects/player_skill_5.json",PlayerSkill6_0:"effects/player_skill_6-0.json",PlayerSkill6_1:"effects/player_skill_6-1.json",BossSkill1:"effects/boss_skill_1.json",BossSkill2:"effects/boss_skill_2.json",BossSkill3_0:"effects/boss_skill_3-0.json",BossSkill3_1:"effects/boss_skill_3-1.json",BossSpecialMove:"effects/boss_special_move.json",MagicTool1:"effects/magic_tool_1.json",MagicTool2:"effects/magic_tool_2.json",MagicTool3_0:"effects/magic_tool_3-0.json",MagicTool3_1:"effects/magic_tool_3-1.json",MagicTool3_2:"effects/magic_tool_3-2.json",BossTexture:{Idle:"ui/boss.png",Damaged:"ui/boss_damaged.png"},GaugeFrame:"ui/gauge_frame.png",HpBar:"ui/hp_bar.png",FpBar:"ui/fp_bar.png",GaugeEmpty:"ui/gauge_empty.png"},TextureFrame:{NormalAttack:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["normal_attack-".concat(t,".png")]},NormalBossAttack:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["boss_normal_attack_".concat(t,".png")]},BossSkill1:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["boss_skill_1_".concat(t,".png")]},BossSkill2:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["boss_skill_2_".concat(t,".png")]},BossSkill3:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["boss_skill_3_".concat(t,".png")]},BossSpecialMove:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["boss_special_move_".concat(t,".png")]},MagicTool1:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["magic_tool_1_".concat(t,".png")]},MagicTool2:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["magic_tool_2_".concat(t,".png")]},MagicTool3:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["magic_tool_3_".concat(t,".png")]},HpRecover:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["hp_recover_".concat(t,".png")]},FpRecover:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["fp_recover_".concat(t,".png")]},FullRecover:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["full_recover_".concat(t,".png")]},Cure:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["cure_".concat(t,".png")]},AttackUp:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["attack_up_".concat(t,".png")]},CriticalUp:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["critical_up_".concat(t,".png")]},DvUp:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["dv_up_".concat(t,".png")]},PlayerSkill1:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["player_skill_1_".concat(t,".png")]},PlayerSkill2:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["player_skill_2_".concat(t,".png")]},PlayerSkill3:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["player_skill_3_".concat(t,".png")]},PlayerSkill4:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["player_skill_4_".concat(t,".png")]},PlayerSkill5:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["player_skill_5_".concat(t,".png")]},PlayerSkill6:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["player_skill_6_".concat(t,".png")]},Guard:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["guard_".concat(t,".png")]},AllGuard:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.P6Y.kN["all_guard_".concat(t,".png")]}},EquipMents:["equipments/armor4_01.png","equipments/armor4_03.png","equipments/armor6_04.png","equipments/armor7_01.png","equipments/armor1.png","equipments/boots1_01.png","equipments/boots3_02.png","equipments/bow6_03.png","equipments/bracelet_02.png","equipments/cloak3_03.png","equipments/crown01_01.png","equipments/clothes11_03.png","equipments/circlet.png","equipments/greave2_01.png","equipments/greave1_02.png","equipments/greave1_04.png","equipments/gauntlet_02.png","equipments/gauntlet_01.png","equipments/gauntlet_03.png","equipments/helm4.png","equipments/helm5_02.png","equipments/helm5_04.png","equipments/helm6_01.png","equipments/helm1_01.png","equipments/helm3_03.png","equipments/katana.png","equipments/kukri2_02.png","equipments/ninjahood2_01.png","equipments/ninjatou_01.png","equipments/ninjaclothes_01.png","equipments/ninjasocks_01.png","equipments/gloves1_04.png","equipments/gloves1_01.png","equipments/gloves1_01.png","equipments/gloves2.png","equipments/ring2.png","equipments/shuriken1.png","equipments/sword12_01.png","equipments/sword05.png","equipments/treasure05_04.png","equipments/treasure07_02.png","equipments/weapon03_01.png","equipments/weapon04_03.png","equipments/weapon08_03.png","equipments/weapon11_01.png","equipments/weapon12_03.png","equipments/weapon15_03.png"],Items:["items/potion1_01.png","items/potion1_05.png","items/potion2_02.png","items/potion2_03.png","items/potion3_01.png","items/potion3_04.png","items/aphrodisiac_01.png","items/powder_04.png","items/testtube_02.png","items/testtube_04.png","items/testtube_05.png","items/supertesttube.png"],ItemList:["greatHpPotion","greatFpPotion","highHpPotion","highFpPotion","hpPotion","fpPotion","nectar","curePowder","attackUp","criticalUp","dvUp","aronBeta"],ItemNumberAndItemName:{item_1_number:"hpPotion",item_2_number:"highHpPotion",item_3_number:"greatHpPotion",item_4_number:"fpPotion",item_5_number:"highFpPotion",item_6_number:"greatFpPotion",item_7_number:"nectar",item_8_number:"curePowder",item_9_number:"dvUp",item_10_number:"attackUp",item_11_number:"criticalUp",item_12_number:"aronBeta"},VolumeBars:["ui/sound_option/volume_bar_0.png","ui/sound_option/volume_bar_1.png","ui/sound_option/volume_bar_2.png","ui/sound_option/volume_bar_3.png","ui/sound_option/volume_bar_4.png","ui/sound_option/volume_bar_5.png","ui/sound_option/volume_bar_6.png","ui/sound_option/volume_bar_7.png","ui/sound_option/volume_bar_8.png","ui/sound_option/volume_bar_9.png","ui/sound_option/volume_bar_10.png"],Audio:{Bgm:{TitleBgm:"audio/title_bgm.mp3",TalkBgm:"audio/talk_scene_bgm.mp3",BossBgm:"audio/boss_bgm.mp3"},Se:{ShowNextText:"audio/next_text.mp3",OptionTap:"audio/option_tap.mp3",OptionTap2:"audio/option_tap2.mp3",OptionTap3:"audio/option_tap3.mp3",Equip:"audio/equip.mp3",minus:"audio/minus.mp3",plus:"audio/plus.mp3",Hit:"audio/hit.mp3",Guard:"audio/guard.mp3",AllGuard:"audio/all_guard.mp3",HpRecover:"audio/hp_recover.mp3",FpRecover:"audio/fp_recover.mp3",FullRecover:"audio/full_recover.mp3",Cure:"audio/cure.mp3",StatusUp:"audio/status_up.mp3",NormalAttack:"audio/normal_attack.mp3",PlayerSkill2:"audio/player_skill_2.mp3",PlayerSkill3:"audio/player_skill_3.mp3",PlayerSkill4:"audio/player_skill_4.mp3",PlayerSkill6:"audio/player_skill_6.mp3",BossSkill_2:"audio/boss_skill_2.mp3",SpecialMove1:"audio/special_move_1.mp3",SpecialMove2:"audio/special_move_2.mp3",MagicTool1:"audio/magic_tool_1.mp3",MagicTool2:"audio/magic_tool_2.mp3",MagicTool3:"audio/magic_tool_3.mp3"}},FontFamily:{Default:"MPLUS1p-Regular"},MaxFrameIndex:function(t){var e=f.game.loader.resources[t];return e&&e.data&&e.data.frames?Object.keys(e.data.frames).length:-1}}),g=v;function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function S(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return b(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return b(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e=t.prototype;return e.createUiNode=function(t){return new o.W20},e.createUiNodeByGraphElement=function(t){var e=this.createUiNode(t.params);return e&&(e.name=t.id,e.position.set(t.position[0],t.position[1]),t.invisible&&(e.visible=!1),!0===t.interactive&&(e.interactive=!0),!0===t.buttonMode&&(e.buttonMode=!0)),e},e.attachUiEventByGraphElement=function(t,e,i){var n=!0,r=!1,o=void 0;try{for(var a,s=function(t,n){var r,o=n.value,a=i[o.callback];if(!a)return"continue";e.on(o.type,(function(){return(r=a).call.apply(r,[i].concat(S(o.arguments)))}))},u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0)s(0,a)}catch(c){r=!0,o=c}finally{try{n||null==u.return||u.return()}finally{if(r)throw o}}},t}();function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e){return!e||"object"!==R(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t){return function(t){if(Array.isArray(t))return w(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return w(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return w(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function C(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=P(t);if(e){var r=P(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return T(this,i)}}var F=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(i,t);var e=C(i);function i(){return O(this,i),e.apply(this,arguments)}return i.prototype.createUiNode=function(t){var e={};t&&(void 0!==t.family&&(e.fontFamily=t.family),void 0!==t.size&&(e.fontSize=t.size),void 0!==t.color&&(e.fill=t.color),void 0!==t.padding&&(e.padding=t.padding),void 0!==t.wordWrap&&(e.wordWrap=t.wordWrap),void 0!==t.wordWrapWidth&&(e.wordWrapWidth=t.wordWrapWidth));var i,n=new o.pn8(e),r=new o.xvT(t&&t.text?t.text:"",n);t&&void 0!==t.anchor&&(i=r.anchor).set.apply(i,A(t.anchor));return r},i}(_);function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function G(t,e){return!e||"object"!==q(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t){return function(t){if(Array.isArray(t))return E(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return E(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return E(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var q=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function L(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=j(t);if(e){var r=j(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return G(this,i)}}var B=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(i,t);var e=L(i);function i(){return k(this,i),e.apply(this,arguments)}return i.prototype.createUiNode=function(t){var e=new o.jyi;if(t){var i,n,r=t.textureName;if(r&&o.P6Y.kN[r]&&(e.texture=o.P6Y.kN[r]),t.anchor)(i=e.anchor).set.apply(i,D(t.anchor));if(t.scale)(n=e.scale).set.apply(n,D(t.scale))}return e},i}(_);function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function W(t,e,i){return(W=N()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&V(r,i.prototype),r}).apply(null,arguments)}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function K(t,e){return!e||"object"!==z(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Y(t){return function(t){if(Array.isArray(t))return M(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return M(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return M(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var z=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function J(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=H(t);if(e){var r=H(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return K(this,i)}}var X=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}(i,t);var e=J(i);function i(){return U(this,i),e.apply(this,arguments)}return i.prototype.createUiNode=function(t){var e;if(t){var i=t.textureName;i&&o.P6Y.kN[i]&&(e=t.perimeter?W(o.ZTM,[o.P6Y.kN[i]].concat(Y(t.perimeter))):new o.ZTM(o.P6Y.kN[i])),t.scale&&e&&(e.width=t.scale[0],e.height=t.scale[1])}return e||null},i}(_);var Z=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.getFactory=function(e){if(!t.cashedFactory[e]){var i;switch(e){case"text":case"message":case"language_option_text":case"credit_text":i=F;break;case"language_option_sprite":case"credit_sprite":case"sprite":i=B;break;case"nine_slice":i=X}if(!i)return null;t.cashedFactory[e]=new i}return t.cashedFactory[e]},t}();function $(t,e,i,n,r,o,a){try{var s=t[o](a),u=s.value}catch(c){return void i(c)}s.done?e(u):Promise.resolve(u).then(n,r)}function Q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function et(t,e){return!e||"object"!==nt(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function it(t,e){return(it=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Z.cashedFactory={};var nt=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function rt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=tt(t);if(e){var r=tt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return et(this,i)}}var ot=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&it(t,e)}(i,t);var e=rt(i);function i(){var t;return Q(this,i),(t=e.apply(this,arguments)).transitionIn=new m(1,0,-.02),t.transitionOut=new m(0,1,.02),t.objectsToUpdate=[],t.elapsedFrameCount=0,t.uiGraphContainer=new o.W20,t.uiGraph=new Map,t.isOver=!1,t}var n=i.prototype;return n.update=function(t){this.elapsedFrameCount++,this.updateRegisteredObjects(t),this.transitionIn.isActive()?this.transitionIn.update(t):this.transitionOut.isActive()&&this.transitionOut.update(t)},n.registerUpdatingObject=function(t){this.objectsToUpdate.push(t)},n.updateRegisteredObjects=function(t){var e=[],i=!0,n=!1,r=void 0;try{for(var o,a=this.objectsToUpdate[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;s&&!s.isDestroyed()&&(s.update(t),e.push(s))}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}this.objectsToUpdate=e},n.beginTransitionIn=function(t,e){this.transitionIn.setCallback((function(){return t()}));var i=this.transitionIn.getContainer();i&&this.addChild(i),this.transitionIn.begin(e)},n.beginTransitionOut=function(t,e){this.transitionOut.setCallback((function(){return t()}));var i=this.transitionOut.getContainer();i&&this.addChild(i),this.transitionOut.begin(e)},n.createInitialResourceList=function(){return[]},n.beginLoadResource=function(t){var e,i=this;return(e=y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(t){i.loadInitialResource((function(){return t(null)}))}));case 2:return e.next=4,new Promise((function(t){var e=i.onInitialResourceLoaded();i.loadAdditionalResource(e,(function(){return t(null)}))}));case 4:i.onResourceLoaded(),t();case 6:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var o=e.apply(t,i);function a(t){$(o,n,r,a,s,"next",t)}function s(t){$(o,n,r,a,s,"throw",t)}a(void 0)}))})()},n.loadInitialResource=function(t){var e=this.createInitialResourceList(),i=g.UI.SceneUiGraph(this.sceneName);e.push(i);var n=this.filterLoadedAssets(e);n.length>0?f.game.loader.add(n).load(t):t()},n.onInitialResourceLoaded=function(){var t=[],e=g.UI.SceneUiGraph(this.sceneName),i=f.game.loader.resources[e],n=!0,r=!1,o=void 0;try{for(var a,s=i.data.nodes[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;"sprite"!==u.type&&"sprite_option"!==u.type&&"language_option_sprite"!==u.type&&"credit_sprite"!==u.type&&"nine_slice"!==u.type||t.push({name:u.params.textureName,url:u.params.url})}}catch(c){r=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return t},n.loadAdditionalResource=function(t,e){f.game.loader.add(this.filterLoadedAssets(t)).load(e)},n.onResourceLoaded=function(){var t=g.UI.SceneUiGraph(this.sceneName),e=f.game.loader.resources[t].data;this.prepareUiGraphContainer(e)},n.filterLoadedAssets=function(t){var e=new Map,i=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;"string"===typeof s?f.game.loader.resources[s]||e.has(s)||e.set(s,{name:s,url:s}):f.game.loader.resources[s.name]||e.has(s.name)||e.set(s.name,s)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}return Array.from(e.values())},n.prepareUiGraphContainer=function(t){var e=!0,i=!1,n=void 0;try{for(var r,o=t.nodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=Z.getFactory(a.type)||this.getCustomUiGraphFactory(a.type);if(s){var u=s.createUiNodeByGraphElement(a);u&&(a.events&&s.attachUiEventByGraphElement(a.events,u,this),this.uiGraph.set(a.id,u),this.uiGraphContainer.addChild(u))}}}catch(c){i=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}},n.getCustomUiGraphFactory=function(t){return null},n.destroySound=function(){var t=f.game.loader.resources,e=Object.keys(t),i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;t[s].buffer&&h.destroySound(s)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}},i}(o.W20);function at(t,e,i){return(at="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=st(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ut(t,e){return!e||"object"!==lt(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ct(t,e){return(ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lt=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function pt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=st(t);if(e){var r=st(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ut(this,i)}}var ht=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ct(t,e)}(i,t);var e=pt(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).sceneName="option_scene",n.language=t,n.transitionIn=new m(1,0,-.02),n.transitionOut=new m(0,1,.02),n}var n=i.prototype;return n.onResourceLoaded=function(){at(st(i.prototype),"onResourceLoaded",this).call(this),this.initVolumeGraph(),this.initLanguageButton(),this.addChild(this.uiGraphContainer)},n.createInitialResourceList=function(){return at(st(i.prototype),"createInitialResourceList",this).call(this).concat(g.VolumeBars)},n.initLanguageButton=function(){var t=this.uiGraph.get("japanese"),e=this.uiGraph.get("japanese_2"),i=this.uiGraph.get("english"),n=this.uiGraph.get("english_2");t&&e&&i&&n&&("japanese"===this.language?(t.visible=!0,e.visible=!1,i.visible=!1,n.visible=!0):(t.visible=!1,e.visible=!0,i.visible=!0,n.visible=!1))},n.onLanguageSelected=function(t){h.playSe(g.Audio.Se.OptionTap3);var e=this.uiGraph.get("japanese"),i=this.uiGraph.get("japanese_2"),n=this.uiGraph.get("english"),r=this.uiGraph.get("english_2");e&&i&&n&&r&&("japanese"===t?(e.visible=!0,i.visible=!1,n.visible=!1,r.visible=!0):(e.visible=!1,i.visible=!0,n.visible=!0,r.visible=!1),this.saveLanguageToDB(t))},n.initVolumeGraph=function(){var t=Math.round(100*h.bgmVolume),e=Math.round(10*h.seVolume),i=this.uiGraph.get("bgm_volume_bar"),n=this.uiGraph.get("se_volume_bar"),r=o.P6Y.kN["ui/sound_option/volume_bar_".concat(t.toString(),".png")],a=o.P6Y.kN["ui/sound_option/volume_bar_".concat(e.toString(),".png")];i&&n&&(i.texture=r,n.texture=a)},n.showTitleScene=function(){this.transitionIn.isActive()||this.transitionOut.isActive()||(h.playSe(g.Audio.Se.OptionTap2),f.loadScene(new Qr))},n.onBgmArrowDown=function(t){var e=h.bgmVolume;if(t<0&&0!==e||t>0&&.1!==e){var i="ui/sound_option/volume_bar_".concat(Math.round(100*e+100*t).toString(),".png"),n=o.P6Y.kN[i],r=this.uiGraph.get("bgm_volume_bar");if(!r)return;r.texture=n}(e+=t)<.001?e=0:e>.0999&&(e=.1),h.bgmVolume=e,h.playSe(g.Audio.Se.OptionTap),this.saveBgmVolumeToDB(h.bgmVolume),h.setAllSoundVolume(h.bgmVolume,h.seVolume)},n.onSeArrowDown=function(t){var e=h.seVolume;if(t<0&&0!==e||t>0&&1!==e){var i="ui/sound_option/volume_bar_".concat(Math.round(10*e+10*t).toString(),".png"),n=o.P6Y.kN[i],r=this.uiGraph.get("se_volume_bar");if(!r)return;r.texture=n}(e+=t)<.001?e=0:e>.999&&(e=1),h.seVolume=e,h.playSe(g.Audio.Se.OptionTap),this.saveSeVolumeToDB(h.seVolume)},n.saveLanguageToDB=function(t){l.put("language",t)},n.saveBgmVolumeToDB=function(t){l.put("bgmVolume",t)},n.saveSeVolumeToDB=function(t){l.put("seVolume",t)},i}(ot);function ft(t,e,i){return(ft="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dt(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yt(t,e){return!e||"object"!==vt(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mt(t,e){return(mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vt=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function gt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=dt(t);if(e){var r=dt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return yt(this,i)}}var bt=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mt(t,e)}(i,t);var e=gt(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=e.call(this)).creditContainer=new o.W20,t.currentPage=0,t.sceneName="credit_scene",t.transitionIn=new m(1,0,-.02),t.transitionOut=new m(0,1,.02),t}var n=i.prototype;return n.onResourceLoaded=function(){ft(dt(i.prototype),"onResourceLoaded",this).call(this),this.addChild(this.uiGraphContainer),this.addChild(this.creditContainer)},n.changePage=function(t){h.playSe(g.Audio.Se.OptionTap),this.currentPage=this.currentPage+t,this.currentPage<-2?this.currentPage=0:this.currentPage>0&&(this.currentPage=-2),this.creditContainer.position.x=640*this.currentPage},n.showTitleScene=function(){this.transitionIn.isActive()||this.transitionOut.isActive()||(h.playSe(g.Audio.Se.OptionTap2),f.loadScene(new Qr))},n.prepareUiGraphContainer=function(t){var e=!0,i=!1,n=void 0;try{for(var r,o=t.nodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=Z.getFactory(a.type)||this.getCustomUiGraphFactory(a.type);if(s){var u=s.createUiNodeByGraphElement(a);u&&(a.events&&s.attachUiEventByGraphElement(a.events,u,this),this.uiGraph.set(a.id,u),"credit_text"===a.type||"credit_sprite"===a.type?this.creditContainer.addChild(u):this.uiGraphContainer.addChild(u))}}}catch(c){i=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}},i}(ot);function St(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _t(t){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wt(t,e){return!e||"object"!==Pt(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ot(t,e){return(Ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pt=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Tt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=_t(t);if(e){var r=_t(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return wt(this,i)}}var xt=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ot(t,e)}(i,t);var e=Tt(i);function i(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(o=e.call(this)).currentTextIndex=0,o.delegate=r,o.texts=t,o.initWindow(n),o}var n,r,a,s=i.prototype;return s.initWindow=function(t){var e=this,n=o.P6Y.kN[g.UI.MessageWindow];this.window=new o.jyi(n),this.window.interactive=!0,this.window.on("pointertap",(function(){e.showNextText()})),this.window.scale.set((f.game.view.width-20)/this.window.width,f.game.view.height/4/this.window.height),this.window.anchor.set(.5,.5),this.window.position.set(f.game.view.width/2,f.game.view.height-this.window.height/2-20),this.windowScaleX=this.window.scale.x,this.windowScaleY=this.window.scale.y,this.windowSizeUpRateX=this.windowScaleX/i.WindowSizeUpFrame,this.windowSizeUpRateY=this.windowScaleY/i.WindowSizeUpFrame,this.window.scale.set(0,0),this.window.addChild(t),this.window.addChild(this.texts[0]),this.window.buttonMode=!0,this.addChild(this.window)},s.isDestroyed=function(){return this._destroyed},s.update=function(t){this.isDestroyed()||this.window.scale.x===this.windowScaleX&&this.window.scale.y===this.windowScaleY||(this.window.scale.set(this.window.scale.x+this.windowSizeUpRateX,this.window.scale.y+this.windowSizeUpRateY),this.window.scale.x>=this.windowScaleX&&(this.window.scale.x=this.windowScaleX),this.window.scale.y>=this.windowScaleY&&(this.window.scale.y=this.windowScaleY))},s.showNextText=function(){if(h.playSe(g.Audio.Se.ShowNextText),this.window.interactive=!0,this.currentTextIndex!==this.texts.length-1){this.texts[this.currentTextIndex].visible=!1;var t=this.texts[++this.currentTextIndex];this.window.addChild(t)}else{this.delegate.onMessageWindowClosed();var e=!0,i=!1,n=void 0;try{for(var r,o=this.texts[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){r.value.visible=!0}}catch(a){i=!0,n=a}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}this.destroy()}},s.addText=function(t,e){this.texts.splice(this.currentTextIndex+e,0,t)},n=i,a=[{key:"resourceList",get:function(){return[g.UI.MessageWindow]}}],(r=null)&&St(n.prototype,r),a&&St(n,a),i}(o.W20);xt.WindowSizeUpFrame=10;var At=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.weapon=0,this.head=0,this.body=0,this.arm=0,this.foot=0};var Rt=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hp=800,this.fp=500,this.atk=1,this.def=1,this.dv=1,this.hit=1,this.crit=1,this.state=1,this.cp=3700};var Ct=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hp=15e3,this.fp=1,this.atk=1,this.def=1,this.dv=1,this.hit=1,this.crit=1},Ft=Object.freeze({GreatHpPotion:"greatHpPotion",GreatFpPotion:"greatFpPotion",HighHpPotion:"highHpPotion",HighFpPotion:"highFpPotion",HpPotion:"hpPotion",FpPotion:"fpPotion",Nectar:"nectar",CurePowder:"curePowder",AttackUp:"attackUp",CriticalUp:"criticalUp",AronBeta:"aronBeta",DvUp:"dvUp"}),Et=Object.freeze({SKILL_1:1,SKILL_2:2,SKILL_3:3,SKILL_4:4,SKILL_5:5,SKILL_6:6}),kt=Object.freeze({IDLE:1,GUARD:2}),jt=Object.freeze({NORMAL_ATTACK:1,GUARD:2,SKILL_1:3,SKILL_2:4,SKILL_3:5,MAGIC_TOOL_1:6,MAGIC_TOOL_2:7,MAGIC_TOOL_3:8,AVOID:9,SPECIAL_MOVE:10}),Gt=Object.freeze({SWORD_VERTICAL:1,SWORD_HORIZON:2,SWORD_UP:3,SWORD_CROSS:4,SWORD_DOWN:5,LOW_POSTURE:6,RIGHT_FOOT_FORWARD:7,LEFT_FOOT_FORWARD:8,RIGHT_HAND_FORWARD:9,LEFT_HAND_FORWARD:10});var It=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bossStatus=new Ct,this.bossAction=1,this.bossState=1,this.playerHitDown=0,this.playerDefenseDown=0,this.playerAttackUp=0,this.playerCriticalUp=0,this.playerDvUp=0,this.playerDamageCut=0,this.playerDamageAdd=0,this.bossFlinched=!1,this.isUsingSkill6=!1,this.isUsingAronBeta=!1,this.turn=1,this.delegator=e,this.playerStatus=i,this.maxPlayerHp=i.hp,this.maxPlayerFp=i.fp,this.setPlayerDamageRate()}var e=t.prototype;return e.onAttackButtonTapped=function(){var t=this.calcuBossDamage();this.bossAction===jt.GUARD&&(t=Math.round(t/2));var e=this.playerAttackCritical(0);e&&(t=Math.round(1.5*t)),this.playerAttackHitted(0)?(this.bossStatus.hp-=t,this.delegator.onBossHpChanged(this.bossStatus.hp),this.delegator.onBossDamaged(t,e,this.bossStatus.hp,this.turn)):this.delegator.onPlayerAttackMissed()},e.onGuardButtonTapped=function(){this.playerStatus.state=kt.GUARD},e.bossTurn=function(){this.turn+=1,this.delegator.onTurnAdded(this.turn),0!==this.playerHitDown&&(this.playerHitDown-=1);var t=!1;0!==this.playerDefenseDown&&(this.playerDefenseDown-=1,t=!0),0!==this.playerAttackUp&&(this.playerAttackUp-=1),0!==this.playerCriticalUp&&(this.playerCriticalUp-=1);var e=!1;if(0!==this.playerDvUp&&(this.playerDvUp-=1,e=!0),this.bossAction===jt.GUARD)return this.bossFlinched=!1,this.isUsingAronBeta=!1,this.playerStatus.state=kt.IDLE,this.decideBossState(),this.decideBossAction(),void this.delegator.onBossGuarded(this.bossState,this.playerHitDown,this.playerDefenseDown,this.isUsingSkill6,this.playerAttackUp,this.playerCriticalUp,this.playerDvUp);if(this.bossAction===jt.AVOID)return this.isUsingAronBeta=!1,this.playerStatus.state=kt.IDLE,this.decideBossState(),this.decideBossAction(),void this.delegator.onBossAvoided(this.bossState,this.playerHitDown,this.playerDefenseDown,this.isUsingSkill6,this.playerAttackUp,this.playerCriticalUp,this.playerDvUp);if(!0===this.bossFlinched)return this.isUsingAronBeta=!1,this.bossFlinched=!1,this.decideBossState(),this.decideBossAction(),void this.delegator.onBossFlinched(this.bossState,this.playerHitDown,this.playerDefenseDown,this.isUsingSkill6,this.playerAttackUp,this.playerCriticalUp,this.playerDvUp);var i=this.calcuPlayerDamage();this.isUsingAronBeta=!1,this.playerStatus.state===kt.GUARD&&(i=Math.round(i/2),this.playerStatus.state=kt.IDLE);var n=this.bossAttackCritical(this.bossAction);if(n&&(i=Math.round(1.5*i)),t&&(i=Math.round(2*i)),this.bossAttackHitted(this.bossAction,e)){this.bossAction===jt.MAGIC_TOOL_1&&(this.playerHitDown=2),this.bossAction===jt.MAGIC_TOOL_2&&(this.playerDefenseDown=2);var r=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp-=i,this.delegator.onPlayerHpChanged(this.playerStatus.hp);var o=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp<=0&&(o=0),this.decideBossState(),this.delegator.onPlayerDamaged(i,r,o,this.bossState,this.bossAction,this.playerHitDown,this.playerDefenseDown,n,this.isUsingSkill6,this.playerAttackUp,this.playerCriticalUp,this.playerDvUp,this.turn,this.bossStatus.hp),this.decideBossAction()}else this.decideBossState(),this.delegator.onBossAttackMissed(this.bossState,this.bossAction,this.playerHitDown,this.playerDefenseDown,this.isUsingSkill6,this.playerAttackUp,this.playerCriticalUp,this.playerDvUp),this.decideBossAction()},e.onItemUsed=function(t){if(t===Ft.GreatHpPotion){var e=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp+=1e3;var i=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp>this.maxPlayerHp&&(this.playerStatus.hp=this.maxPlayerHp,i=1),this.delegator.onPlayerHpRecovered(1e3,e,i),this.delegator.onPlayerHpChanged(this.playerStatus.hp)}if(t===Ft.HighHpPotion){var n=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp+=500;var r=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp>this.maxPlayerHp&&(this.playerStatus.hp=this.maxPlayerHp,r=1),this.delegator.onPlayerHpRecovered(500,n,r),this.delegator.onPlayerHpChanged(this.playerStatus.hp)}if(t===Ft.HpPotion){var o=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp+=300;var a=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp>this.maxPlayerHp&&(this.playerStatus.hp=this.maxPlayerHp,a=1),this.delegator.onPlayerHpRecovered(300,o,a),this.delegator.onPlayerHpChanged(this.playerStatus.hp)}if(t===Ft.GreatFpPotion){var s=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp+=800;var u=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp>this.maxPlayerFp&&(this.playerStatus.fp=this.maxPlayerFp,u=1),this.delegator.onPlayerFpRecovered(800,s,u),this.delegator.onPlayerFpChanged(this.playerStatus.fp)}if(t===Ft.HighFpPotion){var c=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp+=400;var l=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp>this.maxPlayerFp&&(this.playerStatus.fp=this.maxPlayerFp,l=1),this.delegator.onPlayerFpRecovered(400,c,l),this.delegator.onPlayerFpChanged(this.playerStatus.fp)}if(t===Ft.FpPotion){var p=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp+=250;var h=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp>this.maxPlayerFp&&(this.playerStatus.fp=this.maxPlayerFp,h=1),this.delegator.onPlayerFpRecovered(250,p,h),this.delegator.onPlayerFpChanged(this.playerStatus.fp)}if(t===Ft.Nectar){var f=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp+=1500;var d=this.playerStatus.hp/this.maxPlayerHp;this.playerStatus.hp>this.maxPlayerHp&&(this.playerStatus.hp=this.maxPlayerHp,d=1);var y=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp+=1500;var m=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp>this.maxPlayerFp&&(this.playerStatus.fp=this.maxPlayerFp,m=1),this.playerDefenseDown=0,this.playerHitDown=0,this.delegator.onPlayerFullRecovered(f,d,y,m),this.delegator.onPlayerHpChanged(this.playerStatus.hp),this.delegator.onPlayerFpChanged(this.playerStatus.fp)}t===Ft.CurePowder&&(this.playerDefenseDown=0,this.playerHitDown=0,this.delegator.onPlayerCured()),t===Ft.AttackUp&&(this.playerAttackUp=4,this.delegator.onPlayerAttackUpped()),t===Ft.CriticalUp&&(this.playerCriticalUp=4,this.delegator.onPlayerCriticalUpped()),t===Ft.DvUp&&(this.playerDvUp=4,this.delegator.onPlayerDvUpped()),t===Ft.AronBeta&&(this.isUsingAronBeta=!0,this.delegator.onAronBetaUsed())},e.onSkillUsed=function(t){if(t===Et.SKILL_1){var e=Math.round(1.2*this.calcuBossDamage());this.playerStatus.fp<200&&(e=Math.round(e/4)),this.bossAction===jt.GUARD&&(e=Math.round(e/2));var i=this.playerAttackCritical(t);i&&(e=Math.round(1.5*e)),this.playerAttackHitted(t)?(this.bossStatus.hp-=e,this.delegator.onBossHpChanged(this.bossStatus.hp),this.delegator.onBossDamaged(e,i,this.bossStatus.hp,this.turn)):this.delegator.onPlayerAttackMissed();var n=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp-=200;var r=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp<=0&&(this.playerStatus.fp=0,r=0),this.delegator.onPlayerFpChanged(this.playerStatus.fp),this.delegator.onPlayerFpDecreased(n,r)}if(t===Et.SKILL_2){var o=Math.round(1.4*this.calcuBossDamage());this.playerStatus.fp<340&&(o=Math.round(o/4)),this.bossAction===jt.GUARD&&(o=Math.round(o/2));var a=this.playerAttackCritical(t);if(a&&(o=Math.round(1.5*o)),this.playerAttackHitted(t))Math.random()<=.3&&(this.bossFlinched=!0),this.bossStatus.hp-=o,this.delegator.onBossHpChanged(this.bossStatus.hp),this.delegator.onBossDamaged(o,a,this.bossStatus.hp,this.turn);else this.delegator.onPlayerAttackMissed();var s=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp-=340;var u=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp<=0&&(this.playerStatus.fp=0,u=0),this.delegator.onPlayerFpChanged(this.playerStatus.fp),this.delegator.onPlayerFpDecreased(s,u)}if(t===Et.SKILL_3){var c=2*this.calcuBossDamage();this.playerStatus.fp<450&&(c=Math.round(c/4)),this.bossAction===jt.GUARD&&(c=Math.round(c/2));var l=this.playerAttackCritical(t);l&&(c=Math.round(1.5*c)),this.playerAttackHitted(t)?(this.bossStatus.hp-=c,this.delegator.onBossHpChanged(this.bossStatus.hp),this.delegator.onBossDamaged(c,l,this.bossStatus.hp,this.turn)):this.delegator.onPlayerAttackMissed();var p=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp-=450;var h=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp<=0&&(this.playerStatus.fp=0,h=0),this.delegator.onPlayerFpChanged(this.playerStatus.fp),this.delegator.onPlayerFpDecreased(p,h)}if(t===Et.SKILL_4){var f=Math.round(1.2*this.calcuBossDamage());this.playerStatus.fp<200&&(f=Math.round(f/4));var d=this.playerAttackCritical(t);this.bossAction===jt.GUARD&&(d=!0),d&&(f=Math.round(1.7*f)),this.playerAttackHitted(t)?(this.bossStatus.hp-=f,this.delegator.onBossHpChanged(this.bossStatus.hp),this.delegator.onBossDamaged(f,d,this.bossStatus.hp,this.turn)):this.delegator.onPlayerAttackMissed();var y=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp-=200;var m=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp<=0&&(this.playerStatus.fp=0,m=0),this.delegator.onPlayerFpChanged(this.playerStatus.fp),this.delegator.onPlayerFpDecreased(y,m)}if(t===Et.SKILL_5){var v=Math.round(1.3*this.calcuBossDamage());this.playerStatus.fp<250&&(v=Math.round(v/4)),this.bossAction===jt.GUARD&&(v=Math.round(v/2));var g=this.playerAttackCritical(t);this.bossAction===jt.AVOID&&(g=!0),g&&(v=Math.round(1.5*v)),this.playerAttackHitted(t)?(this.bossStatus.hp-=v,this.delegator.onBossHpChanged(this.bossStatus.hp),this.delegator.onBossDamaged(v,g,this.bossStatus.hp,this.turn)):this.delegator.onPlayerAttackMissed();var b=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp-=250;var S=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp<=0&&(this.playerStatus.fp=0,S=0),this.delegator.onPlayerFpChanged(this.playerStatus.fp),this.delegator.onPlayerFpDecreased(b,S)}if(t!==Et.SKILL_6||this.isUsingSkill6){if(t===Et.SKILL_6&&this.isUsingSkill6){this.isUsingSkill6=!1;var _=Math.round(2.5*this.calcuBossDamage());this.playerStatus.fp<250&&(_=Math.round(_/4)),this.bossAction===jt.GUARD&&(_=Math.round(_/2));var w=this.playerAttackCritical(t);w&&(_=Math.round(1.5*_)),this.playerAttackHitted(t)?(this.bossStatus.hp-=_,this.delegator.onBossHpChanged(this.bossStatus.hp),this.delegator.onBossDamaged(_,w,this.bossStatus.hp,this.turn)):this.delegator.onPlayerAttackMissed();var O=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp-=250;var P=this.playerStatus.fp/this.maxPlayerFp;this.playerStatus.fp<=0&&(this.playerStatus.fp=0,P=0),this.delegator.onPlayerFpChanged(this.playerStatus.fp),this.delegator.onPlayerFpDecreased(O,P)}}else this.isUsingSkill6=!0,this.delegator.onSkill6Used()},e.calcuPlayerDamage=function(){return this.isUsingAronBeta?0:this.bossAction===jt.NORMAL_ATTACK?Math.floor((101*Math.random()+100)*this.playerDamageCut):this.bossAction===jt.SKILL_1?Math.floor((201*Math.random()+100)*this.playerDamageCut):this.bossAction===jt.SKILL_2?Math.floor((201*Math.random()+200)*this.playerDamageCut):this.bossAction===jt.SKILL_3?Math.floor((201*Math.random()+300)*this.playerDamageCut):this.bossAction===jt.MAGIC_TOOL_1?Math.floor((51*Math.random()+250)*this.playerDamageCut):this.bossAction===jt.MAGIC_TOOL_2?Math.floor((51*Math.random()+150)*this.playerDamageCut):this.bossAction===jt.MAGIC_TOOL_3?Math.floor((101*Math.random()+400)*this.playerDamageCut):this.bossAction===jt.SPECIAL_MOVE?Math.floor((201*Math.random()+500)*this.playerDamageCut):0},e.calcuBossDamage=function(){return this.playerAttackUp?Math.floor((41*Math.random()+140)*this.playerDamageAdd):Math.floor((51*Math.random()+100)*this.playerDamageAdd)},e.bossAttackHitted=function(t,e){var i=0;return t===jt.NORMAL_ATTACK?i=1:t===jt.SKILL_1||t===jt.SKILL_2||t===jt.SKILL_3?i=.95:t===jt.MAGIC_TOOL_1?i=.85:t===jt.MAGIC_TOOL_2?i=.9:(t===jt.MAGIC_TOOL_3||t===jt.SPECIAL_MOVE)&&(i=.95),i-=.02*this.playerStatus.dv,1===this.playerStatus.dv?i-=.02:2===this.playerStatus.dv?i-=.04:3===this.playerStatus.dv?i-=.06:4===this.playerStatus.dv?i-=.08:5===this.playerStatus.dv?i-=.1:6===this.playerStatus.dv?i-=.12:7===this.playerStatus.dv?i-=.15:8===this.playerStatus.dv?i-=.2:9===this.playerStatus.dv?i-=.25:10===this.playerStatus.dv&&(i-=.3),e&&(i-=.5),Math.random()<=i},e.playerAttackHitted=function(t){if(this.bossAction===jt.AVOID&&t!==Et.SKILL_5)return!1;var e=0;return 0===t?e=.5:t===Et.SKILL_1||t===Et.SKILL_2||t===Et.SKILL_3||t===Et.SKILL_4?e=.45:t===Et.SKILL_5?e=1.05:t===Et.SKILL_6&&(e=.55),1===this.playerStatus.hit?e+=.2:2===this.playerStatus.hit?e+=.25:3===this.playerStatus.hit?e+=.3:4===this.playerStatus.hit?e+=.35:5===this.playerStatus.hit?e+=.4:6===this.playerStatus.hit?e+=.45:7===this.playerStatus.hit?e+=.5:8===this.playerStatus.hit?e+=1:9===this.playerStatus.hit?e+=1.2:10===this.playerStatus.hit&&(e+=1.45),this.playerHitDown&&(e/=2),Math.random()<=e},e.playerAttackCritical=function(t){var e=0;return 0===t?(e=.15,e+=.04*this.playerStatus.crit):t===Et.SKILL_1?(e=.3,e+=.06*this.playerStatus.crit):t===Et.SKILL_2?(e=.05,e+=.04*this.playerStatus.crit):t===Et.SKILL_3?(e=.1,e+=.08*this.playerStatus.crit):(t===Et.SKILL_4||t===Et.SKILL_5||t===Et.SKILL_6)&&(e=.05,e+=.04*this.playerStatus.crit),this.playerCriticalUp&&(e+=.5),Math.random()<=e},e.bossAttackCritical=function(t){var e=0;return t===jt.NORMAL_ATTACK?e=.15:t===jt.SKILL_1?e=.2:t===jt.SKILL_2||t===jt.SKILL_3?e=.15:t===jt.SPECIAL_MOVE&&(e=.3),Math.random()<e},e.decideBossState=function(){if(10500<=this.bossStatus.hp){var t=[Gt.SWORD_VERTICAL,Gt.SWORD_HORIZON,Gt.SWORD_UP,Gt.SWORD_CROSS,Gt.SWORD_DOWN,Gt.RIGHT_FOOT_FORWARD,Gt.LEFT_FOOT_FORWARD,Gt.RIGHT_HAND_FORWARD,Gt.LEFT_HAND_FORWARD],e=Math.random();e>=.8?this.bossState=t[0]:e>=.6&&e<.8?this.bossState=t[1]:e>=.4&&e<.6?this.bossState=t[2]:e>=.25&&e<.4?this.bossState=t[3]:e>=.2&&e<.25?this.bossState=t[4]:e>=.15&&e<.2?this.bossState=t[5]:e>=.1&&e<.15?this.bossState=t[6]:e>=.05&&e<.1?this.bossState=t[7]:e>=0&&e<.05&&(this.bossState=t[8])}else if(6e3<=this.bossStatus.hp&&this.bossStatus.hp<10500){var i=[Gt.SWORD_VERTICAL,Gt.SWORD_HORIZON,Gt.SWORD_UP,Gt.SWORD_CROSS,Gt.SWORD_DOWN,Gt.RIGHT_FOOT_FORWARD,Gt.LEFT_FOOT_FORWARD,Gt.RIGHT_HAND_FORWARD,Gt.LEFT_HAND_FORWARD],n=Math.random();n>=.85?this.bossState=i[0]:n>=.7&&n<.85?this.bossState=i[1]:n>=.55&&n<.7?this.bossState=i[2]:n>=.45&&n<.55?this.bossState=i[3]:n>=.4&&n<.45?this.bossState=i[4]:n>=.3&&n<.4?this.bossState=i[5]:n>=.2&&n<.3?this.bossState=i[6]:n>=.1&&n<.2?this.bossState=i[7]:n>=0&&n<.1&&(this.bossState=i[8])}else if(3e3<=this.bossStatus.hp&&this.bossStatus.hp<6e3){var r=[Gt.SWORD_VERTICAL,Gt.SWORD_HORIZON,Gt.SWORD_UP,Gt.SWORD_CROSS,Gt.SWORD_DOWN,Gt.RIGHT_FOOT_FORWARD,Gt.LEFT_FOOT_FORWARD,Gt.RIGHT_HAND_FORWARD,Gt.LEFT_HAND_FORWARD],o=Math.random();o>=.95?this.bossState=r[0]:o>=.9&&o<.95?this.bossState=r[1]:o>=.75&&o<.9?this.bossState=r[2]:o>=.6&&o<.75?this.bossState=r[3]:o>=.5&&o<.6?this.bossState=r[4]:o>=.4&&o<.5?this.bossState=r[5]:o>=.3&&o<.4?this.bossState=r[6]:o>=.15&&o<.3?this.bossState=r[7]:o>=0&&o<.15&&(this.bossState=r[8])}else if(1<=this.bossStatus.hp&&this.bossStatus.hp<3e3){var a=[Gt.SWORD_VERTICAL,Gt.SWORD_HORIZON,Gt.SWORD_UP,Gt.SWORD_CROSS,Gt.SWORD_DOWN,Gt.RIGHT_FOOT_FORWARD,Gt.LEFT_FOOT_FORWARD,Gt.RIGHT_HAND_FORWARD,Gt.LEFT_HAND_FORWARD,Gt.LOW_POSTURE],s=Math.random();s>=.95?this.bossState=a[0]:s>=.9&&s<.95?this.bossState=a[1]:s>=.8&&s<.9?this.bossState=a[2]:s>=.7&&s<.8?this.bossState=a[3]:s>=.6&&s<.7?this.bossState=a[4]:s>=.5&&s<.6?this.bossState=a[5]:s>=.4&&s<.5?this.bossState=a[6]:s>=.3&&s<.4?this.bossState=a[7]:s>=.2&&s<.3?this.bossState=a[8]:s>=0&&s<.2&&(this.bossState=a[9])}},e.decideBossAction=function(){if(this.bossState===Gt.SWORD_VERTICAL){var t=[jt.NORMAL_ATTACK,jt.SKILL_1,jt.SKILL_2,jt.GUARD],e=Math.random();e>=.3?this.bossAction=t[0]:e>=.2&&e<.3?this.bossAction=t[1]:e>=.1&&e<.2?this.bossAction=t[2]:e>=0&&e<.1&&(this.bossAction=t[3])}if(this.bossState===Gt.SWORD_HORIZON){var i=[jt.NORMAL_ATTACK,jt.SKILL_1,jt.GUARD,jt.AVOID],n=Math.random();n>=.5?this.bossAction=i[0]:n>=.3&&n<.5?this.bossAction=i[1]:n>=.15&&n<.3?this.bossAction=i[2]:n>=0&&n<.15&&(this.bossAction=i[3])}if(this.bossState===Gt.SWORD_DOWN){var r=[jt.AVOID,jt.SKILL_1,jt.NORMAL_ATTACK,jt.MAGIC_TOOL_2],o=Math.random();o>=.5?this.bossAction=r[0]:o>=.4&&o<.5?this.bossAction=r[1]:o>=.2&&o<.4?this.bossAction=r[2]:o>=0&&o<.2&&(this.bossAction=r[3])}if(this.bossState===Gt.SWORD_CROSS){var a=[jt.SKILL_3,jt.SKILL_2,jt.NORMAL_ATTACK],s=Math.random();s>=.5?this.bossAction=a[0]:s>=.25&&s<.5?this.bossAction=a[1]:s>=0&&s<.25&&(this.bossAction=a[2])}if(this.bossState===Gt.SWORD_UP){var u=[jt.SKILL_2,jt.SKILL_3,jt.NORMAL_ATTACK,jt.GUARD],c=Math.random();c>=.5?this.bossAction=u[0]:c>=.3&&c<.5?this.bossAction=u[1]:c>=.15&&c<.3?this.bossAction=u[2]:c>=0&&c<.15&&(this.bossAction=u[3])}if(this.bossState===Gt.LOW_POSTURE){var l=[jt.SKILL_2,jt.SKILL_3,jt.SPECIAL_MOVE],p=Math.random();p>=.8?this.bossAction=l[0]:p>=.5&&p<.8?this.bossAction=l[1]:p>=0&&p<.5&&(this.bossAction=l[2])}if(this.bossState===Gt.RIGHT_HAND_FORWARD){var h=[jt.MAGIC_TOOL_1,jt.MAGIC_TOOL_2,jt.NORMAL_ATTACK,jt.GUARD],f=Math.random();f>=.6?this.bossAction=h[0]:f>=.3&&f<.6?this.bossAction=h[1]:f>=.15&&f<.3?this.bossAction=h[2]:f>=0&&f<.15&&(this.bossAction=h[3])}if(this.bossState===Gt.LEFT_HAND_FORWARD){var d=[jt.MAGIC_TOOL_1,jt.MAGIC_TOOL_3,jt.NORMAL_ATTACK,jt.GUARD],y=Math.random();y>=.8?this.bossAction=d[0]:y>=.3&&y<.8?this.bossAction=d[1]:y>=.15&&y<.3?this.bossAction=d[2]:y>=0&&y<.15&&(this.bossAction=d[3])}if(this.bossState===Gt.RIGHT_FOOT_FORWARD){var m=[jt.GUARD,jt.NORMAL_ATTACK,jt.MAGIC_TOOL_1,jt.SKILL_2],v=Math.random();v>=.5?this.bossAction=m[0]:v>=.3&&v<.5?this.bossAction=m[1]:v>=.1&&v<.3?this.bossAction=m[2]:v>=0&&v<.1&&(this.bossAction=m[3])}if(this.bossState===Gt.LEFT_FOOT_FORWARD){var g=[jt.GUARD,jt.AVOID,jt.MAGIC_TOOL_2,jt.SKILL_3],b=Math.random();b>=.7?this.bossAction=g[0]:b>=.4&&b<.7?this.bossAction=g[1]:b>=.2&&b<.4?this.bossAction=g[2]:b>=0&&b<.2&&(this.bossAction=g[3])}},e.setPlayerDamageRate=function(){1===this.playerStatus.def?this.playerDamageCut=1:2===this.playerStatus.def?this.playerDamageCut=.96:3===this.playerStatus.def?this.playerDamageCut=.91:4===this.playerStatus.def?this.playerDamageCut=.86:5===this.playerStatus.def?this.playerDamageCut=.81:6===this.playerStatus.def?this.playerDamageCut=.78:7===this.playerStatus.def?this.playerDamageCut=.75:8===this.playerStatus.def?this.playerDamageCut=.73:9===this.playerStatus.def?this.playerDamageCut=.71:10===this.playerStatus.def&&(this.playerDamageCut=.69),1===this.playerStatus.atk?this.playerDamageAdd=1.2:2===this.playerStatus.atk?this.playerDamageAdd=1.3:3===this.playerStatus.atk?this.playerDamageAdd=1.4:4===this.playerStatus.atk?this.playerDamageAdd=1.5:5===this.playerStatus.atk?this.playerDamageAdd=1.6:6===this.playerStatus.atk?this.playerDamageAdd=1.65:7===this.playerStatus.atk?this.playerDamageAdd=1.7:8===this.playerStatus.atk?this.playerDamageAdd=1.75:9===this.playerStatus.atk?this.playerDamageAdd=1.8:10===this.playerStatus.atk&&(this.playerDamageAdd=1.85)},t}();function Dt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function qt(t){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lt(t,e){return!e||"object"!==Mt(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bt(t,e){return(Bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mt=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Ut(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=qt(t);if(e){var r=qt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Lt(this,i)}}var Nt=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bt(t,e)}(i,t);var e=Ut(i);function i(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=e.call(this)).elapsedFrameCount=0,r.onAnimationEnded=function(){},r.text=t,r.text.anchor.set(.5,.5),r.text.alpha=0,r.text.position.set(0,0),r.onAnimationEnded=n,r.addChild(r.text),r}var n,r,o,a=i.prototype;return a.isDestroyed=function(){return this._destroyed},a.update=function(t){this.isDestroyed()||(this.elapsedFrameCount++,this.elapsedFrameCount<=25&&(this.text.alpha+=.04),this.elapsedFrameCount>=0&&this.elapsedFrameCount<=10&&(this.text.position.y-=5),50===this.elapsedFrameCount&&(this.destroy(),this.onAnimationEnded()))},n=i,o=[{key:"resourceList",get:function(){return[]}}],(r=null)&&Dt(n.prototype,r),o&&Dt(n,o),i}(o.W20);function Wt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ht(t){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kt(t,e){return!e||"object"!==Yt(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vt(t,e){return(Vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yt=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function zt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Ht(t);if(e){var r=Ht(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Kt(this,i)}}var Jt=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vt(t,e)}(i,t);var e=zt(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.NormalAttack(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.NormalAttack))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();3===r&&h.playSe(g.Audio.Se.NormalAttack),this.sprite.texture=g.TextureFrame.NormalAttack(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.NormalAttack,g.Audio.Se.NormalAttack]}}],(r=null)&&Wt(n.prototype,r),a&&Wt(n,a),i}(o.W20);function Xt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Zt(t){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $t(t,e){return!e||"object"!==te(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qt(t,e){return(Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Jt.TextureFrameUpdateFrequency=3;var te=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function ee(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Zt(t);if(e){var r=Zt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return $t(this,i)}}var ie=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qt(t,e)}(i,t);var e=ee(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.NormalBossAttack(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.NormalBossAttack))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();3===r&&h.playSe(g.Audio.Se.NormalAttack),this.sprite.texture=g.TextureFrame.NormalBossAttack(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.NormalBossAttack]}}],(r=null)&&Xt(n.prototype,r),a&&Xt(n,a),i}(o.W20);ie.TextureFrameUpdateFrequency=3;var ne=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.animationType="idle",this.elapsedFrameCount=0,this.destroyed=!1,this.onAnimationEnded=function(){},this.sprite=e}var e=t.prototype;return e.isDestroyed=function(){return this.destroyed},e.destroy=function(){this.sprite.destroy(),this.destroyed=!0},e.update=function(t){this.updateAnimation()},e.updateAnimation=function(){if("idle"!==this.animationType&&"damaged"===this.animationType){if(8===this.elapsedFrameCount)return this.animationType="idle",this.sprite.position.x=320,this.sprite.texture=o.P6Y.kN[g.Static.BossTexture.Idle],void this.onAnimationEnded();if(0===this.elapsedFrameCount)this.sprite.texture=o.P6Y.kN[g.Static.BossTexture.Damaged],this.sprite.position.x=this.sprite.position.x+10;else if(this.elapsedFrameCount%2===0){var t;t=this.sprite.position.x>320?-1:1,this.sprite.position.x=this.sprite.position.x+20*t}this.elapsedFrameCount++}},e.requestAnimation=function(t,e){this.elapsedFrameCount=0,this.animationType=t,this.onAnimationEnded=e},t}();function re(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function oe(t){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ae(t,e){return!e||"object"!==ue(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function se(t,e){return(se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ue=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function ce(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=oe(t);if(e){var r=oe(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ae(this,i)}}var le=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&se(t,e)}(i,t);var e=ce(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.reducingFrameCount=4,n.frame=new o.jyi,n.gauge=new o.jyi,n.gaugeEmpty=new o.jyi,n.fromPercent=1,n.toPercent=1,n.frame.texture=o.P6Y.kN[g.Static.GaugeFrame],"hp"===t?n.gauge.texture=o.P6Y.kN[g.Static.HpBar]:"fp"===t&&(n.gauge.texture=o.P6Y.kN[g.Static.FpBar]),n.gaugeEmpty.texture=o.P6Y.kN[g.Static.GaugeEmpty],n.gaugeEmpty.scale.set(.95,.5),n.gauge.scale.set(.95,.5),n.gaugeMaxWidth=n.gauge.width,n.frame.anchor.set(.5,.5),n.gauge.anchor.set(0,.5),n.gaugeEmpty.anchor.set(.5,.5),n.gauge.position.x=-114,n.addChild(n.gaugeEmpty),n.addChild(n.gauge),n.addChild(n.frame),n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!(this.elapsedFrameCount>this.reducingFrameCount)&&(this.elapsedFrameCount++,this.elapsedFrameCount<=this.reducingFrameCount)){var e=this.fromPercent-this.toPercent,i=this.elapsedFrameCount/this.reducingFrameCount,n=this.fromPercent-e*i;this.gauge.width=this.gaugeMaxWidth*n}},s.scaleGauge=function(t,e){this.elapsedFrameCount=0,this.fromPercent=t,this.toPercent=e},n=i,a=[{key:"resourceList",get:function(){return[g.Static.GaugeFrame,g.Static.HpBar,g.Static.FpBar,g.Static.GaugeEmpty]}}],(r=null)&&re(n.prototype,r),a&&re(n,a),i}(o.W20);function pe(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function he(t){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fe(t,e){return!e||"object"!==ye(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function de(t,e){return(de=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ye=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function me(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=he(t);if(e){var r=he(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return fe(this,i)}}var ve=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&de(t,e)}(i,t);var e=me(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.HpRecover(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.HpRecover))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&h.playSe(g.Audio.Se.HpRecover),this.sprite.texture=g.TextureFrame.HpRecover(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.HpRecover,g.Audio.Se.HpRecover]}}],(r=null)&&pe(n.prototype,r),a&&pe(n,a),i}(o.W20);function ge(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function be(t){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Se(t,e){return!e||"object"!==we(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _e(t,e){return(_e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}ve.TextureFrameUpdateFrequency=4;var we=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Oe(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=be(t);if(e){var r=be(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Se(this,i)}}var Pe=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_e(t,e)}(i,t);var e=Oe(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.FpRecover(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.FpRecover))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&h.playSe(g.Audio.Se.FpRecover),this.sprite.texture=g.TextureFrame.FpRecover(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.FpRecover,g.Audio.Se.FpRecover]}}],(r=null)&&ge(n.prototype,r),a&&ge(n,a),i}(o.W20);function Te(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xe(t){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ae(t,e){return!e||"object"!==Ce(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Re(t,e){return(Re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Pe.TextureFrameUpdateFrequency=4;var Ce=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Fe(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=xe(t);if(e){var r=xe(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ae(this,i)}}var Ee=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Re(t,e)}(i,t);var e=Fe(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.FullRecover(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.FullRecover))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&h.playSe(g.Audio.Se.FullRecover),this.sprite.texture=g.TextureFrame.FullRecover(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.FullRecover,g.Audio.Se.FullRecover]}}],(r=null)&&Te(n.prototype,r),a&&Te(n,a),i}(o.W20);function ke(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function je(t){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ge(t,e){return!e||"object"!==De(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ie(t,e){return(Ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ee.TextureFrameUpdateFrequency=4;var De=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function qe(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=je(t);if(e){var r=je(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ge(this,i)}}var Le=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ie(t,e)}(i,t);var e=qe(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.Cure(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.Cure))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&h.playSe(g.Audio.Se.Cure),this.sprite.texture=g.TextureFrame.Cure(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.Cure,g.Audio.Se.Cure]}}],(r=null)&&ke(n.prototype,r),a&&ke(n,a),i}(o.W20);function Be(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Me(t){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ue(t,e){return!e||"object"!==We(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ne(t,e){return(Ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Le.TextureFrameUpdateFrequency=4;var We=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function He(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Me(t);if(e){var r=Me(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ue(this,i)}}var Ke=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ne(t,e)}(i,t);var e=He(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.AttackUp(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.AttackUp))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&h.playSe(g.Audio.Se.StatusUp),this.sprite.texture=g.TextureFrame.AttackUp(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.AttackUp]}}],(r=null)&&Be(n.prototype,r),a&&Be(n,a),i}(o.W20);function Ve(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ye(t){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ze(t,e){return!e||"object"!==Xe(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Je(t,e){return(Je=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ke.TextureFrameUpdateFrequency=4;var Xe=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Ze(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Ye(t);if(e){var r=Ye(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ze(this,i)}}var $e=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Je(t,e)}(i,t);var e=Ze(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.CriticalUp(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.CriticalUp))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&h.playSe(g.Audio.Se.StatusUp),this.sprite.texture=g.TextureFrame.CriticalUp(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.CriticalUp]}}],(r=null)&&Ve(n.prototype,r),a&&Ve(n,a),i}(o.W20);function Qe(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ti(t){return(ti=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ei(t,e){return!e||"object"!==ni(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ii(t,e){return(ii=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}$e.TextureFrameUpdateFrequency=4;var ni=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function ri(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ti(t);if(e){var r=ti(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ei(this,i)}}var oi=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ii(t,e)}(i,t);var e=ri(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.DvUp(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.DvUp))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&h.playSe(g.Audio.Se.StatusUp),this.sprite.texture=g.TextureFrame.DvUp(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.DvUp,g.Audio.Se.StatusUp]}}],(r=null)&&Qe(n.prototype,r),a&&Qe(n,a),i}(o.W20);function ai(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function si(t){return(si=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ui(t,e){return!e||"object"!==li(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ci(t,e){return(ci=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}oi.TextureFrameUpdateFrequency=4;var li=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function pi(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=si(t);if(e){var r=si(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ui(this,i)}}var hi=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ci(t,e)}(i,t);var e=pi(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.PlayerSkill1(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.PlayerSkill1))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();4===r&&h.playSe(g.Audio.Se.NormalAttack),12===r&&h.playSe(g.Audio.Se.NormalAttack),this.sprite.texture=g.TextureFrame.PlayerSkill1(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.PlayerSkill1]}}],(r=null)&&ai(n.prototype,r),a&&ai(n,a),i}(o.W20);function fi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function di(t){return(di=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yi(t,e){return!e||"object"!==vi(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mi(t,e){return(mi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}hi.TextureFrameUpdateFrequency=2;var vi=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function gi(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=di(t);if(e){var r=di(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return yi(this,i)}}var bi=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mi(t,e)}(i,t);var e=gi(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.PlayerSkill2(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.PlayerSkill2_0)+g.MaxFrameIndex(g.Static.PlayerSkill2_1))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&h.playSe(g.Audio.Se.PlayerSkill2),this.sprite.texture=g.TextureFrame.PlayerSkill2(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.PlayerSkill2_0,g.Static.PlayerSkill2_1,g.Audio.Se.PlayerSkill2]}}],(r=null)&&fi(n.prototype,r),a&&fi(n,a),i}(o.W20);function Si(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _i(t){return(_i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wi(t,e){return!e||"object"!==Pi(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oi(t,e){return(Oi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}bi.TextureFrameUpdateFrequency=3;var Pi=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Ti(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=_i(t);if(e){var r=_i(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return wi(this,i)}}var xi=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oi(t,e)}(i,t);var e=Ti(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.PlayerSkill3(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.PlayerSkill3))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&h.playSe(g.Audio.Se.PlayerSkill3),5===r&&h.playSe(g.Audio.Se.Hit),this.sprite.texture=g.TextureFrame.PlayerSkill3(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.PlayerSkill3,g.Audio.Se.PlayerSkill3,g.Audio.Se.Hit]}}],(r=null)&&Si(n.prototype,r),a&&Si(n,a),i}(o.W20);function Ai(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ri(t){return(Ri=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ci(t,e){return!e||"object"!==Ei(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fi(t,e){return(Fi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}xi.TextureFrameUpdateFrequency=3;var Ei=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function ki(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Ri(t);if(e){var r=Ri(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ci(this,i)}}var ji=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fi(t,e)}(i,t);var e=ki(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.PlayerSkill4(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.PlayerSkill4))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&h.playSe(g.Audio.Se.PlayerSkill4),this.sprite.texture=g.TextureFrame.PlayerSkill4(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.PlayerSkill4,g.Audio.Se.PlayerSkill4]}}],(r=null)&&Ai(n.prototype,r),a&&Ai(n,a),i}(o.W20);function Gi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ii(t){return(Ii=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Di(t,e){return!e||"object"!==Li(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qi(t,e){return(qi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}ji.TextureFrameUpdateFrequency=3;var Li=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Bi(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Ii(t);if(e){var r=Ii(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Di(this,i)}}var Mi=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qi(t,e)}(i,t);var e=Bi(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.PlayerSkill5(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.PlayerSkill5))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();r%2===0&&h.playSe(g.Audio.Se.NormalAttack),this.sprite.texture=g.TextureFrame.PlayerSkill5(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.PlayerSkill5]}}],(r=null)&&Gi(n.prototype,r),a&&Gi(n,a),i}(o.W20);function Ui(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ni(t){return(Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wi(t,e){return!e||"object"!==Ki(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Hi(t,e){return(Hi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Mi.TextureFrameUpdateFrequency=3;var Ki=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Vi(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Ni(t);if(e){var r=Ni(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Wi(this,i)}}var Yi=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hi(t,e)}(i,t);var e=Vi(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.PlayerSkill6(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.PlayerSkill6_0)+g.MaxFrameIndex(g.Static.PlayerSkill6_1))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&h.playSe(g.Audio.Se.PlayerSkill6),this.sprite.texture=g.TextureFrame.PlayerSkill6(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.PlayerSkill6_0,g.Static.PlayerSkill6_1,g.Audio.Se.PlayerSkill6]}}],(r=null)&&Ui(n.prototype,r),a&&Ui(n,a),i}(o.W20);function zi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ji(t){return(Ji=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xi(t,e){return!e||"object"!==$i(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zi(t,e){return(Zi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Yi.TextureFrameUpdateFrequency=3;var $i=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Qi(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Ji(t);if(e){var r=Ji(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Xi(this,i)}}var tn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zi(t,e)}(i,t);var e=Qi(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.Guard(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.Guard))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();3===r&&h.playSe(g.Audio.Se.Guard),this.sprite.texture=g.TextureFrame.Guard(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.Guard,g.Audio.Se.Guard]}}],(r=null)&&zi(n.prototype,r),a&&zi(n,a),i}(o.W20);function en(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function nn(t){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rn(t,e){return!e||"object"!==an(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function on(t,e){return(on=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}tn.TextureFrameUpdateFrequency=8;var an=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function sn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=nn(t);if(e){var r=nn(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return rn(this,i)}}var un=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&on(t,e)}(i,t);var e=sn(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.AllGuard(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.AllGuard))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&h.playSe(g.Audio.Se.AllGuard),this.sprite.texture=g.TextureFrame.AllGuard(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.AllGuard,g.Audio.Se.AllGuard]}}],(r=null)&&en(n.prototype,r),a&&en(n,a),i}(o.W20);function cn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ln(t){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pn(t,e){return!e||"object"!==fn(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hn(t,e){return(hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}un.TextureFrameUpdateFrequency=4;var fn=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function dn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ln(t);if(e){var r=ln(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return pn(this,i)}}var yn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hn(t,e)}(i,t);var e=dn(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.BossSkill1(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.BossSkill1))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();4===r&&h.playSe(g.Audio.Se.NormalAttack),12===r&&h.playSe(g.Audio.Se.NormalAttack),this.sprite.texture=g.TextureFrame.BossSkill1(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.BossSkill1]}}],(r=null)&&cn(n.prototype,r),a&&cn(n,a),i}(o.W20);function mn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vn(t){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gn(t,e){return!e||"object"!==Sn(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bn(t,e){return(bn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}yn.TextureFrameUpdateFrequency=3;var Sn=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function _n(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=vn(t);if(e){var r=vn(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return gn(this,i)}}var wn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bn(t,e)}(i,t);var e=_n(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.BossSkill2(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.BossSkill2))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&h.playSe(g.Audio.Se.BossSkill_2),this.sprite.texture=g.TextureFrame.BossSkill2(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.BossSkill2,g.Audio.Se.BossSkill_2]}}],(r=null)&&mn(n.prototype,r),a&&mn(n,a),i}(o.W20);function On(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Pn(t){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tn(t,e){return!e||"object"!==An(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xn(t,e){return(xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}wn.TextureFrameUpdateFrequency=3;var An=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Rn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Pn(t);if(e){var r=Pn(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Tn(this,i)}}var Cn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xn(t,e)}(i,t);var e=Rn(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.BossSkill3(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.BossSkill3_0)+g.MaxFrameIndex(g.Static.BossSkill3_1))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();r%4===0&&h.playSe(g.Audio.Se.NormalAttack),this.sprite.texture=g.TextureFrame.BossSkill3(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.BossSkill3_0,g.Static.BossSkill3_1]}}],(r=null)&&On(n.prototype,r),a&&On(n,a),i}(o.W20);function Fn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function En(t){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kn(t,e){return!e||"object"!==Gn(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jn(t,e){return(jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Cn.TextureFrameUpdateFrequency=3;var Gn=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function In(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=En(t);if(e){var r=En(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return kn(this,i)}}var Dn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jn(t,e)}(i,t);var e=In(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.BossSpecialMove(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.BossSpecialMove))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&h.playSe(g.Audio.Se.SpecialMove1),3===r&&h.playSe(g.Audio.Se.SpecialMove2),this.sprite.texture=g.TextureFrame.BossSpecialMove(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.BossSpecialMove,g.Audio.Se.SpecialMove1,g.Audio.Se.SpecialMove2]}}],(r=null)&&Fn(n.prototype,r),a&&Fn(n,a),i}(o.W20);function qn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ln(t){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bn(t,e){return!e||"object"!==Un(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mn(t,e){return(Mn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Dn.TextureFrameUpdateFrequency=3;var Un=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Nn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Ln(t);if(e){var r=Ln(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Bn(this,i)}}var Wn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mn(t,e)}(i,t);var e=Nn(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.MagicTool1(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.MagicTool1))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&h.playSe(g.Audio.Se.MagicTool1),this.sprite.texture=g.TextureFrame.MagicTool1(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.MagicTool1,g.Audio.Se.MagicTool1]}}],(r=null)&&qn(n.prototype,r),a&&qn(n,a),i}(o.W20);function Hn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Kn(t){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vn(t,e){return!e||"object"!==zn(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yn(t,e){return(Yn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Wn.TextureFrameUpdateFrequency=3;var zn=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Jn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Kn(t);if(e){var r=Kn(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Vn(this,i)}}var Xn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yn(t,e)}(i,t);var e=Jn(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.MagicTool2(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.MagicTool2))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&h.playSe(g.Audio.Se.MagicTool2),this.sprite.texture=g.TextureFrame.MagicTool2(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.MagicTool2,g.Audio.Se.MagicTool2]}}],(r=null)&&Hn(n.prototype,r),a&&Hn(n,a),i}(o.W20);function Zn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $n(t){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qn(t,e){return!e||"object"!==er(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tr(t,e){return(tr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Xn.TextureFrameUpdateFrequency=3;var er=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function ir(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=$n(t);if(e){var r=$n(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Qn(this,i)}}var nr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tr(t,e)}(i,t);var e=ir(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).elapsedFrameCount=0,n.onAnimationEnded=function(){},n.sprite=new o.jyi(g.TextureFrame.MagicTool3(1)),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n.onAnimationEnded=t,n}var n,r,a,s=i.prototype;return s.isDestroyed=function(){return this._destroyed},s.update=function(t){if(!this.isDestroyed()){this.elapsedFrameCount++;var e=i.TextureFrameUpdateFrequency;if(this.elapsedFrameCount%e===0){var n=this.elapsedFrameCount/e,r=Math.floor(n)+1;if(r>g.MaxFrameIndex(g.Static.MagicTool3_0)+g.MaxFrameIndex(g.Static.MagicTool3_1)+g.MaxFrameIndex(g.Static.MagicTool3_2))return this.onAnimationEnded(),this.sprite.destroy(),void this.destroy();2===r&&h.playSe(g.Audio.Se.MagicTool3),this.sprite.texture=g.TextureFrame.MagicTool3(r)}}},n=i,a=[{key:"resourceList",get:function(){return[g.Static.MagicTool3_0,g.Static.MagicTool3_1,g.Static.MagicTool3_2,g.Audio.Se.MagicTool3]}}],(r=null)&&Zn(n.prototype,r),a&&Zn(n,a),i}(o.W20);function rr(t,e,i){return(rr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=or(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function or(t){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ar(t,e){return!e||"object"!==ur(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sr(t,e){return(sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}nr.TextureFrameUpdateFrequency=3;var ur=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function cr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=or(t);if(e){var r=or(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ar(this,i)}}var lr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sr(t,e)}(i,t);var e=cr(i);function i(t,n,r,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(a=e.call(this)).sceneName="score_scene",a.transitionIn=new m(1,0,-.02),a.transitionOut=new m(0,1,.02),a.language=t,a.cp=n,a.turn=r,a.bossHp=o,a}var n=i.prototype;return n.createInitialResourceList=function(){var t=rr(or(i.prototype),"createInitialResourceList",this).call(this);return t.push(g.Audio.Se.OptionTap2),t},n.loadInitialResource=function(t){var e,i=this.createInitialResourceList(),n=g.UI.SceneUiGraph(this.sceneName);e="japanese"===this.language?g.Texts.ScoreScene.Ja:g.Texts.ScoreScene.En,i.push(n),i.push(e);var r=this.filterLoadedAssets(i);r.length>0?f.game.loader.add(r).load(t):t()},n.onInitialResourceLoaded=function(){var t,e=[],i=g.UI.SceneUiGraph(this.sceneName);t="japanese"===this.language?g.Texts.ScoreScene.Ja:g.Texts.ScoreScene.En;var n=f.game.loader.resources[i].data.nodes;n=n.concat(f.game.loader.resources[t].data.nodes);var r=!0,o=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;"sprite"===c.type&&e.push({name:c.params.textureName,url:c.params.url})}}catch(l){o=!0,a=l}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return e},n.onResourceLoaded=function(){var t,e=f.game.loader.resources[g.UI.SceneUiGraph(this.sceneName)].data;t="japanese"===this.language?g.Texts.ScoreScene.Ja:g.Texts.ScoreScene.En;var i=f.game.loader.resources[t].data;this.prepareUiGraphContainer(e),this.prepareUiGraphContainer(i),this.uiGraphContainer.zIndex=1,this.addChild(this.uiGraphContainer),this.initSound(),this.initScore()},n.initScore=function(){var t=this.uiGraph.get("score"),e=this.uiGraph.get("difficulty_easy"),i=this.uiGraph.get("difficulty_normal"),n=this.uiGraph.get("difficulty_hard"),r=this.uiGraph.get("cp"),o=this.uiGraph.get("turn"),a=this.uiGraph.get("boss_hp");if(t&&e&&i&&n&&r&&o&&a){var s=0,u=0;this.cp>=8e3?(s=1e4,u=500,e.visible=!0):this.cp>=7e3&&this.cp<8e3?(s=15e3,u=400,i.visible=!0):this.cp<7e3&&(s=2e4,u=300,n.visible=!0);var c=0;this.bossHp<=0?(c=5e4,a.text="0"):(c=20*-this.bossHp,a.text=this.bossHp.toString()),o.text=this.turn.toString(),r.text=this.cp.toString();var l=s*((13400-this.cp)/1e3)-this.turn*u+c;l<=0&&(l=0),t.text=l.toString()}},n.initSound=function(){var t=f.game.loader.resources,e=[g.Audio.Se.OptionTap2],i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;h.createSound(s,t[s].buffer)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}},n.showTitleScene=function(){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(this.isOver=!0,h.playSe(g.Audio.Se.OptionTap2),f.loadScene(new Qr))},i}(ot);function pr(t,e,i){return(pr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hr(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function hr(t){return(hr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fr(t,e){return!e||"object"!==yr(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dr(t,e){return(dr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yr=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function mr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=hr(t);if(e){var r=hr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return fr(this,i)}}var vr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dr(t,e)}(i,t);var e=mr(i);function i(t,n,r,o,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(s=e.call(this)).texts=new Map,s.whenLoseNames=["emperor_name","player_name","no_name"],s.whenLoseTextIdsArray=[["lose_emperor_message_1"],["lose_player_message_1"],["lose_narrator_message_1"]],s.whenWinNames=["emperor_name","player_name","emperor_name","player_name","emperor_name","player_name","no_name"],s.whenWinTextIdsArray=[["win_emperor_message_1"],["win_player_message_1"],["win_emperor_message_2"],["win_player_message_2"],["win_emperor_message_3","win_emperor_message_4"],["win_player_message_3"],["win_narrator_message_1"]],s.whenEasyWinNames=["emperor_name","player_name","no_name","player_name","emperor_name","no_name"],s.whenEasyWinTextIdsArray=[["easy_win_emperor_message_1"],["easy_win_player_message_1","easy_win_player_message_2"],["easy_win_narrator_message_1"],["easy_win_player_message_3"],["easy_win_emperor_message_2"],["easy_win_narrator_message_2"]],s.sceneName="talk_scene",s.transitionIn=new m(1,0,-.02),s.transitionOut=new m(0,1,.02),s.language=t,s.endingType=r,s.playerStatus=n,s.turn=o,s.bossHp=a,s}var n=i.prototype;return n.createInitialResourceList=function(){var t=pr(hr(i.prototype),"createInitialResourceList",this).call(this);return t.push(g.UI.MessageWindow),t.push(g.Audio.Bgm.TalkBgm),t},n.update=function(t){pr(hr(i.prototype),"update",this).call(this,t)},n.loadInitialResource=function(t){var e,i=this.createInitialResourceList(),n=g.UI.SceneUiGraph(this.sceneName);e="japanese"===this.language?g.Texts.EndingTalkScene.Ja:g.Texts.EndingTalkScene.En,i.push(n),i.push(e);var r=this.filterLoadedAssets(i);r.length>0?f.game.loader.add(r).load(t):t()},n.onResourceLoaded=function(){var t,e=f.game.loader.resources[g.UI.SceneUiGraph(this.sceneName)].data;t="japanese"===this.language?g.Texts.EndingTalkScene.Ja:g.Texts.EndingTalkScene.En;var i,n,r=f.game.loader.resources[t].data;this.prepareUiGraphContainer(e),this.prepareUiGraphContainer(r),this.uiGraphContainer.zIndex=1,this.addChild(this.uiGraphContainer),this.initSound(),"lose"===this.endingType?(i=this.whenLoseTextIdsArray.shift(),n=this.whenLoseNames.shift()):"win"===this.endingType?(i=this.whenWinTextIdsArray.shift(),n=this.whenWinNames.shift()):"easyWin"===this.endingType&&(i=this.whenEasyWinTextIdsArray.shift(),n=this.whenEasyWinNames.shift()),i&&n&&(this.spawnMessageWindow(i,n),h.playBgm(g.Audio.Bgm.TalkBgm,3))},n.initSound=function(){var t=f.game.loader.resources,e=[g.Audio.Bgm.TalkBgm],i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;h.createSound(s,t[s].buffer)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}},n.spawnMessageWindow=function(t,e){var i=this.createTexts(t),n=this.texts.get(e);if(n){var r=new xt(i,n,this);r.zIndex=3,this.addChild(r),this.registerUpdatingObject(r)}},n.createTexts=function(t){var e=[],i=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value,u=this.texts.get(s);u&&e.push(u)}}catch(c){n=!0,r=c}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}return e},n.onMessageWindowClosed=function(){var t,e;"lose"===this.endingType&&0===this.whenLoseNames.length&&this.showNextScene(),"win"===this.endingType&&0===this.whenWinNames.length&&this.showNextScene(),"easyWin"===this.endingType&&0===this.whenEasyWinNames.length&&this.showNextScene(),"lose"===this.endingType&&(t=this.whenLoseTextIdsArray.shift(),e=this.whenLoseNames.shift()),"win"===this.endingType&&(t=this.whenWinTextIdsArray.shift(),e=this.whenWinNames.shift()),"easyWin"===this.endingType&&(t=this.whenEasyWinTextIdsArray.shift(),e=this.whenEasyWinNames.shift()),t&&e&&this.spawnMessageWindow(t,e)},n.prepareUiGraphContainer=function(t){var e=!0,i=!1,n=void 0;try{for(var r,o=t.nodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=Z.getFactory(a.type)||this.getCustomUiGraphFactory(a.type);if(s){var u=s.createUiNodeByGraphElement(a);u&&(a.events&&s.attachUiEventByGraphElement(a.events,u,this),"message"===a.type?this.texts.set(a.id,u):(this.uiGraph.set(a.id,u),this.uiGraphContainer.addChild(u)))}}}catch(c){i=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}},n.onSkipButtonTapped=function(){h.playSe(g.Audio.Se.OptionTap2),this.showNextScene()},n.showNextScene=function(){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(h.destroySound(g.Audio.Bgm.TalkBgm),this.isOver=!0,f.loadScene(new lr(this.language,this.playerStatus.cp,this.turn,this.bossHp)))},i}(ot);function gr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function br(t,e,i){return(br="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sr(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function Sr(t){return(Sr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _r(t,e){return!e||"object"!==Or(e)&&"function"!==typeof e?gr(t):e}function wr(t,e){return(wr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Or=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Pr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Sr(t);if(e){var r=Sr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return _r(this,i)}}var Tr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wr(t,e)}(i,t);var e=Pr(i);function i(t,n,r){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(a=e.call(this)).itemNumbers=new Map,a.first_select=new o.W20,a.battle_select=new o.W20,a.texts=new Map,a.animationType="idle",a.itemPage=new o.W20,a.skillPage=new o.W20,a.itemNames1=new o.W20,a.itemNames2=new o.W20,a.selectedItemMarker=null,a.selectedSkillMarker=null,a.selectedItemName="",a.selectedItemNumberId="",a.selectedSkillType=0,a.backToTitle=new o.W20,a.sceneName="battle_scene",a.transitionIn=new m(1,0,-.02),a.transitionOut=new m(0,1,.02),a.itemNumbers=n,a.playerStatus=t,a.language=r||"japanese",a.gameLogic=new It(gr(a),a.playerStatus),a.loadSaveDataFromDB(),a}var n=i.prototype;return n.createInitialResourceList=function(){var t=br(Sr(i.prototype),"createInitialResourceList",this).call(this);return t.push(g.Static.BossTexture.Damaged),t.push(g.Audio.Bgm.BossBgm),t.concat(g.Items,Jt.resourceList,ie.resourceList,ve.resourceList,Pe.resourceList,Ee.resourceList,Le.resourceList,Ke.resourceList,$e.resourceList,oi.resourceList,hi.resourceList,bi.resourceList,xi.resourceList,ji.resourceList,Mi.resourceList,Yi.resourceList,tn.resourceList,un.resourceList,yn.resourceList,wn.resourceList,Cn.resourceList,Dn.resourceList,le.resourceList,Wn.resourceList,Xn.resourceList,nr.resourceList)},n.loadInitialResource=function(t){var e,i=this.createInitialResourceList(),n=g.UI.SceneUiGraph(this.sceneName);e="japanese"===this.language?g.Texts.BattleScene.Ja:g.Texts.BattleScene.En,i.push(n),i.push(e);var r=this.filterLoadedAssets(i);r.length>0?f.game.loader.add(r).load(t):t()},n.update=function(t){br(Sr(i.prototype),"update",this).call(this,t),this.updatePlayerDamaged()},n.onResourceLoaded=function(){var t,e=f.game.loader.resources[g.UI.SceneUiGraph(this.sceneName)].data;t="japanese"===this.language?g.Texts.BattleScene.Ja:g.Texts.BattleScene.En;var i=f.game.loader.resources[t].data;this.prepareUiGraphContainer(e),this.prepareUiGraphContainer(i),this.uiGraphContainer.zIndex=1,this.battle_select.visible=!1,this.uiGraphContainer.addChild(this.first_select),this.uiGraphContainer.addChild(this.battle_select),this.registerUpdatingObject(this.boss),this.uiGraphContainer.addChild(this.boss.sprite),this.createGauge(),this.initItemNumber(),this.itemNames2.visible=!1,this.itemPage.addChild(this.itemNames1),this.itemPage.addChild(this.itemNames2),this.itemPage.visible=!1,this.uiGraphContainer.addChild(this.itemPage),this.skillPage.visible=!1,this.uiGraphContainer.addChild(this.skillPage),this.backToTitle.visible=!1,this.uiGraphContainer.addChild(this.backToTitle),this.addChild(this.uiGraphContainer),this.initSound(),this.playBgmIfNeeded(),this.itemAndSkillFirstSelect(),this.spawnBossState(1),this.initPlayerHpFpText(),this.initPlayerStatusText()},n.initPlayerStatusText=function(){var t=this.uiGraph.get("cp"),e=this.uiGraph.get("hp"),i=this.uiGraph.get("fp"),n=this.uiGraph.get("atk"),r=this.uiGraph.get("def"),o=this.uiGraph.get("dv"),a=this.uiGraph.get("hit"),s=this.uiGraph.get("crit"),u=this.uiGraph.get("max_hp"),c=this.uiGraph.get("max_fp"),l=this.uiGraph.get("max_atk"),p=this.uiGraph.get("max_def"),h=this.uiGraph.get("max_dv"),f=this.uiGraph.get("max_hit"),d=this.uiGraph.get("max_crit");t&&e&&i&&n&&r&&o&&a&&s&&u&&c&&l&&p&&h&&f&&d&&(t.text=this.playerStatus.cp.toString(),e.text=this.playerStatus.hp.toString(),i.text=this.playerStatus.fp.toString(),n.text=this.playerStatus.atk.toString(),r.text=this.playerStatus.def.toString(),o.text=this.playerStatus.dv.toString(),a.text=this.playerStatus.hit.toString(),s.text=this.playerStatus.crit.toString(),1200===this.playerStatus.hp?(e.visible=!1,u.visible=!0):(e.visible=!0,u.visible=!1),1200===this.playerStatus.fp?(i.visible=!1,c.visible=!0):(i.visible=!0,c.visible=!1),10===this.playerStatus.atk?(n.visible=!1,l.visible=!0):(n.visible=!0,l.visible=!1),10===this.playerStatus.def?(r.visible=!1,p.visible=!0):(r.visible=!0,p.visible=!1),10===this.playerStatus.dv?(o.visible=!1,h.visible=!0):(o.visible=!0,h.visible=!1),10===this.playerStatus.hit?(a.visible=!1,f.visible=!0):(a.visible=!0,f.visible=!1),10===this.playerStatus.crit?(s.visible=!1,d.visible=!0):(s.visible=!0,d.visible=!1))},n.initPlayerHpFpText=function(){var t=this.uiGraph.get("player_hp"),e=this.uiGraph.get("player_fp");t&&e&&(t.text=this.playerStatus.hp.toString(),e.text=this.playerStatus.fp.toString())},n.initSound=function(){var t=f.game.loader.resources,e=[g.Audio.Se.Hit,g.Audio.Se.Guard,g.Audio.Se.AllGuard,g.Audio.Se.Cure,g.Audio.Se.StatusUp,g.Audio.Se.HpRecover,g.Audio.Se.FpRecover,g.Audio.Se.FullRecover,g.Audio.Se.NormalAttack,g.Audio.Se.PlayerSkill2,g.Audio.Se.PlayerSkill3,g.Audio.Se.PlayerSkill4,g.Audio.Se.PlayerSkill6,g.Audio.Se.BossSkill_2,g.Audio.Se.SpecialMove1,g.Audio.Se.SpecialMove2,g.Audio.Se.MagicTool1,g.Audio.Se.MagicTool2,g.Audio.Se.MagicTool3],i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;h.createSound(s,t[s].buffer)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}},n.itemAndSkillFirstSelect=function(){var t,e;"japanese"===this.language?(e="\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u304c\u3067\u3084\u3059\u3044\u3000FP -200",t="300HP\u304b\u3044\u3075\u304f"):(e="Easy to be critical\u3000FP -200",t="Recover 300HP"),this.onItemNameTapped("items/potion3_04.png","item_marker_1",t,"hpPotion","item_1_number",!1),this.onSkillNameTapped(1,"skill_marker_1",e,!1)},n.initItemNumber=function(){for(var t=Object.keys(g.ItemNumberAndItemName),e=Object.values(g.ItemNumberAndItemName),i=0;i<e.length;i++){var n=e[i],r=t[i],o=this.uiGraph.get(r),a=this.itemNumbers.get(n);if(!o||void 0===a)return;o.text=a.toString()}},n.createGauge=function(){this.hpGauge=new le("hp"),this.fpGauge=new le("fp"),this.registerUpdatingObject(this.hpGauge),this.registerUpdatingObject(this.fpGauge),this.hpGauge.position.set(150,30),this.fpGauge.position.set(150,60),this.hpGauge.scale.set(.8,1),this.fpGauge.scale.set(.8,1),this.uiGraphContainer.addChild(this.hpGauge),this.uiGraphContainer.addChild(this.fpGauge)},n.onBattleButtonTapped=function(){h.playSe(g.Audio.Se.OptionTap),this.first_select.visible=!1,this.battle_select.visible=!0,this.backToTitle.visible=!1},n.onReturnButtonTapped=function(){h.playSe(g.Audio.Se.OptionTap),this.battle_select.visible=!1,this.itemPage.visible=!1,this.skillPage.visible=!1,this.first_select.visible=!0},n.onSkillReturnButtonTapped=function(){h.playSe(g.Audio.Se.OptionTap),this.skillPage.visible=!1,this.battle_select.visible=!0},n.onItemButtonTapped=function(){h.playSe(g.Audio.Se.OptionTap),this.first_select.visible=!1,this.itemPage.visible=!0,this.backToTitle.visible=!1},n.onSkillButtonTapped=function(){h.playSe(g.Audio.Se.OptionTap),this.battle_select.visible=!1,this.skillPage.visible=!0},n.onAttackButtonTapped=function(){var t=this.uiGraph.get("boss_state");t&&(t.visible=!1,this.battle_select.visible=!1,this.spawnEffect("playerNormalAttack",(function(){})),this.gameLogic.onAttackButtonTapped())},n.onGuardButtonTapped=function(){var t=this,e=this.uiGraph.get("boss_state");e&&(e.visible=!1,this.battle_select.visible=!1,this.gameLogic.onGuardButtonTapped(),this.spawnEffect("playerGuard",(function(){t.gameLogic.bossTurn()})))},n.onItemUseButtonTapped=function(){h.playSe(g.Audio.Se.OptionTap);var t=this.itemNumbers.get(this.selectedItemName),e=this.uiGraph.get(this.selectedItemNumberId);if(t&&e){this.itemNumbers.set(this.selectedItemName,t-1),e.text=(t-1).toString(),this.itemPage.visible=!1;var i=this.uiGraph.get("boss_state");i&&(i.visible=!1,this.gameLogic.onItemUsed(this.selectedItemName))}},n.onSkillUseButtonTapped=function(){var t=this.uiGraph.get("boss_state");t&&(t.visible=!1,this.skillPage.visible=!1,this.selectedSkillType!==Et.SKILL_6&&this.spawnEffect(this.selectedSkillType,(function(){})),this.gameLogic.onSkillUsed(this.selectedSkillType))},n.onPlayerAttackMissed=function(){var t=this;this.spawnText("MISS",450,280,(function(){t.gameLogic.bossTurn()}))},n.onBossAttackMissed=function(t,e,i,n,r,o,a,s){var u,c,l=this.uiGraph.get("hit_down"),p=this.uiGraph.get("defense_down"),h=this.uiGraph.get("attack_up"),f=this.uiGraph.get("critical_up"),d=this.uiGraph.get("dv_up"),y=this.selectEffectName(e);if("japanese"===this.language?(u="\u7687\u5e1d\u306e\u30bf\u30fc\u30f3\uff01",c="\u7687\u5e1d\u306f\u9b54\u5177\u3092\u4f7f\u3063\u305f\uff01"):(u="The emperor's turn!",c="The emperor used a magic tool!"),e===jt.MAGIC_TOOL_1||e===jt.MAGIC_TOOL_2||e===jt.MAGIC_TOOL_3){var m=this;this.spawnText(u,320,550,(function(){var e=m;m.spawnText(c,320,550,(function(){var u=e;e.spawnEffect(y,(function(){var e=u;u.spawnText("MISS",320,550,(function(){l&&p&&h&&f&&d&&(l.visible=!1,p.visible=!1,h.visible=!1,f.visible=!1,d.visible=!1,i&&(l.visible=!0),n&&(p.visible=!0),o&&(h.visible=!0),a&&(f.visible=!0),s&&(d.visible=!0),r?(e.spawnEffect(e.selectedSkillType,(function(){})),e.gameLogic.onSkillUsed(e.selectedSkillType)):(e.first_select.visible=!0,e.spawnBossState(t)))}))}))}))}))}else{var v=this;this.spawnText(u,320,550,(function(){var e=v;v.spawnEffect(y,(function(){var u=e;e.spawnText("MISS",320,550,(function(){l&&p&&h&&f&&d&&(l.visible=!1,p.visible=!1,h.visible=!1,f.visible=!1,d.visible=!1,i&&(l.visible=!0),n&&(p.visible=!0),o&&(h.visible=!0),a&&(f.visible=!0),s&&(d.visible=!0),r?(u.spawnEffect(u.selectedSkillType,(function(){})),u.gameLogic.onSkillUsed(u.selectedSkillType)):(u.first_select.visible=!0,u.spawnBossState(t)))}))}))}))}},n.onBossDamaged=function(t,e,i,n){var r,o=this;this.boss.requestAnimation("damaged",(function(){})),r="japanese"===this.language?"".concat(t," \u30c0\u30e1\u30fc\u30b8\uff01"):"".concat(t," Damage!"),e&&this.spawnCriticalText(450,240),this.spawnText(r,450,280,(function(){i<=0&&o.playerStatus.cp<8e3?o.showEndingScene("win",n,i):i<=0&&o.playerStatus.cp>=8e3?o.showEndingScene("easyWin",n,i):o.gameLogic.bossTurn()}))},n.onSkill6Used=function(){var t,e=this;t="japanese"===this.language?"\u5263\u5148\u306b\u7cbe\u795e\u3092\u96c6\u4e2d\u3055\u305b\u305f":"You focused your mind on the tip of your sword",this.spawnText(t,320,550,(function(){e.gameLogic.bossTurn()}))},n.onBossGuarded=function(t,e,i,n,r,o,a){var s,u=this,c=this.uiGraph.get("hit_down"),l=this.uiGraph.get("defense_down"),p=this.uiGraph.get("attack_up"),h=this.uiGraph.get("critical_up"),f=this.uiGraph.get("dv_up");s="japanese"===this.language?"\u7687\u5e1d\u306e\u30bf\u30fc\u30f3\uff01":"The emperor's turn!",this.spawnText(s,320,550,(function(){var s,d=u;s="japanese"===u.language?"\u7687\u5e1d\u306f\u30ac\u30fc\u30c9\u3057\u3066\u3044\u308b\uff01":"The emperor is guarding!",u.spawnText(s,320,550,(function(){c&&l&&p&&h&&f&&(c.visible=!1,l.visible=!1,p.visible=!1,h.visible=!1,f.visible=!1,e&&(c.visible=!0),i&&(l.visible=!0),r&&(p.visible=!0),o&&(h.visible=!0),a&&(f.visible=!0),n?(d.spawnEffect(d.selectedSkillType,(function(){})),d.gameLogic.onSkillUsed(d.selectedSkillType)):(d.first_select.visible=!0,d.spawnBossState(t)))}))}))},n.onBossAvoided=function(t,e,i,n,r,o,a){var s,u=this,c=this.uiGraph.get("hit_down"),l=this.uiGraph.get("defense_down"),p=this.uiGraph.get("attack_up"),h=this.uiGraph.get("critical_up"),f=this.uiGraph.get("dv_up");s="japanese"===this.language?"\u7687\u5e1d\u306e\u30bf\u30fc\u30f3\uff01":"The emperor's turn!",this.spawnText(s,320,550,(function(){var s,d=u;s="japanese"===u.language?"\u7687\u5e1d\u306f\u56de\u907f\u884c\u52d5\u3092\u3057\u3066\u3044\u308b\uff01":"The emperor is doing avoidance behavior!",u.spawnText(s,320,550,(function(){c&&l&&p&&h&&f&&(c.visible=!1,l.visible=!1,p.visible=!1,h.visible=!1,f.visible=!1,e&&(c.visible=!0),i&&(l.visible=!0),r&&(p.visible=!0),o&&(h.visible=!0),a&&(f.visible=!0),n?(d.spawnEffect(d.selectedSkillType,(function(){})),d.gameLogic.onSkillUsed(d.selectedSkillType)):(d.first_select.visible=!0,d.spawnBossState(t)))}))}))},n.onBossFlinched=function(t,e,i,n,r,o,a){var s,u=this,c=this.uiGraph.get("hit_down"),l=this.uiGraph.get("defense_down"),p=this.uiGraph.get("attack_up"),h=this.uiGraph.get("critical_up"),f=this.uiGraph.get("dv_up");s="japanese"===this.language?"\u7687\u5e1d\u306e\u30bf\u30fc\u30f3\uff01":"The emperor's turn!",this.spawnText(s,320,550,(function(){var s,d=u;s="japanese"===u.language?"\u7687\u5e1d\u306f\u602f\u3093\u3067\u3044\u308b\uff01":"The emperor is Flinching!",u.spawnText(s,320,550,(function(){c&&l&&p&&h&&f&&(c.visible=!1,l.visible=!1,p.visible=!1,h.visible=!1,f.visible=!1,e&&(c.visible=!0),i&&(l.visible=!0),r&&(p.visible=!0),o&&(h.visible=!0),a&&(f.visible=!0),n?(d.spawnEffect(d.selectedSkillType,(function(){})),d.gameLogic.onSkillUsed(d.selectedSkillType)):(d.first_select.visible=!0,d.spawnBossState(t)))}))}))},n.onPlayerDamaged=function(t,e,i,n,r,o,a,s,u,c,l,p,h,f){var d,y,m,v,g=this.uiGraph.get("hit_down"),b=this.uiGraph.get("defense_down"),S=this.uiGraph.get("attack_up"),_=this.uiGraph.get("critical_up"),w=this.uiGraph.get("dv_up"),O=this.selectEffectName(r);if("japanese"===this.language?(d="\u7687\u5e1d\u306e\u30bf\u30fc\u30f3\uff01",y="\u7687\u5e1d\u306f\u9b54\u5177\u3092\u4f7f\u3063\u305f\uff01",m="\u547d\u4e2d\u7387\u30c0\u30a6\u30f3\uff01",v="\u9632\u5fa1\u529b\u30c0\u30a6\u30f3\uff01"):(d="The emperor's turn!",y="The emperor used a magic tool!",m="Hit rate down!",v="Defense down\uff01"),r===jt.MAGIC_TOOL_1||r===jt.MAGIC_TOOL_2){var P=this,T=r===jt.MAGIC_TOOL_1?m:v;this.spawnText(d,320,550,(function(){var r=P;P.spawnText(y,320,550,(function(){var s=r;r.elapsedFrameCount=0,r.animationType="damaged",r.spawnEffect(O,(function(){var e,r=s;e="japanese"===s.language?"".concat(t," \u30c0\u30e1\u30fc\u30b8\uff01"):"".concat(t," Damage!"),g&&b&&S&&_&&w&&(g.visible=!1,b.visible=!1,S.visible=!1,_.visible=!1,w.visible=!1,o&&(g.visible=!0),a&&(b.visible=!0),c&&(S.visible=!0),l&&(_.visible=!0),p&&(w.visible=!0),s.spawnText(e,320,550,(function(){var t=r;0!==i?r.spawnText(T,320,550,(function(){u?(t.spawnEffect(t.selectedSkillType,(function(){})),t.gameLogic.onSkillUsed(t.selectedSkillType)):(t.first_select.visible=!0,t.spawnBossState(n))})):r.showEndingScene("lose",h,f)})))})),r.hpGauge.scaleGauge(e,i)}))}))}else if(r===jt.MAGIC_TOOL_3){var x=this;this.spawnText(d,320,550,(function(){var r=x;x.spawnText(y,320,550,(function(){var s=r;r.elapsedFrameCount=0,r.animationType="damaged",r.spawnEffect(O,(function(){var e,r=s;e="japanese"===s.language?"".concat(t," \u30c0\u30e1\u30fc\u30b8\uff01"):"".concat(t," Damage!"),s.spawnText(e,320,550,(function(){0!==i?g&&b&&S&&_&&w&&(g.visible=!1,b.visible=!1,S.visible=!1,_.visible=!1,w.visible=!1,o&&(g.visible=!0),a&&(b.visible=!0),c&&(S.visible=!0),l&&(_.visible=!0),p&&(w.visible=!0),u?(r.spawnEffect(r.selectedSkillType,(function(){})),r.gameLogic.onSkillUsed(r.selectedSkillType)):(r.first_select.visible=!0,r.spawnBossState(n))):r.showEndingScene("lose",h,f)}))})),r.hpGauge.scaleGauge(e,i)}))}))}else{var A=this;this.spawnText(d,320,550,(function(){var r=A;A.elapsedFrameCount=0,A.animationType="damaged",A.spawnEffect(O,(function(){var e,d=r;s&&r.spawnCriticalText(320,510),e="japanese"===r.language?"".concat(t," \u30c0\u30e1\u30fc\u30b8\uff01"):"".concat(t," Damage!"),r.spawnText(e,320,550,(function(){0!==i?g&&b&&S&&_&&w&&(g.visible=!1,b.visible=!1,S.visible=!1,_.visible=!1,w.visible=!1,o&&(g.visible=!0),a&&(b.visible=!0),c&&(S.visible=!0),l&&(_.visible=!0),p&&(w.visible=!0),u?(d.spawnEffect(d.selectedSkillType,(function(){})),d.gameLogic.onSkillUsed(d.selectedSkillType)):(d.first_select.visible=!0,d.spawnBossState(n))):d.showEndingScene("lose",h,f)}))})),A.hpGauge.scaleGauge(e,i)}))}},n.onPlayerHpRecovered=function(t,e,i){var n=this;this.spawnEffect("playerHpRecovered",(function(){var e,i=n;e="japanese"===n.language?"HP ".concat(t," \u56de\u5fa9\uff01"):"HP ".concat(t," Recovered!"),n.spawnText(e,320,550,(function(){i.gameLogic.bossTurn()}))})),this.hpGauge.scaleGauge(e,i)},n.onPlayerFpRecovered=function(t,e,i){var n=this;this.spawnEffect("playerFpRecovered",(function(){var e,i=n;e="japanese"===n.language?"FP ".concat(t," \u56de\u5fa9\uff01"):"FP ".concat(t," Recovered!"),n.spawnText(e,320,550,(function(){i.gameLogic.bossTurn()}))})),this.fpGauge.scaleGauge(e,i)},n.onPlayerFullRecovered=function(t,e,i,n){var r=this,o=this.uiGraph.get("hit_down"),a=this.uiGraph.get("defense_down");o&&a&&(o.visible=!1,a.visible=!1,this.spawnEffect("playerFullRecovered",(function(){var t,e=r;t="japanese"===r.language?"\u5b8c\u5168\u56de\u5fa9\u3057\u305f\uff01":"Perfectly recovered!",r.spawnText(t,320,550,(function(){e.gameLogic.bossTurn()}))})),this.hpGauge.scaleGauge(t,e),this.fpGauge.scaleGauge(i,n))},n.onPlayerCured=function(){var t=this,e=this.uiGraph.get("hit_down"),i=this.uiGraph.get("defense_down");e&&i&&(e.visible=!1,i.visible=!1,this.spawnEffect("playerCured",(function(){var e,i=t;e="japanese"===t.language?"\u72b6\u614b\u7570\u5e38\u56de\u5fa9\uff01":"Bad status cured!",t.spawnText(e,320,550,(function(){i.gameLogic.bossTurn()}))})))},n.onPlayerAttackUpped=function(){var t=this,e=this.uiGraph.get("attack_up");e&&(e.visible=!0,this.spawnEffect("playerAttackUp",(function(){var e,i=t;e="japanese"===t.language?"\u653b\u6483\u529b\u30a2\u30c3\u30d7\uff01":"Attack up!",t.spawnText(e,320,550,(function(){i.gameLogic.bossTurn()}))})))},n.onPlayerCriticalUpped=function(){var t=this,e=this.uiGraph.get("critical_up");e&&(e.visible=!0,this.spawnEffect("playerCriticalUp",(function(){var e,i=t;e="japanese"===t.language?"\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30a2\u30c3\u30d7\uff01":"Critical up!",t.spawnText(e,320,550,(function(){i.gameLogic.bossTurn()}))})))},n.onPlayerDvUpped=function(){var t=this,e=this.uiGraph.get("dv_up");e&&(e.visible=!0,this.spawnEffect("playerDvUp",(function(){var e,i=t;e="japanese"===t.language?"\u56de\u907f\u7387\u30a2\u30c3\u30d7\uff01":"Evasion rate up!",t.spawnText(e,320,550,(function(){i.gameLogic.bossTurn()}))})))},n.onAronBetaUsed=function(){var t=this;this.spawnEffect("playerAllGuard",(function(){t.gameLogic.bossTurn()}))},n.onPlayerFpDecreased=function(t,e){this.fpGauge.scaleGauge(t,e)},n.spawnEffect=function(t,e){var i;switch(t){case"playerNormalAttack":(i=new Jt(e)).position.set(320,280),i.scale.set(3,3);break;case"bossNormalAttack":(i=new ie(e)).position.set(320,450),i.scale.set(2,2);break;case"bossSkill1":(i=new yn(e)).position.set(320,400),i.scale.set(1.2,1.2);break;case"bossSkill2":(i=new wn(e)).position.set(320,400),i.scale.set(1.2,1.2);break;case"bossSkill3":(i=new Cn(e)).position.set(320,320),i.scale.set(1,1.4);break;case"bossSpecialMove":(i=new Dn(e)).position.set(320,320),i.scale.set(1,1.4);break;case"magicTool1":(i=new Wn(e)).position.set(320,450),i.scale.set(1,1);break;case"magicTool2":(i=new Xn(e)).position.set(320,450),i.scale.set(1,1);break;case"magicTool3":(i=new nr(e)).position.set(320,320),i.scale.set(1,1.4);break;case"playerHpRecovered":(i=new ve(e)).position.set(320,500),i.scale.set(2,2);break;case"playerFpRecovered":(i=new Pe(e)).position.set(320,500),i.scale.set(2,2);break;case"playerFullRecovered":(i=new Ee(e)).position.set(320,500),i.scale.set(2,2);break;case"playerCured":(i=new Le(e)).position.set(320,500),i.scale.set(2,2);break;case"playerAttackUp":(i=new Ke(e)).position.set(320,500),i.scale.set(1.2,1.1);break;case"playerCriticalUp":(i=new $e(e)).position.set(320,500),i.scale.set(1.2,1.1);break;case"playerDvUp":(i=new oi(e)).position.set(320,500),i.scale.set(1.2,1.1);break;case"playerGuard":(i=new tn(e)).position.set(320,500),i.scale.set(1.2,1.2);break;case"playerAllGuard":(i=new un(e)).position.set(320,500),i.scale.set(1.5,1.5);break;case Et.SKILL_1:(i=new hi(e)).position.set(320,280),i.scale.set(1,1);break;case Et.SKILL_2:(i=new bi(e)).position.set(320,320),i.scale.set(1,1);break;case Et.SKILL_3:(i=new xi(e)).position.set(320,320),i.scale.set(1,1.4);break;case Et.SKILL_4:(i=new ji(e)).position.set(320,280),i.scale.set(1.5,1.5);break;case Et.SKILL_5:(i=new Mi(e)).position.set(320,280),i.scale.set(2,2);break;case Et.SKILL_6:(i=new Yi(e)).position.set(320,280),i.scale.set(1.5,1.5);break;default:i=new Jt(e)}this.uiGraphContainer.addChild(i),this.registerUpdatingObject(i)},n.spawnText=function(t,e,i,n){var r=this.texts.get("battle_scene_text");if(r){r.text=t;var o=new Nt(r,n);o.position.set(e,i),this.uiGraphContainer.addChild(o),this.registerUpdatingObject(o)}},n.spawnCriticalText=function(t,e){var i=this.texts.get("critical_text");if(i){var n=new Nt(i,(function(){}));n.position.set(t,e),this.uiGraphContainer.addChild(n),this.registerUpdatingObject(n)}},n.spawnBossState=function(t){var e,i=this.uiGraph.get("boss_state");i&&(e=t===Gt.SWORD_VERTICAL?"japanese"===this.language?"\u7687\u5e1d\u306f\u5263\u3092\u5782\u76f4\u306b\u69cb\u3048\u3066\u3044\u308b":"The emperor holds the sword vertically":t===Gt.SWORD_HORIZON?"japanese"===this.language?"\u7687\u5e1d\u306f\u5263\u3092\u6c34\u5e73\u306b\u69cb\u3048\u3066\u3044\u308b":"The emperor holds the sword horizontally":t===Gt.SWORD_UP?"japanese"===this.language?"\u7687\u5e1d\u306f\u5263\u3092\u9ad8\u304f\u4e0a\u3052\u3066\u3044\u308b":"The emperor is raising the sword high":t===Gt.SWORD_CROSS?"japanese"===this.language?"\u7687\u5e1d\u306f\u5263\u3092\u4ea4\u5dee\u3055\u305b\u3066\u3044\u308b":"The emperor is crossing the swords":t===Gt.SWORD_DOWN?"japanese"===this.language?"\u7687\u5e1d\u306f\u5263\u3092\u4e0b\u306b\u4e0b\u3052\u3066\u3044\u308b":"The emperor is lowering the sword":t===Gt.LOW_POSTURE?"japanese"===this.language?"\u7687\u5e1d\u306f\u4f53\u52e2\u3092\u4f4e\u304f\u3057\u3066\u3044\u308b":"The emperor is in a low position":t===Gt.RIGHT_FOOT_FORWARD?"japanese"===this.language?"\u7687\u5e1d\u306f\u53f3\u8db3\u3092\u524d\u306b\u51fa\u3057\u3066\u3044\u308b":"The emperor has his right foot forward":t===Gt.LEFT_FOOT_FORWARD?"japanese"===this.language?"\u7687\u5e1d\u306f\u5de6\u8db3\u3092\u524d\u306b\u51fa\u3057\u3066\u3044\u308b":"The emperor has his left foot forward":t===Gt.RIGHT_HAND_FORWARD?"japanese"===this.language?"\u7687\u5e1d\u306f\u53f3\u624b\u3092\u7a81\u304d\u51fa\u3057\u3066\u3044\u308b":"The emperor sticks out his right hand":t===Gt.LEFT_HAND_FORWARD?"japanese"===this.language?"\u7687\u5e1d\u306f\u5de6\u624b\u3092\u7a81\u304d\u51fa\u3057\u3066\u3044\u308b":"The emperor sticks out his left hand":"",i.text=e,i.visible=!0)},n.onEscapeButtonTapped=function(){h.playSe(g.Audio.Se.OptionTap),this.backToTitle.visible=!this.backToTitle.visible},n.onSkillNameTapped=function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];n&&h.playSe(g.Audio.Se.OptionTap),this.selectedSkillType=t;var r=this.uiGraph.get(e),o=this.uiGraph.get("skill_caption");r&&o&&(this.selectedSkillMarker&&(this.selectedSkillMarker.visible=!1),r.visible=!0,this.selectedSkillMarker=r,o.text=i)},n.onItemNameTapped=function(t,e,i,n,r){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];a&&h.playSe(g.Audio.Se.OptionTap);var s=o.P6Y.kN[t],u=this.uiGraph.get("item_texture"),c=this.uiGraph.get(e),l=this.uiGraph.get("item_caption");u&&c&&l&&(u.texture=s,this.selectedItemMarker&&(this.selectedItemMarker.visible=!1),c.visible=!0,this.selectedItemMarker=c,l.text=i,this.selectedItemName=n,this.selectedItemNumberId=r)},n.onPageButtonTapped=function(t){var e;if(h.playSe(g.Audio.Se.OptionTap),1===t)this.itemNames2.visible=!1,this.itemNames1.visible=!0,e="japanese"===this.language?"300HP\u304b\u3044\u3075\u304f":"Recover 300HP",this.onItemNameTapped("items/potion3_04.png","item_marker_1",e,"hpPotion","item_1_number",!1);else if(2===t){var i;this.itemNames1.visible=!1,this.itemNames2.visible=!0,i="japanese"===this.language?"HP\u30fbFP\u30fb\u72b6\u614b\u7570\u5e38\u3092\u5b8c\u5168\u304b\u3044\u3075\u304f":"Completely Recover HP\u30fbFP\u30fbHealth",this.onItemNameTapped("items/aphrodisiac_01.png","item_marker_1",i,"nectar","item_7_number",!1)}},n.prepareUiGraphContainer=function(t){var e=!0,i=!1,n=void 0;try{for(var r,o=t.nodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=Z.getFactory(a.type)||this.getCustomUiGraphFactory(a.type);if(s){var u=s.createUiNodeByGraphElement(a);u&&(a.events&&s.attachUiEventByGraphElement(a.events,u,this),"first_select"===a.type2?(this.uiGraph.set(a.id,u),this.first_select.addChild(u)):"battle_select"===a.type2?(this.uiGraph.set(a.id,u),this.battle_select.addChild(u)):"message"===a.type?this.texts.set(a.id,u):"boss"===a.type2?this.boss=new ne(u):"item"===a.type2?(this.uiGraph.set(a.id,u),this.itemPage.addChild(u)):"item_page_1"===a.type2?(this.uiGraph.set(a.id,u),this.itemNames1.addChild(u)):"item_page_2"===a.type2?(this.uiGraph.set(a.id,u),this.itemNames2.addChild(u)):"skill"===a.type2?(this.uiGraph.set(a.id,u),this.skillPage.addChild(u)):"back_to_title"===a.type2?(this.uiGraph.set(a.id,u),this.backToTitle.addChild(u)):(this.uiGraph.set(a.id,u),this.uiGraphContainer.addChild(u)))}}}catch(c){i=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}},n.selectEffectName=function(t){return t===jt.NORMAL_ATTACK?"bossNormalAttack":t===jt.SKILL_1?"bossSkill1":t===jt.SKILL_2?"bossSkill2":t===jt.SKILL_3?"bossSkill3":t===jt.SPECIAL_MOVE?"bossSpecialMove":t===jt.MAGIC_TOOL_1?"magicTool1":t===jt.MAGIC_TOOL_2?"magicTool2":t===jt.MAGIC_TOOL_3?"magicTool3":""},n.updatePlayerDamaged=function(){if("idle"!==this.animationType&&"damaged"===this.animationType){if(8===this.elapsedFrameCount)return this.animationType="idle",void(this.uiGraphContainer.position.x=0);if(0===this.elapsedFrameCount)this.uiGraphContainer.position.x=this.uiGraphContainer.position.x+10;else if(this.elapsedFrameCount%2===0){var t;t=this.uiGraphContainer.position.x>0?-1:1,this.uiGraphContainer.position.x=this.uiGraphContainer.position.x+20*t}}},n.playBgmIfNeeded=function(){var t=g.Audio.Bgm.BossBgm;if(!h.hasSound(t)){var e=f.game.loader.resources[t];h.createSound(t,e.buffer),h.playBgm(t,3),0!==h.bgmVolume&&(h.setSoundVolume(g.Audio.Bgm.BossBgm,.005),this.fadeInBgm())}},n.fadeInBgm=function(){var t=h.getSound(g.Audio.Bgm.BossBgm);t&&h.fade(t,3*h.bgmVolume,1.5)},n.loadSaveDataFromDB=function(){l.get("saveData",(function(t){}))},n.onBossHpChanged=function(t){var e=this.uiGraph.get("boss_hp");e&&(e.text=t.toString())},n.onPlayerHpChanged=function(t){var e=this.uiGraph.get("player_hp");e&&(e.text=t.toString())},n.onPlayerFpChanged=function(t){var e=this.uiGraph.get("player_fp");e&&(e.text=t.toString())},n.onTurnAdded=function(t){var e=this.uiGraph.get("turn");e&&(e.text=t.toString())},n.showEndingScene=function(t,e,i){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(h.destroySound(g.Audio.Bgm.BossBgm),this.isOver=!0,f.loadScene(new vr(this.language,this.playerStatus,t,e,i)))},n.showTitleScene=function(){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(this.isOver=!0,h.destroySound(g.Audio.Bgm.BossBgm),h.playSe(g.Audio.Se.OptionTap2),f.loadScene(new Qr))},i}(ot);function xr(t,e,i){return(xr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ar(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function Ar(t){return(Ar=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rr(t,e){return!e||"object"!==Fr(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Cr(t,e){return(Cr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fr=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Er(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Ar(t);if(e){var r=Ar(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Rr(this,i)}}var kr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cr(t,e)}(i,t);var e=Er(i);function i(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(o=e.call(this)).texts=new Map,o.names=["emperor_name","player_name","emperor_name","player_name","emperor_name","player_name","emperor_name","player_name","emperor_name","player_name","emperor_name"],o.textIdsArray=[["emperor_message_1"],["player_message_1"],["emperor_message_2"],["player_message_2"],["emperor_message_3"],["player_message_3","player_message_4"],["emperor_message_4"],["player_message_5"],["emperor_message_5","emperor_message_6","emperor_message_7"],["player_message_6"],["emperor_message_8","emperor_message_9","emperor_message_10"]],o.sceneName="talk_scene",o.transitionIn=new m(1,0,-.02),o.transitionOut=new m(0,1,.02),o.language=t,o.playerStatus=n,o.itemNumbers=r,o}var n=i.prototype;return n.createInitialResourceList=function(){var t=xr(Ar(i.prototype),"createInitialResourceList",this).call(this);return t.push(g.UI.MessageWindow),t.push(g.Audio.Bgm.TalkBgm),t},n.update=function(t){xr(Ar(i.prototype),"update",this).call(this,t)},n.loadInitialResource=function(t){var e,i=this.createInitialResourceList(),n=g.UI.SceneUiGraph(this.sceneName);e="japanese"===this.language?g.Texts.TalkScene.Ja:g.Texts.TalkScene.En,i.push(n),i.push(e);var r=this.filterLoadedAssets(i);r.length>0?f.game.loader.add(r).load(t):t()},n.onResourceLoaded=function(){var t,e=f.game.loader.resources[g.UI.SceneUiGraph(this.sceneName)].data;t="japanese"===this.language?g.Texts.TalkScene.Ja:g.Texts.TalkScene.En;var i=f.game.loader.resources[t].data;this.prepareUiGraphContainer(e),this.prepareUiGraphContainer(i),this.uiGraphContainer.zIndex=1,this.addChild(this.uiGraphContainer),this.initSound();var n=this.textIdsArray.shift(),r=this.names.shift();n&&r&&(this.spawnMessageWindow(n,r),h.playBgm(g.Audio.Bgm.TalkBgm,3))},n.initSound=function(){var t=f.game.loader.resources,e=[g.Audio.Bgm.TalkBgm],i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;h.createSound(s,t[s].buffer)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}},n.spawnMessageWindow=function(t,e){var i=this.createTexts(t),n=this.texts.get(e);if(n){var r=new xt(i,n,this);r.zIndex=3,this.addChild(r),this.registerUpdatingObject(r)}},n.createTexts=function(t){var e=[],i=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value,u=this.texts.get(s);u&&e.push(u)}}catch(c){n=!0,r=c}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}return e},n.onMessageWindowClosed=function(){0===this.names.length&&this.showNextScene();var t=this.textIdsArray.shift(),e=this.names.shift();t&&e&&this.spawnMessageWindow(t,e)},n.prepareUiGraphContainer=function(t){var e=!0,i=!1,n=void 0;try{for(var r,o=t.nodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=Z.getFactory(a.type)||this.getCustomUiGraphFactory(a.type);if(s){var u=s.createUiNodeByGraphElement(a);u&&(a.events&&s.attachUiEventByGraphElement(a.events,u,this),"message"===a.type?this.texts.set(a.id,u):(this.uiGraph.set(a.id,u),this.uiGraphContainer.addChild(u)))}}}catch(c){i=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}},n.onSkipButtonTapped=function(){h.playSe(g.Audio.Se.OptionTap2),this.showNextScene()},n.showNextScene=function(){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(h.destroySound(g.Audio.Bgm.TalkBgm),this.isOver=!0,f.loadScene(new Tr(this.playerStatus,this.itemNumbers,this.language)))},i}(ot);function jr(t,e,i){return(jr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gr(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function Gr(t){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ir(t,e){return!e||"object"!==qr(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dr(t,e){return(Dr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qr=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Lr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Gr(t);if(e){var r=Gr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ir(this,i)}}var Br=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dr(t,e)}(i,t);var e=Lr(i);function i(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).isPaused=!1,n.equipmentPage=new o.W20,n.itemPage=new o.W20,n.texts=new Map,n.equipmentNames=new Map,n.messageWindowClosed=!0,n.selectedMarker1=null,n.selectedMarker2=null,n.selectedMarker3=null,n.selectedMarker4=null,n.rank=null,n.selectedEquipmentParam=null,n.equipmentHPs=new At,n.equipmentFPs=new At,n.equipmentATKs=new At,n.equipmentDEFs=new At,n.equipmentDVs=new At,n.equipmentHITs=new At,n.equipmentCRITs=new At,n.weaponE=null,n.headE=null,n.bodyE=null,n.armE=null,n.footE=null,n.initialPlayerStatus=new Rt,n.playerStatus=new Rt,n.equipingWeaponParam=null,n.equipingHeadParam=null,n.equipingBodyParam=null,n.equipingArmParam=null,n.equipingFootParam=null,n.itemNames1=new o.W20,n.itemNames2=new o.W20,n.itemNumbers=new Map,n.firstSelectIsDone=!1,n.itemCp=2700,n.transitionIn=new m(1,0,-.02),n.transitionOut=new m(0,1,.02),n.sceneName="inventory_scene",n.language=t;var r=!0,a=!1,s=void 0;try{for(var u,c=g.ItemList[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var l=u.value;n.itemNumbers.set(l,5)}}catch(p){a=!0,s=p}finally{try{r||null==c.return||c.return()}finally{if(a)throw s}}return n}var n=i.prototype;return n.beginTransitionIn=function(t,e){var n=this;jr(Gr(i.prototype),"beginTransitionIn",this).call(this,(function(){t(n)}),e)},n.createInitialResourceList=function(){return jr(Gr(i.prototype),"createInitialResourceList",this).call(this).concat(xt.resourceList,g.Items,g.EquipMents,[g.Audio.Se.ShowNextText,g.Audio.Se.Equip,g.Audio.Se.minus,g.Audio.Se.plus,g.UI.OptionFrame])},n.loadInitialResource=function(t){var e,i=this.createInitialResourceList(),n=g.UI.SceneUiGraph(this.sceneName);e="japanese"===this.language?g.Texts.InventoryScene.Ja:g.Texts.InventoryScene.En,i.push(n),i.push(e);var r=this.filterLoadedAssets(i);r.length>0?f.game.loader.add(r).load(t):t()},n.onInitialResourceLoaded=function(){var t,e=[],i=g.UI.SceneUiGraph(this.sceneName);t="japanese"===this.language?g.Texts.InventoryScene.Ja:g.Texts.InventoryScene.En;var n=f.game.loader.resources[i].data.nodes;n=n.concat(f.game.loader.resources[t].data.nodes);var r=!0,o=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;"sprite"===c.type&&e.push({name:c.params.textureName,url:c.params.url})}}catch(l){o=!0,a=l}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return e},n.onResourceLoaded=function(){var t,e=f.game.loader.resources[g.UI.SceneUiGraph(this.sceneName)].data;t="japanese"===this.language?g.Texts.InventoryScene.Ja:g.Texts.InventoryScene.En;var i,n=f.game.loader.resources[t].data;this.prepareUiGraphContainer(e),this.prepareUiGraphContainer(n),this.uiGraphContainer.zIndex=1,this.addChild(this.uiGraphContainer),this.equipmentPage.visible=!1,this.addChild(this.equipmentPage),this.itemNames2.visible=!1,this.itemPage.addChild(this.itemNames1),this.itemPage.addChild(this.itemNames2),this.addChild(this.itemPage),this.initSound(),this.initPlayerStatus(),this.onInventoryTypeSelected("equipment"),this.onEquipmentTypeSelected("weapon_marker",["weapon_name_1","weapon_name_2","weapon_name_3","weapon_name_4","weapon_name_5","weapon_name_6"],{markerName:"equipment_1_marker",eName:"equipment_1_e",textureName:"equipments/weapon08_03.png",type:"weapon",rank:"legendary",hp:0,fp:100,atk:5,def:0,dv:0,hit:1,crit:3}),i="japanese"===this.language?"300HP\u304b\u3044\u3075\u304f":"Recover 300HP",this.onItemNameTapped("items/potion3_04.png","item_marker_1",i),this.spawnMessageWindow(["prepare_battle"],"hero_name")},n.initSound=function(){var t=f.game.loader.resources,e=[g.Audio.Se.ShowNextText,g.Audio.Se.Equip,g.Audio.Se.minus,g.Audio.Se.plus],i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;h.createSound(s,t[s].buffer)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}},n.update=function(t){jr(Gr(i.prototype),"update",this).call(this,t),this.transitionIn.isActive()?this.transitionIn.update(t):this.transitionOut.isActive()&&this.transitionOut.update(t)},n.spawnMessageWindow=function(t,e){var i=this.createTexts(t),n=this.texts.get(e);if(n){var r=new xt(i,n,this);r.zIndex=3,this.messageWindowClosed=!1,this.addChild(r),this.registerUpdatingObject(r)}},n.createTexts=function(t){var e=[],i=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value,u=this.texts.get(s);u&&e.push(u)}}catch(c){n=!0,r=c}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}return e},n.onMessageWindowClosed=function(){this.messageWindowClosed=!0,this.firstSelectIsDone=!0},n.getCustomUiGraphFactory=function(t){return null},n.updatePlayerStatus=function(){var t=0,e=0,i=0,n=0,r=0,o=0,a=0,s=!0,u=!1,c=void 0;try{for(var l,p=Object.values(this.equipmentHPs)[Symbol.iterator]();!(s=(l=p.next()).done);s=!0){t+=l.value}}catch(it){u=!0,c=it}finally{try{s||null==p.return||p.return()}finally{if(u)throw c}}var h=!0,f=!1,d=void 0;try{for(var y,m=Object.values(this.equipmentFPs)[Symbol.iterator]();!(h=(y=m.next()).done);h=!0){e+=y.value}}catch(it){f=!0,d=it}finally{try{h||null==m.return||m.return()}finally{if(f)throw d}}var v=!0,g=!1,b=void 0;try{for(var S,_=Object.values(this.equipmentATKs)[Symbol.iterator]();!(v=(S=_.next()).done);v=!0){i+=S.value}}catch(it){g=!0,b=it}finally{try{v||null==_.return||_.return()}finally{if(g)throw b}}var w=!0,O=!1,P=void 0;try{for(var T,x=Object.values(this.equipmentDEFs)[Symbol.iterator]();!(w=(T=x.next()).done);w=!0){n+=T.value}}catch(it){O=!0,P=it}finally{try{w||null==x.return||x.return()}finally{if(O)throw P}}var A=!0,R=!1,C=void 0;try{for(var F,E=Object.values(this.equipmentDVs)[Symbol.iterator]();!(A=(F=E.next()).done);A=!0){r+=F.value}}catch(it){R=!0,C=it}finally{try{A||null==E.return||E.return()}finally{if(R)throw C}}var k=!0,j=!1,G=void 0;try{for(var I,D=Object.values(this.equipmentHITs)[Symbol.iterator]();!(k=(I=D.next()).done);k=!0){o+=I.value}}catch(it){j=!0,G=it}finally{try{k||null==D.return||D.return()}finally{if(j)throw G}}var q=!0,L=!1,B=void 0;try{for(var M,U=Object.values(this.equipmentCRITs)[Symbol.iterator]();!(q=(M=U.next()).done);q=!0){a+=M.value}}catch(it){L=!0,B=it}finally{try{q||null==U.return||U.return()}finally{if(L)throw B}}this.playerStatus.hp=this.initialPlayerStatus.hp+t,this.playerStatus.fp=this.initialPlayerStatus.fp+e,this.playerStatus.atk=this.initialPlayerStatus.atk+i,this.playerStatus.def=this.initialPlayerStatus.def+n,this.playerStatus.dv=this.initialPlayerStatus.dv+r,this.playerStatus.hit=this.initialPlayerStatus.hit+o,this.playerStatus.crit=this.initialPlayerStatus.crit+a;var N=this.uiGraph.get("max_hp"),W=this.uiGraph.get("max_fp"),H=this.uiGraph.get("max_atk"),K=this.uiGraph.get("max_def"),V=this.uiGraph.get("max_hit"),Y=this.uiGraph.get("max_dv"),z=this.uiGraph.get("max_crit");if(H&&z&&K&&Y&&W&&N&&V){var J=this.uiGraph.get("hp"),X=this.uiGraph.get("fp"),Z=this.uiGraph.get("atk"),$=this.uiGraph.get("def"),Q=this.uiGraph.get("dv"),tt=this.uiGraph.get("hit"),et=this.uiGraph.get("crit");J&&X&&Z&&$&&Q&&tt&&et&&(this.playerStatus.hp>=1200?(this.playerStatus.hp=1200,J.visible=!1,N.visible=!0):(J.visible=!0,N.visible=!1),this.playerStatus.fp>=1200?(this.playerStatus.fp=1200,X.visible=!1,W.visible=!0):(X.visible=!0,W.visible=!1),this.playerStatus.atk>=10?(this.playerStatus.atk=10,Z.visible=!1,H.visible=!0):(Z.visible=!0,H.visible=!1),this.playerStatus.def>=10?(this.playerStatus.def=10,$.visible=!1,K.visible=!0):($.visible=!0,K.visible=!1),this.playerStatus.dv>=10?(this.playerStatus.dv=10,Q.visible=!1,Y.visible=!0):(Q.visible=!0,Y.visible=!1),this.playerStatus.hit>=10?(this.playerStatus.hit=10,tt.visible=!1,V.visible=!0):(tt.visible=!0,V.visible=!1),this.playerStatus.crit>=10?(this.playerStatus.crit=10,et.visible=!1,z.visible=!0):(et.visible=!0,z.visible=!1),this.initPlayerStatus())}},n.updateCp=function(){var t=0;t+=200+2*(this.playerStatus.hp-800),t+=this.playerStatus.fp-500+100,t+=200*this.playerStatus.atk,t+=200*this.playerStatus.def,t+=100*this.playerStatus.dv,t+=100*this.playerStatus.hit,t+=100*this.playerStatus.crit,t+=this.itemCp,this.playerStatus.cp=t,this.updateDifficulty();var e=this.uiGraph.get("cp"),i=this.uiGraph.get("cp_2");t&&(e.text=t.toString(),i.text=t.toString())},n.updateDifficulty=function(){var t=this.uiGraph.get("easy"),e=this.uiGraph.get("easy_2"),i=this.uiGraph.get("normal"),n=this.uiGraph.get("normal_2"),r=this.uiGraph.get("hard"),o=this.uiGraph.get("hard_2");t&&e&&i&&n&&r&&o&&(this.playerStatus.cp>=8e3?(t.visible=!0,e.visible=!0,i.visible=!1,n.visible=!1,r.visible=!1,o.visible=!1):this.playerStatus.cp<8e3&&this.playerStatus.cp>=7e3?(t.visible=!1,e.visible=!1,i.visible=!0,n.visible=!0,r.visible=!1,o.visible=!1):this.playerStatus.cp<7e3&&(t.visible=!1,e.visible=!1,i.visible=!1,n.visible=!1,r.visible=!0,o.visible=!0))},n.initPlayerStatus=function(){var t=this.uiGraph.get("hp"),e=this.uiGraph.get("fp"),i=this.uiGraph.get("atk"),n=this.uiGraph.get("def"),r=this.uiGraph.get("dv"),o=this.uiGraph.get("hit"),a=this.uiGraph.get("crit");t&&e&&i&&n&&r&&o&&a&&(t.text=this.playerStatus.hp.toString(),e.text=this.playerStatus.fp.toString(),i.text=this.playerStatus.atk.toString(),n.text=this.playerStatus.def.toString(),r.text=this.playerStatus.dv.toString(),o.text=this.playerStatus.hit.toString(),a.text=this.playerStatus.crit.toString())},n.onInventoryTypeSelected=function(t){if(this.messageWindowClosed)if(this.firstSelectIsDone&&h.playSe(g.Audio.Se.OptionTap),"equipment"===t){this.equipmentPage.visible=!0,this.itemPage.visible=!1,this.selectedMarker1&&(this.selectedMarker1.visible=!1);var e=this.uiGraph.get("equipment_marker");if(!e)return;e.visible=!0,this.selectedMarker1=e}else if("item"===t){this.equipmentPage.visible=!1,this.itemPage.visible=!0,this.selectedMarker1&&(this.selectedMarker1.visible=!1);var i=this.uiGraph.get("item_marker");if(!i)return;i.visible=!0,this.selectedMarker1=i}},n.onEquipmentTypeSelected=function(t,e,i){if(this.messageWindowClosed){this.firstSelectIsDone&&h.playSe(g.Audio.Se.OptionTap),this.weaponE&&(this.weaponE.visible=!1),this.headE&&(this.headE.visible=!1),this.bodyE&&(this.bodyE.visible=!1),this.armE&&(this.armE.visible=!1),this.footE&&(this.footE.visible=!1),"weapon"===i.type&&this.weaponE&&(this.weaponE.visible=!0),"head"===i.type&&this.headE&&(this.headE.visible=!0),"body"===i.type&&this.bodyE&&(this.bodyE.visible=!0),"arm"===i.type&&this.armE&&(this.armE.visible=!0),"foot"===i.type&&this.footE&&(this.footE.visible=!0),this.equipmentNames.forEach((function(t,e){t.visible=!1}));var n=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value,c=this.equipmentNames.get(u);c&&(c.visible=!0)}}catch(p){r=!0,o=p}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}this.selectedMarker2&&(this.selectedMarker2.visible=!1);var l=this.uiGraph.get(t);l&&(l.visible=!0,this.selectedMarker2=l,this.selectedEquipmentParam=i,"weapon"===i.type&&this.equipingWeaponParam?this.onEquipmentTypeSelected2(this.equipingWeaponParam,!1):"head"===i.type&&this.equipingHeadParam?this.onEquipmentTypeSelected2(this.equipingHeadParam,!1):"body"===i.type&&this.equipingBodyParam?this.onEquipmentTypeSelected2(this.equipingBodyParam,!1):"arm"===i.type&&this.equipingArmParam?this.onEquipmentTypeSelected2(this.equipingArmParam,!1):"foot"===i.type&&this.equipingFootParam?this.onEquipmentTypeSelected2(this.equipingFootParam,!1):this.onEquipmentTypeSelected2(i,!1))}},n.onEquipmentTypeSelected2=function(t){var e,i,n,r,a,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.messageWindowClosed){this.firstSelectIsDone&&s&&h.playSe(g.Audio.Se.OptionTap),this.selectedEquipmentParam=t,this.selectedMarker3&&(this.selectedMarker3.visible=!1);var u=this.uiGraph.get(t.markerName);if(u){u.visible=!0,this.selectedMarker3=u,this.rank&&(this.rank.visible=!1);var c=this.uiGraph.get(t.rank);if(c){c.visible=!0,this.rank=c;var l=o.P6Y.kN[t.textureName],p=this.uiGraph.get("equipment_texture");if(p){p.texture=l;var f=this.uiGraph.get("equipment_hp"),d=this.uiGraph.get("equipment_fp"),y=this.uiGraph.get("equipment_atk"),m=this.uiGraph.get("equipment_def"),v=this.uiGraph.get("equipment_dv"),b=this.uiGraph.get("equipment_hit"),S=this.uiGraph.get("equipment_crit");if(f&&d&&y&&m&&v&&b&&S){f.text=t.hp.toString(),d.text=t.fp.toString(),y.text=t.atk.toString(),m.text=t.def.toString(),v.text=t.dv.toString(),b.text=t.hit.toString(),S.text=t.crit.toString();var _=this.uiGraph.get("equip_button"),w=this.uiGraph.get("equip_button_text"),O=this.uiGraph.get("unEquip_button"),P=this.uiGraph.get("unEquip_button_text");_&&w&&O&&P&&((null===(e=this.equipingWeaponParam)||void 0===e?void 0:e.textureName)===this.selectedEquipmentParam.textureName||(null===(i=this.equipingHeadParam)||void 0===i?void 0:i.textureName)===this.selectedEquipmentParam.textureName||(null===(n=this.equipingBodyParam)||void 0===n?void 0:n.textureName)===this.selectedEquipmentParam.textureName||(null===(r=this.equipingArmParam)||void 0===r?void 0:r.textureName)===this.selectedEquipmentParam.textureName||(null===(a=this.equipingFootParam)||void 0===a?void 0:a.textureName)===this.selectedEquipmentParam.textureName?(_.visible=!1,w.visible=!1,O.visible=!0,P.visible=!0):(_.visible=!0,w.visible=!0,O.visible=!1,P.visible=!1))}}}}}},n.onUnEquipButtonTapped=function(){if(this.messageWindowClosed&&this.selectedEquipmentParam){h.playSe(g.Audio.Se.Equip);var t=this.uiGraph.get("equip_button"),e=this.uiGraph.get("equip_button_text"),i=this.uiGraph.get("unEquip_button"),n=this.uiGraph.get("unEquip_button_text");t&&e&&i&&n&&(t.visible=!0,e.visible=!0,i.visible=!1,n.visible=!1,"weapon"===this.selectedEquipmentParam.type?(this.equipmentHPs.weapon=0,this.equipmentFPs.weapon=0,this.equipmentATKs.weapon=0,this.equipmentDEFs.weapon=0,this.equipmentDVs.weapon=0,this.equipmentHITs.weapon=0,this.equipmentCRITs.weapon=0,this.weaponE&&(this.weaponE.visible=!1),this.weaponE=null,this.equipingWeaponParam=null):"head"===this.selectedEquipmentParam.type?(this.equipmentHPs.head=0,this.equipmentFPs.head=0,this.equipmentATKs.head=0,this.equipmentDEFs.head=0,this.equipmentDVs.head=0,this.equipmentHITs.head=0,this.equipmentCRITs.head=0,this.headE&&(this.headE.visible=!1),this.headE=null,this.equipingHeadParam=null):"body"===this.selectedEquipmentParam.type?(this.equipmentHPs.body=0,this.equipmentFPs.body=0,this.equipmentATKs.body=0,this.equipmentDEFs.body=0,this.equipmentDVs.body=0,this.equipmentHITs.body=0,this.equipmentCRITs.body=0,this.bodyE&&(this.bodyE.visible=!1),this.bodyE=null,this.equipingBodyParam=null):"arm"===this.selectedEquipmentParam.type?(this.equipmentHPs.arm=0,this.equipmentFPs.arm=0,this.equipmentATKs.arm=0,this.equipmentDEFs.arm=0,this.equipmentDVs.arm=0,this.equipmentHITs.arm=0,this.equipmentCRITs.arm=0,this.armE&&(this.armE.visible=!1),this.armE=null,this.equipingArmParam=null):"foot"===this.selectedEquipmentParam.type&&(this.equipmentHPs.foot=0,this.equipmentFPs.foot=0,this.equipmentATKs.foot=0,this.equipmentDEFs.foot=0,this.equipmentDVs.foot=0,this.equipmentHITs.foot=0,this.equipmentCRITs.foot=0,this.footE&&(this.footE.visible=!1),this.footE=null,this.equipingFootParam=null),this.updatePlayerStatus(),this.updateCp())}},n.onEquipButtonTapped=function(){if(this.messageWindowClosed&&this.selectedEquipmentParam){h.playSe(g.Audio.Se.Equip);var t=this.uiGraph.get("equip_button"),e=this.uiGraph.get("equip_button_text"),i=this.uiGraph.get("unEquip_button"),n=this.uiGraph.get("unEquip_button_text");if(t&&e&&i&&n){if(t.visible=!1,e.visible=!1,i.visible=!0,n.visible=!0,"weapon"===this.selectedEquipmentParam.type){this.equipmentHPs.weapon=this.selectedEquipmentParam.hp,this.equipmentFPs.weapon=this.selectedEquipmentParam.fp,this.equipmentATKs.weapon=this.selectedEquipmentParam.atk,this.equipmentDEFs.weapon=this.selectedEquipmentParam.def,this.equipmentDVs.weapon=this.selectedEquipmentParam.dv,this.equipmentHITs.weapon=this.selectedEquipmentParam.hit,this.equipmentCRITs.weapon=this.selectedEquipmentParam.crit,this.weaponE&&(this.weaponE.visible=!1);var r=this.uiGraph.get(this.selectedEquipmentParam.eName);if(!r)return;r.visible=!0,this.weaponE=r,this.equipingWeaponParam=this.selectedEquipmentParam}else if("head"===this.selectedEquipmentParam.type){this.equipmentHPs.head=this.selectedEquipmentParam.hp,this.equipmentFPs.head=this.selectedEquipmentParam.fp,this.equipmentATKs.head=this.selectedEquipmentParam.atk,this.equipmentDEFs.head=this.selectedEquipmentParam.def,this.equipmentDVs.head=this.selectedEquipmentParam.dv,this.equipmentHITs.head=this.selectedEquipmentParam.hit,this.equipmentCRITs.head=this.selectedEquipmentParam.crit,this.headE&&(this.headE.visible=!1);var o=this.uiGraph.get(this.selectedEquipmentParam.eName);if(!o)return;o.visible=!0,this.headE=o,this.equipingHeadParam=this.selectedEquipmentParam}else if("body"===this.selectedEquipmentParam.type){this.equipmentHPs.body=this.selectedEquipmentParam.hp,this.equipmentFPs.body=this.selectedEquipmentParam.fp,this.equipmentATKs.body=this.selectedEquipmentParam.atk,this.equipmentDEFs.body=this.selectedEquipmentParam.def,this.equipmentDVs.body=this.selectedEquipmentParam.dv,this.equipmentHITs.body=this.selectedEquipmentParam.hit,this.equipmentCRITs.body=this.selectedEquipmentParam.crit,this.bodyE&&(this.bodyE.visible=!1);var a=this.uiGraph.get(this.selectedEquipmentParam.eName);if(!a)return;a.visible=!0,this.bodyE=a,this.equipingBodyParam=this.selectedEquipmentParam}else if("arm"===this.selectedEquipmentParam.type){this.equipmentHPs.arm=this.selectedEquipmentParam.hp,this.equipmentFPs.arm=this.selectedEquipmentParam.fp,this.equipmentATKs.arm=this.selectedEquipmentParam.atk,this.equipmentDEFs.arm=this.selectedEquipmentParam.def,this.equipmentDVs.arm=this.selectedEquipmentParam.dv,this.equipmentHITs.arm=this.selectedEquipmentParam.hit,this.equipmentCRITs.arm=this.selectedEquipmentParam.crit,this.armE&&(this.armE.visible=!1);var s=this.uiGraph.get(this.selectedEquipmentParam.eName);if(!s)return;s.visible=!0,this.armE=s,this.equipingArmParam=this.selectedEquipmentParam}else if("foot"===this.selectedEquipmentParam.type){this.equipmentHPs.foot=this.selectedEquipmentParam.hp,this.equipmentFPs.foot=this.selectedEquipmentParam.fp,this.equipmentATKs.foot=this.selectedEquipmentParam.atk,this.equipmentDEFs.foot=this.selectedEquipmentParam.def,this.equipmentDVs.foot=this.selectedEquipmentParam.dv,this.equipmentHITs.foot=this.selectedEquipmentParam.hit,this.equipmentCRITs.foot=this.selectedEquipmentParam.crit,this.footE&&(this.footE.visible=!1);var u=this.uiGraph.get(this.selectedEquipmentParam.eName);if(!u)return;u.visible=!0,this.footE=u,this.equipingFootParam=this.selectedEquipmentParam}this.updatePlayerStatus(),this.updateCp()}}},n.onPageButtonTapped=function(t){var e;if(1===t)this.itemNames2.visible=!1,this.itemNames1.visible=!0,e="japanese"===this.language?"300HP\u304b\u3044\u3075\u304f":"Recover 300HP",this.onItemNameTapped("items/potion3_04.png","item_marker_1",e);else if(2===t){var i;this.itemNames1.visible=!1,this.itemNames2.visible=!0,i="japanese"===this.language?"HP\u30fbFP\u30fb\u72b6\u614b\u7570\u5e38\u3092\u5b8c\u5168\u304b\u3044\u3075\u304f":"Completely Recover HP\u30fbFP\u30fbHealth",this.onItemNameTapped("items/aphrodisiac_01.png","item_marker_1",i)}},n.onItemNameTapped=function(t,e,i){if(this.messageWindowClosed){this.firstSelectIsDone&&h.playSe(g.Audio.Se.OptionTap);var n=o.P6Y.kN[t],r=this.uiGraph.get("item_texture"),a=this.uiGraph.get(e),s=this.uiGraph.get("item_caption");r&&a&&s&&(r.texture=n,this.selectedMarker4&&(this.selectedMarker4.visible=!1),a.visible=!0,this.selectedMarker4=a,s.text=i)}},n.onItemNumberChanged=function(t,e,i,n,r){if(this.messageWindowClosed){var o=this.uiGraph.get(e),a=this.uiGraph.get(i),s=this.itemNumbers.get(t);o&&a&&void 0!==s&&(0===s&&-1===n||10===s&&1===n||(-1===n?h.playSe(g.Audio.Se.minus):1===n&&h.playSe(g.Audio.Se.plus),this.itemNumbers.set(t,s+=n),this.itemCp+=r,this.updateCp(),10===s?(o.visible=!1,a.visible=!0):(o.visible=!0,a.visible=!1),o.text=s.toString()))}},n.prepareUiGraphContainer=function(t){var e=!0,i=!1,n=void 0;try{for(var r,o=t.nodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=Z.getFactory(a.type)||this.getCustomUiGraphFactory(a.type);if(s){var u=s.createUiNodeByGraphElement(a);u&&(a.events&&s.attachUiEventByGraphElement(a.events,u,this),"message"===a.type?this.texts.set(a.id,u):"equipment"===a.type2?(this.uiGraph.set(a.id,u),this.equipmentPage.addChild(u)):"item"===a.type2?(this.uiGraph.set(a.id,u),this.itemPage.addChild(u)):"equipment_name"===a.type2?(this.equipmentPage.addChild(u),this.equipmentNames.set(a.id,u)):"item_page_1"===a.type2?(this.itemNames1.addChild(u),this.uiGraph.set(a.id,u)):"item_page_2"===a.type2?(this.itemNames2.addChild(u),this.uiGraph.set(a.id,u)):(this.uiGraph.set(a.id,u),this.uiGraphContainer.addChild(u)))}}}catch(c){i=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}},n.onBattleButtonTapped=function(){this.messageWindowClosed&&!this.isOver&&(h.paused=!1,h.sceneIsPaused=!1,h.playSe(g.Audio.Se.OptionTap2),f.loadScene(new kr(this.language,this.playerStatus,this.itemNumbers)),this.isOver=!0)},i}(ot);function Mr(t,e,i){return(Mr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ur(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function Ur(t){return(Ur=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nr(t,e){return!e||"object"!==Hr(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wr(t,e){return(Wr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hr=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Kr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Ur(t);if(e){var r=Ur(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Nr(this,i)}}var Vr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wr(t,e)}(i,t);var e=Kr(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this)).lanuguage="",n.sceneName="opening_scene",n.lanuguage=t,n.transitionIn=new m(1,0,-.02),n.transitionOut=new m(0,1,.02),n}var n=i.prototype;return n.createInitialResourceList=function(){var t=Mr(Ur(i.prototype),"createInitialResourceList",this).call(this);return t.push(g.Audio.Se.OptionTap2),t},n.onResourceLoaded=function(){if(Mr(Ur(i.prototype),"onResourceLoaded",this).call(this),"japanese"===this.lanuguage){var t=this.uiGraph.get("opening_text");if(!t)return;this.uiGraphContainer.addChild(t)}else{var e=this.uiGraph.get("opening_text_en");if(!e)return;this.uiGraphContainer.addChild(e)}this.addChild(this.uiGraphContainer),this.initSound()},n.initSound=function(){var t=f.game.loader.resources,e=[g.Audio.Se.OptionTap2],i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;h.createSound(s,t[s].buffer)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}},n.showInventoryScene=function(){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(this.isOver=!0,h.playSe(g.Audio.Se.OptionTap2),f.loadScene(new Br(this.lanuguage)))},n.prepareUiGraphContainer=function(t){var e=!0,i=!1,n=void 0;try{for(var r,o=t.nodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=Z.getFactory(a.type)||this.getCustomUiGraphFactory(a.type);if(s){var u=s.createUiNodeByGraphElement(a);u&&(a.events&&s.attachUiEventByGraphElement(a.events,u,this),this.uiGraph.set(a.id,u),"text"!==a.type&&this.uiGraphContainer.addChild(u))}}}catch(c){i=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}},i}(ot);function Yr(t,e,i){return(Yr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zr(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function zr(t){return(zr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jr(t,e){return!e||"object"!==Zr(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xr(t,e){return(Xr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zr=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function $r(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=zr(t);if(e){var r=zr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Jr(this,i)}}var Qr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xr(t,e)}(i,t);var e=$r(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=e.call(this)).languageOption=new o.W20,t.equipment=new o.jyi,t.equipmentMoveRate=0,t.isEquipmentIn=!0,t.sceneName="title_scene",t.transitionIn=new m(1,0,-.02),t.transitionOut=new m(0,1,.02),t.loadSaveDataFromDB(),t}var n=i.prototype;return n.createInitialResourceList=function(){var t=Yr(zr(i.prototype),"createInitialResourceList",this).call(this);return t.push(g.Audio.Bgm.TitleBgm),t.push(g.Audio.Se.OptionTap),t.push(g.Audio.Se.OptionTap3),t.concat(g.EquipMents)},n.update=function(t){Yr(zr(i.prototype),"update",this).call(this,t),this.updateEquipMentIn(),this.updateEquipMentOut()},n.onResourceLoaded=function(){Yr(zr(i.prototype),"onResourceLoaded",this).call(this),this.equipment.texture=this.getRandomTexture(),this.equipment.position.x=0,this.equipment.position.y=250,this.equipment.scale.set(.4,.4),this.equipment.anchor.set(1,.5),this.equipmentMoveDistance=320+this.equipment.width/2,this.uiGraphContainer.addChild(this.equipment),this.languageOption.visible=!1,this.uiGraphContainer.addChild(this.languageOption),this.addChild(this.uiGraphContainer),this.loadLanguageFromDB(),this.initSound(),this.playBgmIfNeeded()},n.updateEquipMentIn=function(){this.isEquipmentIn&&(this.equipment.position.x>=this.equipmentMoveDistance?(this.equipment.position.x=this.equipmentMoveDistance,this.isEquipmentIn=!1,this.elapsedFrameCount=0,this.equipmentMoveRate=0):(this.equipmentMoveRate+=.01,this.equipment.position.x=this.equipmentMoveDistance*this.easeOutQuint(this.equipmentMoveRate)))},n.updateEquipMentOut=function(){this.isEquipmentIn||this.elapsedFrameCount<=60||(this.equipment.position.x>=2*this.equipmentMoveDistance?(this.equipment.position.x=0,this.isEquipmentIn=!0,this.equipment.texture=this.getRandomTexture(),this.equipmentMoveRate=0):(this.equipmentMoveRate+=.01,this.equipment.position.x=this.equipmentMoveDistance+this.equipmentMoveDistance*this.easeOutQuint(this.equipmentMoveRate)))},n.getRandomTexture=function(){var t=g.EquipMents[Math.floor(Math.random()*g.EquipMents.length)];return o.P6Y.kN[t]},n.initSound=function(){var t=f.game.loader.resources,e=[g.Audio.Se.OptionTap,g.Audio.Se.OptionTap3],i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;h.createSound(s,t[s].buffer)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}},n.onLanguageSelected=function(t){h.playSe(g.Audio.Se.OptionTap3);var e=this.uiGraph.get("new_game_button"),i=this.uiGraph.get("option_button"),n=this.uiGraph.get("credit_button");e&&i&&n&&(e.interactive=!0,i.interactive=!0,n.interactive=!0,this.languageOption.visible=!1,this.language=t,this.saveLanguageToDB(t))},n.onNewGameButtonTouched=function(){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(h.destroySound(g.Audio.Bgm.TitleBgm),h.playSe(g.Audio.Se.OptionTap2),f.loadScene(new Vr(this.language)),this.isOver=!0)},n.showOptionScene=function(){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(this.isOver=!0,h.playSe(g.Audio.Se.OptionTap2),f.loadScene(new ht(this.language)))},n.showCreditScene=function(){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(this.isOver=!0,h.playSe(g.Audio.Se.OptionTap2),f.loadScene(new bt))},n.showLanguageOption=function(){var t=this.uiGraph.get("new_game_button"),e=this.uiGraph.get("option_button"),i=this.uiGraph.get("credit_button");t&&e&&i&&(t.interactive=!1,e.interactive=!1,i.interactive=!1,this.languageOption.visible=!0)},n.saveLanguageToDB=function(t){l.put("language",t)},n.loadLanguageFromDB=function(){var t=this;l.get("language",(function(e){e?t.language=e:t.showLanguageOption()}))},n.prepareUiGraphContainer=function(t){var e=!0,i=!1,n=void 0;try{for(var r,o=t.nodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=Z.getFactory(a.type)||this.getCustomUiGraphFactory(a.type);if(s){var u=s.createUiNodeByGraphElement(a);u&&(a.events&&s.attachUiEventByGraphElement(a.events,u,this),this.uiGraph.set(a.id,u),"language_option_sprite"===a.type||"language_option_text"===a.type?this.languageOption.addChild(u):this.uiGraphContainer.addChild(u))}}}catch(c){i=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}},n.playBgmIfNeeded=function(){var t=g.Audio.Bgm.TitleBgm;if(!h.hasSound(t)){var e=f.game.loader.resources[t];h.createSound(t,e.buffer),h.playBgm(t,1.7),0!==h.bgmVolume&&(h.setSoundVolume(g.Audio.Bgm.TitleBgm,.005),this.fadeInBgm())}},n.fadeInBgm=function(){var t=h.getSound(g.Audio.Bgm.TitleBgm);t&&h.fade(t,1.7*h.bgmVolume,1.5)},n.loadSaveDataFromDB=function(){l.get("saveData",(function(t){}))},n.easeOutQuint=function(t){return 1-Math.pow(1-t,5)},i}(ot);function to(t,e,i){return(to="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eo(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function eo(t){return(eo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function io(t,e){return!e||"object"!==ro(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function no(t,e){return(no=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ro=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function oo(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=eo(t);if(e){var r=eo(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return io(this,i)}}var ao=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&no(t,e)}(i,t);var e=oo(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=e.call(this)).sceneName="start_scene",t.transitionIn=new m(1,0,-.02),t.transitionOut=new m(0,1,.02),t.interactive=!0,t.on("pointerdown",(function(){t.showTitleScene()})),t}var n=i.prototype;return n.createInitialResourceList=function(){var t=to(eo(i.prototype),"createInitialResourceList",this).call(this);return t.push(g.Audio.Se.OptionTap2),t},n.update=function(t){to(eo(i.prototype),"update",this).call(this,t),this.elapsedFrameCount%40===0&&(this.startButton.visible=!this.startButton.visible)},n.onResourceLoaded=function(){to(eo(i.prototype),"onResourceLoaded",this).call(this),this.addChild(this.uiGraphContainer);var t=this.uiGraph.get("start_button");t&&(this.startButton=t,this.initSound())},n.initSound=function(){var t=f.game.loader.resources,e=[g.Audio.Se.OptionTap2],i=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;h.createSound(s,t[s].buffer)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}},n.showTitleScene=function(){this.isOver||this.transitionIn.isActive()||this.transitionOut.isActive()||(this.isOver=!0,h.playSe(g.Audio.Se.OptionTap2),f.loadScene(new Qr))},i}(ot),so=i(5933);var uo=(0,i(1752).default)(),co=(uo.serverRuntimeConfig,uo.publicRuntimeConfig),lo=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.startGame=function(){so.load({custom:{families:[g.FontFamily.Default],urls:["".concat(co.staticFolder,"/font.css")]},active:function(){t.initGame()},timeout:15e3})},t.initGame=function(){f.start({width:640,height:640,backgroundColor:0}),f.loadScene(new ao)},t}(),po=i(7294);function ho(){return(0,po.useEffect)((function(){lo.startGame()})),(0,n.jsx)("div",{id:"play-game"})}}}]);